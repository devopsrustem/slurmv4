---
# –ì–ª–∞–≤–Ω—ã–π playbook –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Slurm HPC –∫–ª–∞—Å—Ç–µ—Ä–∞
# Ubuntu 24.04 + Slurm 25.05.1 + JWT

- name: "Slurm HPC Cluster Deployment"
  hosts: localhost
  gather_facts: false
  tasks:
    - name: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏"
      debug:
        msg: |
          üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Slurm HPC –∫–ª–∞—Å—Ç–µ—Ä–∞
          üìã Ubuntu 24.04 + Slurm {{ slurm_version | default('25.05.1') }}
          üîê JWT –ø–æ–¥–¥–µ—Ä–∂–∫–∞: {{ jwt_enabled | default(true) }}
          üéØ –ö–ª–∞—Å—Ç–µ—Ä: {{ cluster_name | default('hpc-cluster') }}

# –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Å–µ—Ö —É–∑–ª–æ–≤
- import_playbook: prerequisites.yml

# –≠—Ç–∞–ø 2: –û—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Slurm
- import_playbook: slurm_cluster.yml

# –≠—Ç–∞–ø 3: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Enroot + Pyxis  
- import_playbook: containers.yml

# –≠—Ç–∞–ø 4: JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- import_playbook: jwt_setup.yml
