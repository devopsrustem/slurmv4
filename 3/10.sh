üîé –°–¥–µ–ª–∞–π –Ω–∞ –≤—Å–µ—Ö 4 –Ω–æ–¥–∞—Ö
show_gids

–∏–ª–∏

ibv_devinfo -v | grep gid

–ù–∞–π–¥–∏:

–∫–∞–∫–æ–π GID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç IP 10.99.91.x

RoCE v2

IPv4

–ò —Å—Ä–∞–≤–Ω–∏ –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏.

üî• –ü–æ—á–µ–º—É —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –∏–º–µ–Ω–Ω–æ –Ω–∞ RoCE mismatch

–û—à–∏–±–∫–∞ –Ω–µ —Ç–∞–∫–∞—è:

NCCL WARN ...

–û—à–∏–±–∫–∞ –∏–º–µ–Ω–Ω–æ:

remote mooncake session 10.99.91.49:15993 is not alive

Mooncake –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RDMA CM –ø–æ–≤–µ—Ä—Ö RoCE.

–ï—Å–ª–∏ GID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Äî
CM handshake –ø—Ä–æ—Ö–æ–¥–∏—Ç,
–Ω–æ QP –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è,
–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ "–≤–∏—Å–∏—Ç –º—ë—Ä—Ç–≤—ã–º".

–≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–∏:

—Ä–∞–∑–Ω—ã—Ö ToR

—Ä–∞–∑–Ω—ã—Ö MTU

—Ä–∞–∑–Ω—ã—Ö PFC/ECN –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

—Ä–∞–∑–Ω—ã—Ö GID index

üö® –í—Ç–æ—Ä–æ–π —Å–∏–ª—å–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç

–¢—ã —É–∫–∞–∑–∞–ª:

--disaggregation-ib-device mlx5_0

–£ DGX H100 –æ–±—ã—á–Ω–æ:

mlx5_0

mlx5_1

...

mlx5_7

–ù–æ!

–ù–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö mlx5_0 –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –†–ê–ó–ù–´–ô —Å–≤–∏—á.

–ï—Å–ª–∏ fabric –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞ ‚Äî
prefill –∏ decode –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö L2 –¥–æ–º–µ–Ω–∞—Ö.

üß™ –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏ RDMA –¥–ª—è disaggregation:

–ù–∞ –≤—Å–µ—Ö 4 –Ω–æ–¥–∞—Ö:

export NCCL_IB_DISABLE=1

–ò —É–±–µ—Ä–∏:

--disaggregation-ib-device

–ü—É—Å—Ç—å Mooncake –ø–æ–π–¥—ë—Ç —á–µ—Ä–µ–∑ TCP.

–ï—Å–ª–∏ –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí 100% –ø—Ä–æ–±–ª–µ–º–∞ –≤ RoCE.

üéØ –í—Ç–æ—Ä–æ–π —Ç–µ—Å—Ç

–ü–æ–ø—Ä–æ–±—É–π –Ω–∞ –≤—Å–µ—Ö 4 –Ω–æ–¥–∞—Ö:

export NCCL_IB_GID_INDEX=0

(–≤—Ä–µ–º–µ–Ω–Ω–æ)

–ï—Å–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –∑–Ω–∞—á–∏—Ç GID mismatch.

üìå –í–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å

RoCE v1 –∏–ª–∏ v2?

–ü—Ä–æ–≤–µ—Ä—å:

cat /sys/class/infiniband/mlx5_0/ports/1/gid_attrs/types/*

–ï—Å–ª–∏ —É–≤–∏–¥–∏—à—å RoCE v1 –∏ RoCE v2 ‚Äî –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å.

üß† –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ disaggregation

–ë–µ–∑ disaggregation –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ NVLink/NVSwitch.

–° disaggregation:

KV –∏–¥—ë—Ç —á–µ—Ä–µ–∑ RDMA

fabric —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω–æ–π

–ò –ª—é–±—ã–µ –º–µ–ª–∫–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–æ–º–∞—é—Ç transfer.

üí° –ú–æ–π –ø—Ä–æ–≥–Ω–æ–∑

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏—á–∏–Ω:

60% GID index mismatch

25% RoCE v1/v2 mismatch

10% MTU mismatch

5% firewall

–û—Ç–≤–µ—Ç—å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π:

show_gids | grep 10.99.91

—Å –ª—é–±–æ–π prefill –∏ decode –Ω–æ–¥—ã.

–¢–æ–≥–¥–∞ —è —Å–∫–∞–∂—É —Ç–æ—á–Ω–æ.

((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0006 ~]$ show_gids
DEV	PORT	INDEX	GID					IPv4  		VER	DEV
---	----	-----	---					------------  	---	---
mlx5_0	1	0	fe80:0000:0000:0000:1270:fdff:fe27:250b			v1	ens3np0
mlx5_0	1	1	fe80:0000:0000:0000:1270:fdff:fe27:250b			v2	ens3np0
mlx5_0	1	2	0000:0000:0000:0000:0000:ffff:0a63:5b23	10.99.91.35  	v1	ens3np0
mlx5_0	1	3	0000:0000:0000:0000:0000:ffff:0a63:5b23	10.99.91.35  	v2	ens3np0
mlx5_1	1	0	fe80:0000:0000:0000:1270:fdff:fe27:2560			v1	ens2np0
mlx5_1	1	1	fe80:0000:0000:0000:1270:fdff:fe27:2560			v2	ens2np0
mlx5_1	1	2	0000:0000:0000:0000:0000:ffff:0a63:5c23	10.99.92.35  	v1	ens2np0
mlx5_1	1	3	0000:0000:0000:0000:0000:ffff:0a63:5c23	10.99.92.35  	v2	ens2np0
mlx5_10	1	0	fe80:0000:0000:0000:5aa2:e1ff:feb8:a1aa			v1	bond0
mlx5_10	1	1	fe80:0000:0000:0000:5aa2:e1ff:feb8:a1aa			v2	bond0
mlx5_10	1	2	0000:0000:0000:0000:0000:ffff:0a52:6582	10.82.101.130  	v1	bond0
mlx5_10	1	3	0000:0000:0000:0000:0000:ffff:0a52:6582	10.82.101.130  	v2	bond0
mlx5_11	1	0	fe80:0000:0000:0000:5aa2:e1ff:feb8:a1ab			v1	ens10f1np1
mlx5_11	1	1	fe80:0000:0000:0000:5aa2:e1ff:feb8:a1ab			v2	ens10f1np1
mlx5_2	1	0	fe80:0000:0000:0000:1270:fdff:fe27:255f			v1	ens4np0
mlx5_2	1	1	fe80:0000:0000:0000:1270:fdff:fe27:255f			v2	ens4np0
mlx5_2	1	2	0000:0000:0000:0000:0000:ffff:0a63:5d23	10.99.93.35  	v1	ens4np0
mlx5_2	1	3	0000:0000:0000:0000:0000:ffff:0a63:5d23	10.99.93.35  	v2	ens4np0
mlx5_3	1	0	fe80:0000:0000:0000:1270:fdff:fe27:256f			v1	ens1np0
mlx5_3	1	1	fe80:0000:0000:0000:1270:fdff:fe27:256f			v2	ens1np0
mlx5_3	1	2	0000:0000:0000:0000:0000:ffff:0a63:5e23	10.99.94.35  	v1	ens1np0
mlx5_3	1	3	0000:0000:0000:0000:0000:ffff:0a63:5e23	10.99.94.35  	v2	ens1np0
mlx5_4	1	0	fe80:0000:0000:0000:1270:fdff:fe27:254c			v1	ens8np0
mlx5_4	1	1	fe80:0000:0000:0000:1270:fdff:fe27:254c			v2	ens8np0
mlx5_4	1	2	0000:0000:0000:0000:0000:ffff:0a63:5f23	10.99.95.35  	v1	ens8np0
mlx5_4	1	3	0000:0000:0000:0000:0000:ffff:0a63:5f23	10.99.95.35  	v2	ens8np0
mlx5_5	1	0	fe80:0000:0000:0000:1270:fdff:fe27:2506			v1	ens7np0
mlx5_5	1	1	fe80:0000:0000:0000:1270:fdff:fe27:2506			v2	ens7np0
mlx5_5	1	2	0000:0000:0000:0000:0000:ffff:0a63:6023	10.99.96.35  	v1	ens7np0
mlx5_5	1	3	0000:0000:0000:0000:0000:ffff:0a63:6023	10.99.96.35  	v2	ens7np0
mlx5_6	1	0	fe80:0000:0000:0000:1270:fdff:fe27:2572			v1	ens6np0
mlx5_6	1	1	fe80:0000:0000:0000:1270:fdff:fe27:2572			v2	ens6np0
mlx5_6	1	2	0000:0000:0000:0000:0000:ffff:0a63:6123	10.99.97.35  	v1	ens6np0
mlx5_6	1	3	0000:0000:0000:0000:0000:ffff:0a63:6123	10.99.97.35  	v2	ens6np0
mlx5_7	1	0	fe80:0000:0000:0000:1270:fdff:fe27:2565			v1	ens5np0
mlx5_7	1	1	fe80:0000:0000:0000:1270:fdff:fe27:2565			v2	ens5np0
mlx5_7	1	2	0000:0000:0000:0000:0000:ffff:0a63:6223	10.99.98.35  	v1	ens5np0
mlx5_7	1	3	0000:0000:0000:0000:0000:ffff:0a63:6223	10.99.98.35  	v2	ens5np0
mlx5_8	1	0	fe80:0000:0000:0000:5aa2:e1ff:feb8:a1aa			v1	bond0
mlx5_8	1	1	fe80:0000:0000:0000:5aa2:e1ff:feb8:a1aa			v2	bond0
mlx5_8	1	2	0000:0000:0000:0000:0000:ffff:0a52:6582	10.82.101.130  	v1	bond0
mlx5_8	1	3	0000:0000:0000:0000:0000:ffff:0a52:6582	10.82.101.130  	v2	bond0
mlx5_9	1	0	fe80:0000:0000:0000:5aa2:e1ff:feb8:93cb			v1	ens12f1np1
mlx5_9	1	1	fe80:0000:0000:0000:5aa2:e1ff:feb8:93cb			v2	ens12f1np1
n_gids_found=44
((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0006 ~]$ cat /sys/class/infiniband/mlx5_0/ports/1/gid_attrs/types/*
IB/RoCE v1
RoCE v2

((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0003 ~]$ show_gids
DEV	PORT	INDEX	GID					IPv4  		VER	DEV
---	----	-----	---					------------  	---	---
mlx5_0	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:93f2			v1	ens3np0
mlx5_0	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:93f2			v2	ens3np0
mlx5_0	1	2	0000:0000:0000:0000:0000:ffff:0a63:5b31	10.99.91.49  	v1	ens3np0
mlx5_0	1	3	0000:0000:0000:0000:0000:ffff:0a63:5b31	10.99.91.49  	v2	ens3np0
mlx5_1	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:940a			v1	ens2np0
mlx5_1	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:940a			v2	ens2np0
mlx5_1	1	2	0000:0000:0000:0000:0000:ffff:0a63:5c31	10.99.92.49  	v1	ens2np0
mlx5_1	1	3	0000:0000:0000:0000:0000:ffff:0a63:5c31	10.99.92.49  	v2	ens2np0
mlx5_10	1	0	fe80:0000:0000:0000:bae9:24ff:fe4c:137c			v1	bond0
mlx5_10	1	1	fe80:0000:0000:0000:bae9:24ff:fe4c:137c			v2	bond0
mlx5_10	1	2	0000:0000:0000:0000:0000:ffff:0a52:65f9	10.82.101.249  	v1	bond0
mlx5_10	1	3	0000:0000:0000:0000:0000:ffff:0a52:65f9	10.82.101.249  	v2	bond0
mlx5_11	1	0	fe80:0000:0000:0000:bae9:24ff:fe4c:137d			v1	ens10f1np1
mlx5_11	1	1	fe80:0000:0000:0000:bae9:24ff:fe4c:137d			v2	ens10f1np1
mlx5_2	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:9464			v1	ens4np0
mlx5_2	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:9464			v2	ens4np0
mlx5_2	1	2	0000:0000:0000:0000:0000:ffff:0a63:5d31	10.99.93.49  	v1	ens4np0
mlx5_2	1	3	0000:0000:0000:0000:0000:ffff:0a63:5d31	10.99.93.49  	v2	ens4np0
mlx5_3	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:946e			v1	ens1np0
mlx5_3	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:946e			v2	ens1np0
mlx5_3	1	2	0000:0000:0000:0000:0000:ffff:0a63:5e31	10.99.94.49  	v1	ens1np0
mlx5_3	1	3	0000:0000:0000:0000:0000:ffff:0a63:5e31	10.99.94.49  	v2	ens1np0
mlx5_4	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:9408			v1	ens8np0
mlx5_4	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:9408			v2	ens8np0
mlx5_4	1	2	0000:0000:0000:0000:0000:ffff:0a63:5f31	10.99.95.49  	v1	ens8np0
mlx5_4	1	3	0000:0000:0000:0000:0000:ffff:0a63:5f31	10.99.95.49  	v2	ens8np0
mlx5_5	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:93f8			v1	ens7np0
mlx5_5	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:93f8			v2	ens7np0
mlx5_5	1	2	0000:0000:0000:0000:0000:ffff:0a63:6031	10.99.96.49  	v1	ens7np0
mlx5_5	1	3	0000:0000:0000:0000:0000:ffff:0a63:6031	10.99.96.49  	v2	ens7np0
mlx5_6	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:9468			v1	ens6np0
mlx5_6	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:9468			v2	ens6np0
mlx5_6	1	2	0000:0000:0000:0000:0000:ffff:0a63:6131	10.99.97.49  	v1	ens6np0
mlx5_6	1	3	0000:0000:0000:0000:0000:ffff:0a63:6131	10.99.97.49  	v2	ens6np0
mlx5_7	1	0	fe80:0000:0000:0000:0e42:a1ff:fe60:943e			v1	ens5np0
mlx5_7	1	1	fe80:0000:0000:0000:0e42:a1ff:fe60:943e			v2	ens5np0
mlx5_7	1	2	0000:0000:0000:0000:0000:ffff:0a63:6231	10.99.98.49  	v1	ens5np0
mlx5_7	1	3	0000:0000:0000:0000:0000:ffff:0a63:6231	10.99.98.49  	v2	ens5np0
mlx5_8	1	0	fe80:0000:0000:0000:bae9:24ff:fe4c:137c			v1	bond0
mlx5_8	1	1	fe80:0000:0000:0000:bae9:24ff:fe4c:137c			v2	bond0
mlx5_8	1	2	0000:0000:0000:0000:0000:ffff:0a52:65f9	10.82.101.249  	v1	bond0
mlx5_8	1	3	0000:0000:0000:0000:0000:ffff:0a52:65f9	10.82.101.249  	v2	bond0
mlx5_9	1	0	fe80:0000:0000:0000:bae9:24ff:fe4c:132d			v1	ens12f1np1
mlx5_9	1	1	fe80:0000:0000:0000:bae9:24ff:fe4c:132d			v2	ens12f1np1
n_gids_found=44
((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0003 ~]$ cat /sys/class/infiniband/mlx5_0/ports/1/gid_attrs/types/*
IB/RoCE v1
RoCE v2


((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0001 ~]$ show_gids
DEV	PORT	INDEX	GID					IPv4  		VER	DEV
---	----	-----	---					------------  	---	---
mlx5_0	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:5a20			v1	ens108np0
mlx5_0	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:5a20			v2	ens108np0
mlx5_0	1	2	0000:0000:0000:0000:0000:ffff:0a63:5b27	10.99.91.39  	v1	ens108np0
mlx5_0	1	3	0000:0000:0000:0000:0000:ffff:0a63:5b27	10.99.91.39  	v2	ens108np0
mlx5_1	1	0	fe80:0000:0000:0000:3a25:f3ff:fe73:de36			v1	bond0
mlx5_1	1	1	fe80:0000:0000:0000:3a25:f3ff:fe73:de36			v2	bond0
mlx5_1	1	2	0000:0000:0000:0000:0000:ffff:0a52:65c1	10.82.101.193  	v1	bond0
mlx5_1	1	3	0000:0000:0000:0000:0000:ffff:0a52:65c1	10.82.101.193  	v2	bond0
mlx5_10	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:5d78			v1	ens114np0
mlx5_10	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:5d78			v2	ens114np0
mlx5_10	1	2	0000:0000:0000:0000:0000:ffff:0a63:6127	10.99.97.39  	v1	ens114np0
mlx5_10	1	3	0000:0000:0000:0000:0000:ffff:0a63:6127	10.99.97.39  	v2	ens114np0
mlx5_11	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:6580			v1	ens115np0
mlx5_11	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:6580			v2	ens115np0
mlx5_11	1	2	0000:0000:0000:0000:0000:ffff:0a63:6227	10.99.98.39  	v1	ens115np0
mlx5_11	1	3	0000:0000:0000:0000:0000:ffff:0a63:6227	10.99.98.39  	v2	ens115np0
mlx5_2	1	0	fe80:0000:0000:0000:3a25:f3ff:fe73:de37			v1	ens12f1np1
mlx5_2	1	1	fe80:0000:0000:0000:3a25:f3ff:fe73:de37			v2	ens12f1np1
mlx5_3	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:59f8			v1	ens109np0
mlx5_3	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:59f8			v2	ens109np0
mlx5_3	1	2	0000:0000:0000:0000:0000:ffff:0a63:5c27	10.99.92.39  	v1	ens109np0
mlx5_3	1	3	0000:0000:0000:0000:0000:ffff:0a63:5c27	10.99.92.39  	v2	ens109np0
mlx5_4	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:6300			v1	ens110np0
mlx5_4	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:6300			v2	ens110np0
mlx5_4	1	2	0000:0000:0000:0000:0000:ffff:0a63:5d27	10.99.93.39  	v1	ens110np0
mlx5_4	1	3	0000:0000:0000:0000:0000:ffff:0a63:5d27	10.99.93.39  	v2	ens110np0
mlx5_5	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:6308			v1	ens111np0
mlx5_5	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:6308			v2	ens111np0
mlx5_5	1	2	0000:0000:0000:0000:0000:ffff:0a63:5e27	10.99.94.39  	v1	ens111np0
mlx5_5	1	3	0000:0000:0000:0000:0000:ffff:0a63:5e27	10.99.94.39  	v2	ens111np0
mlx5_6	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:6318			v1	ens112np0
mlx5_6	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:6318			v2	ens112np0
mlx5_6	1	2	0000:0000:0000:0000:0000:ffff:0a63:5f27	10.99.95.39  	v1	ens112np0
mlx5_6	1	3	0000:0000:0000:0000:0000:ffff:0a63:5f27	10.99.95.39  	v2	ens112np0
mlx5_7	1	0	fe80:0000:0000:0000:3a25:f3ff:fe73:de36			v1	bond0
mlx5_7	1	1	fe80:0000:0000:0000:3a25:f3ff:fe73:de36			v2	bond0
mlx5_7	1	2	0000:0000:0000:0000:0000:ffff:0a52:65c1	10.82.101.193  	v1	bond0
mlx5_7	1	3	0000:0000:0000:0000:0000:ffff:0a52:65c1	10.82.101.193  	v2	bond0
mlx5_8	1	0	fe80:0000:0000:0000:3a25:f3ff:fe73:deb7			v1	ens20f1np1
mlx5_8	1	1	fe80:0000:0000:0000:3a25:f3ff:fe73:deb7			v2	ens20f1np1
mlx5_9	1	0	fe80:0000:0000:0000:a288:c2ff:fe63:5c48			v1	ens113np0
mlx5_9	1	1	fe80:0000:0000:0000:a288:c2ff:fe63:5c48			v2	ens113np0
mlx5_9	1	2	0000:0000:0000:0000:0000:ffff:0a63:6027	10.99.96.39  	v1	ens113np0
mlx5_9	1	3	0000:0000:0000:0000:0000:ffff:0a63:6027	10.99.96.39  	v2	ens113np0
n_gids_found=44
((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0001 ~]$ cat /sys/class/infiniband/mlx5_0/ports/1/gid_attrs/types/*
IB/RoCE v1
RoCE v2

((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0002 ~]$ show_gids
DEV	PORT	INDEX	GID					IPv4  		VER	DEV
---	----	-----	---					------------  	---	---
mlx5_0	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:8076			v1	ens108np0
mlx5_0	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:8076			v2	ens108np0
mlx5_0	1	2	0000:0000:0000:0000:0000:ffff:0a63:5b29	10.99.91.41  	v1	ens108np0
mlx5_0	1	3	0000:0000:0000:0000:0000:ffff:0a63:5b29	10.99.91.41  	v2	ens108np0
mlx5_1	1	0	fe80:0000:0000:0000:5200:e6ff:fed9:08fe			v1	bond0
mlx5_1	1	1	fe80:0000:0000:0000:5200:e6ff:fed9:08fe			v2	bond0
mlx5_1	1	2	0000:0000:0000:0000:0000:ffff:0a52:65c2	10.82.101.194  	v1	bond0
mlx5_1	1	3	0000:0000:0000:0000:0000:ffff:0a52:65c2	10.82.101.194  	v2	bond0
mlx5_10	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:806e			v1	ens114np0
mlx5_10	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:806e			v2	ens114np0
mlx5_10	1	2	0000:0000:0000:0000:0000:ffff:0a63:6129	10.99.97.41  	v1	ens114np0
mlx5_10	1	3	0000:0000:0000:0000:0000:ffff:0a63:6129	10.99.97.41  	v2	ens114np0
mlx5_11	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:7d86			v1	ens115np0
mlx5_11	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:7d86			v2	ens115np0
mlx5_11	1	2	0000:0000:0000:0000:0000:ffff:0a63:6229	10.99.98.41  	v1	ens115np0
mlx5_11	1	3	0000:0000:0000:0000:0000:ffff:0a63:6229	10.99.98.41  	v2	ens115np0
mlx5_2	1	0	fe80:0000:0000:0000:5200:e6ff:fed9:08ff			v1	ens12f1np1
mlx5_2	1	1	fe80:0000:0000:0000:5200:e6ff:fed9:08ff			v2	ens12f1np1
mlx5_3	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:7d76			v1	ens109np0
mlx5_3	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:7d76			v2	ens109np0
mlx5_3	1	2	0000:0000:0000:0000:0000:ffff:0a63:5c29	10.99.92.41  	v1	ens109np0
mlx5_3	1	3	0000:0000:0000:0000:0000:ffff:0a63:5c29	10.99.92.41  	v2	ens109np0
mlx5_4	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:7d6e			v1	ens110np0
mlx5_4	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:7d6e			v2	ens110np0
mlx5_4	1	2	0000:0000:0000:0000:0000:ffff:0a63:5d29	10.99.93.41  	v1	ens110np0
mlx5_4	1	3	0000:0000:0000:0000:0000:ffff:0a63:5d29	10.99.93.41  	v2	ens110np0
mlx5_5	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:3aee			v1	ens111np0
mlx5_5	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:3aee			v2	ens111np0
mlx5_5	1	2	0000:0000:0000:0000:0000:ffff:0a63:5e29	10.99.94.41  	v1	ens111np0
mlx5_5	1	3	0000:0000:0000:0000:0000:ffff:0a63:5e29	10.99.94.41  	v2	ens111np0
mlx5_6	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:7de6			v1	ens112np0
mlx5_6	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:7de6			v2	ens112np0
mlx5_6	1	2	0000:0000:0000:0000:0000:ffff:0a63:5f29	10.99.95.41  	v1	ens112np0
mlx5_6	1	3	0000:0000:0000:0000:0000:ffff:0a63:5f29	10.99.95.41  	v2	ens112np0
mlx5_7	1	0	fe80:0000:0000:0000:5200:e6ff:fed9:08fe			v1	bond0
mlx5_7	1	1	fe80:0000:0000:0000:5200:e6ff:fed9:08fe			v2	bond0
mlx5_7	1	2	0000:0000:0000:0000:0000:ffff:0a52:65c2	10.82.101.194  	v1	bond0
mlx5_7	1	3	0000:0000:0000:0000:0000:ffff:0a52:65c2	10.82.101.194  	v2	bond0
mlx5_8	1	0	fe80:0000:0000:0000:5200:e6ff:fed8:d7bf			v1	ens20f1np1
mlx5_8	1	1	fe80:0000:0000:0000:5200:e6ff:fed8:d7bf			v2	ens20f1np1
mlx5_9	1	0	fe80:0000:0000:0000:9e63:c0ff:fe90:3a06			v1	ens113np0
mlx5_9	1	1	fe80:0000:0000:0000:9e63:c0ff:fe90:3a06			v2	ens113np0
mlx5_9	1	2	0000:0000:0000:0000:0000:ffff:0a63:6029	10.99.96.41  	v1	ens113np0
mlx5_9	1	3	0000:0000:0000:0000:0000:ffff:0a63:6029	10.99.96.41  	v2	ens113np0
n_gids_found=44
((sglang-0.5.8.post1) ) [dcbsr_dev@tpgds-aihub0002 ~]$ cat /sys/class/infiniband/mlx5_0/ports/1/gid_attrs/types/*
IB/RoCE v1
RoCE v2




