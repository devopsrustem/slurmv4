# /etc/hosts - Generated by Ansible
# {{ ansible_managed }}
# Generated on {{ ansible_date_time.iso8601 }}

127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

# =============================================================================
# SLURM CLUSTER HOSTS
# =============================================================================

{% for host in groups['all'] %}
{% if hostvars[host]['ansible_default_ipv4'] is defined %}
{{ hostvars[host]['ansible_default_ipv4']['address'] }}    {{ host }} {{ host }}.{{ ansible_domain | default('local') }}
{% elif hostvars[host]['ansible_host'] is defined %}
{{ hostvars[host]['ansible_host'] }}    {{ host }} {{ host }}.{{ ansible_domain | default('local') }}
{% endif %}
{% endfor %}

# =============================================================================
# CLUSTER ALIASES
# =============================================================================
{% if groups['master_nodes'] is defined %}
{% for host in groups['master_nodes'] %}
{% if hostvars[host]['ansible_default_ipv4'] is defined %}
{{ hostvars[host]['ansible_default_ipv4']['address'] }}    slurm-master slurm-controller
{% elif hostvars[host]['ansible_host'] is defined %}
{{ hostvars[host]['ansible_host'] }}    slurm-master slurm-controller
{% endif %}
{% endfor %}
{% endif %}