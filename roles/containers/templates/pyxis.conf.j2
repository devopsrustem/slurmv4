---
# roles/containers/templates/pyxis.conf.j2
#
# Pyxis configuration file  
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
#

# =============================================================================
# ОСНОВНЫЕ НАСТРОЙКИ PYXIS
# =============================================================================

# Runtime для контейнеров
runtime_path=/usr/bin/enroot

# Временные файлы
tmp_dir={{ enroot_data_dir }}

{% if inventory_hostname in groups['gpu_nodes'] | default([]) and gpu_container_support %}
# =============================================================================
# GPU НАСТРОЙКИ
# =============================================================================

# NVIDIA GPU поддержка
gpu_support=enabled

# NVIDIA переменные окружения
nvidia_visible_devices={{ nvidia_visible_devices }}
nvidia_driver_capabilities={{ nvidia_driver_capabilities }}

{% endif %}

# =============================================================================
# БЕЗОПАСНОСТЬ
# =============================================================================

# Ограничения пользователей
allow_users=*
deny_users=

# Ограничения на образы
allow_images=*
deny_images=

# =============================================================================
# FOOTER  
# =============================================================================
#
# Pyxis configuration for {{ inventory_hostname }}
# Generated: {{ ansible_date_time.iso8601 }}
#
