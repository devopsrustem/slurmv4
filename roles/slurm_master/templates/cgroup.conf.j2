# roles/slurm_master/templates/cgroup.conf.j2
#TEST
# Slurm cgroup configuration file
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
# Cluster: {{ slurm_cluster_name }}
#

# =============================================================================
# CGROUP CONFIGURATION (для системного пакета Ubuntu)
# =============================================================================

# Cgroup version и мounting
CgroupMountpoint=/sys/fs/cgroup

# Constrain cores
ConstrainCores=yes

# Constrain RAM
ConstrainRAMSpace=yes

# Constrain swap
ConstrainSwapSpace=yes

# Constrain devices
ConstrainDevices=yes

# =============================================================================
# MEMORY CONFIGURATION
# =============================================================================

# Memory limits
AllowedRAMSpace=95.0
AllowedSwapSpace=0.0

# Memory enforcement
MemorySwappiness=10

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Ignore system processes
IgnoreSystemd=yes

# =============================================================================
# FOOTER
# =============================================================================
#
# Cgroup configuration for {{ slurm_cluster_name }}
# Generated: {{ ansible_date_time.iso8601 }}
#