2025-07-29 13:29:05,080 p=185671 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ********************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:05,090 p=185671 u=master n=ansible | TASK [Информация о развертывании] *************************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:05,090 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:05 +0000 (0:00:00.012)       0:00:00.012 ********** 
2025-07-29 13:29:05,143 p=185671 u=master n=ansible | ok: [localhost] => 
  msg: "\U0001F680 Установка Slurm HPC кластера\n\U0001F4CD Master:  sm01\n\U0001F4CD Login:   sm02\n\U0001F4CD Compute: cn01, cn02"
2025-07-29 13:29:05,151 p=185671 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *************************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:05,164 p=185671 u=master n=ansible | TASK [Gathering Facts] ************************************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:05,164 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:05 +0000 (0:00:00.073)       0:00:00.086 ********** 
2025-07-29 13:29:07,393 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:07,400 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:07,545 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:07,596 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:07,637 p=185671 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:29:07,637 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:07 +0000 (0:00:02.473)       0:00:02.559 ********** 
2025-07-29 13:29:07,672 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 13:29:07,687 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 13:29:07,688 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 13:29:07,702 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 13:29:07,709 p=185671 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:07,709 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:07 +0000 (0:00:00.071)       0:00:02.630 ********** 
2025-07-29 13:29:09,621 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:29:09,646 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:29:09,913 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:17,300 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:29:17,307 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:29:17,307 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:17 +0000 (0:00:09.598)       0:00:12.229 ********** 
2025-07-29 13:29:18,321 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:18,401 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:18,449 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:29,384 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:29,393 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:29,394 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:29 +0000 (0:00:12.086)       0:00:24.315 ********** 
2025-07-29 13:29:29,917 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:29,925 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:29,944 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:29,955 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:29,963 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:29:29,963 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:29 +0000 (0:00:00.569)       0:00:24.884 ********** 
2025-07-29 13:29:30,466 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:30,468 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:30,477 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:30,479 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:30,486 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:30,486 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:30 +0000 (0:00:00.523)       0:00:25.408 ********** 
2025-07-29 13:29:31,490 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:31,578 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:31,586 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:31,590 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:31,597 p=185671 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:29:31,597 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:31 +0000 (0:00:01.110)       0:00:26.519 ********** 
2025-07-29 13:29:33,420 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:29:33,490 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:33,507 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:29:33,570 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:29:33,578 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:29:33,578 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:33 +0000 (0:00:01.980)       0:00:28.500 ********** 
2025-07-29 13:29:33,624 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:33,625 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:33,635 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:33,962 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:33,969 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:29:33,969 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:33 +0000 (0:00:00.391)       0:00:28.891 ********** 
2025-07-29 13:29:34,386 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,389 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,393 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,395 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,644 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,647 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,731 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,735 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,903 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,906 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,991 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:34,995 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:29:35,159 p=185671 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:29:35,166 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:29:35,255 p=185671 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:29:35,264 p=185671 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:29:35,273 p=185671 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:29:35,273 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:35 +0000 (0:00:01.303)       0:00:30.195 ********** 
2025-07-29 13:29:35,306 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:29:35,670 p=185671 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 13:29:35,671 p=185671 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 13:29:35,672 p=185671 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 13:29:35,679 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:29:35,680 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:35 +0000 (0:00:00.406)       0:00:30.601 ********** 
2025-07-29 13:29:35,712 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:29:36,623 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:36,800 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:36,801 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:36,808 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:29:36,808 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:36 +0000 (0:00:01.128)       0:00:31.730 ********** 
2025-07-29 13:29:36,853 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:36,855 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:36,865 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:37,079 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:37,087 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:29:37,088 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:37 +0000 (0:00:00.279)       0:00:32.009 ********** 
2025-07-29 13:29:39,085 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:29:39,111 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:29:39,129 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:39,172 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:29:39,181 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:39,182 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:39 +0000 (0:00:02.094)       0:00:34.103 ********** 
2025-07-29 13:29:39,457 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:39,473 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:39,495 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:39,515 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:39,523 p=185671 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:29:39,523 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:39 +0000 (0:00:00.341)       0:00:34.444 ********** 
2025-07-29 13:29:39,555 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 13:29:39,570 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 13:29:39,572 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 13:29:39,587 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 13:29:39,594 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:39,594 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:39 +0000 (0:00:00.071)       0:00:34.515 ********** 
2025-07-29 13:29:40,562 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:40,684 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:40,696 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:40,748 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:40,758 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:40,758 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:40 +0000 (0:00:01.164)       0:00:35.680 ********** 
2025-07-29 13:29:41,038 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:41,058 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:41,066 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:41,091 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:41,098 p=185671 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:41,098 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:41 +0000 (0:00:00.339)       0:00:36.019 ********** 
2025-07-29 13:29:41,130 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:29:41,145 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:29:41,147 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:29:41,162 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:29:41,168 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:29:41,169 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:41 +0000 (0:00:00.070)       0:00:36.090 ********** 
2025-07-29 13:29:41,212 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:41,214 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:41,224 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:42,177 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:42,188 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:29:42,188 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:42 +0000 (0:00:01.019)       0:00:37.109 ********** 
2025-07-29 13:29:42,228 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:29:42,229 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:29:42,238 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:29:42,240 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:42,241 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:29:42,242 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:42,252 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:29:42,255 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:29:42,255 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:42,469 p=185671 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 13:29:42,729 p=185671 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 13:29:42,738 p=185671 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:29:42,738 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:42 +0000 (0:00:00.550)       0:00:37.660 ********** 
2025-07-29 13:29:42,776 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:29:42,777 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:29:42,787 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:42,788 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:29:42,789 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:29:42,791 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:42,799 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:29:42,802 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:29:42,804 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:43,141 p=185671 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 13:29:43,392 p=185671 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 13:29:43,401 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:29:43,401 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:43 +0000 (0:00:00.662)       0:00:38.322 ********** 
2025-07-29 13:29:43,493 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:29:43,497 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:29:43,500 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:29:43,502 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:29:43,504 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:29:43,505 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:29:43,507 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:29:43,510 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:29:43,511 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:29:43,512 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:43,516 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:29:43,517 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:29:43,519 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:29:43,520 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:43,521 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:29:43,524 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:29:43,527 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:29:43,529 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:29:43,532 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:29:43,535 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:29:43,536 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:43,733 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 13:29:43,979 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 13:29:44,226 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 13:29:44,475 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 13:29:44,725 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 13:29:44,969 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 13:29:44,982 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:29:44,983 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:44 +0000 (0:00:01.581)       0:00:39.904 ********** 
2025-07-29 13:29:45,029 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:45,030 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:45,042 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:45,476 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:45,484 p=185671 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:29:45,484 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:45 +0000 (0:00:00.501)       0:00:40.406 ********** 
2025-07-29 13:29:45,531 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:45,532 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:45,544 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:45,763 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:45,770 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:29:45,771 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:45 +0000 (0:00:00.286)       0:00:40.692 ********** 
2025-07-29 13:29:45,806 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:45,822 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:45,834 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:46,044 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:46,051 p=185671 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:29:46,052 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:46 +0000 (0:00:00.280)       0:00:40.973 ********** 
2025-07-29 13:29:46,086 p=185671 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 13:29:46,101 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:46,101 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:46,114 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:46,121 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:46,122 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:46 +0000 (0:00:00.070)       0:00:41.043 ********** 
2025-07-29 13:29:46,154 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:29:47,084 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:47,163 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:47,165 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:47,172 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:29:47,173 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:47 +0000 (0:00:01.051)       0:00:42.094 ********** 
2025-07-29 13:29:47,197 p=185671 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 13:29:47,211 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:29:47,459 p=185671 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 13:29:47,515 p=185671 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 13:29:47,525 p=185671 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 13:29:47,534 p=185671 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:29:47,534 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:47 +0000 (0:00:00.361)       0:00:42.456 ********** 
2025-07-29 13:29:47,559 p=185671 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 13:29:47,560 p=185671 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 13:29:47,569 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:29:47,961 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:29:47,963 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:29:47,964 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:29:48,211 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:29:48,214 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:29:48,220 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:29:48,228 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:48,228 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:48 +0000 (0:00:00.693)       0:00:43.150 ********** 
2025-07-29 13:29:48,275 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:48,275 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:48,288 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:49,267 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:49,275 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:29:49,275 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:49 +0000 (0:00:01.046)       0:00:44.197 ********** 
2025-07-29 13:29:49,311 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:29:49,327 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:29:49,339 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:29:50,291 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:50,299 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:29:50,299 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:50 +0000 (0:00:01.023)       0:00:45.220 ********** 
2025-07-29 13:29:50,592 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,594 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,603 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,621 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,849 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,859 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,869 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:50,874 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,104 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,122 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,133 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,134 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,360 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,386 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,388 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,402 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,646 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:29:51,656 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:29:51,662 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:29:51,699 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:29:51,909 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,922 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,930 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,971 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:29:51,980 p=185671 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:29:51,980 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:51 +0000 (0:00:01.681)       0:00:46.902 ********** 
2025-07-29 13:29:52,013 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 13:29:52,033 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 13:29:52,034 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 13:29:52,050 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 13:29:52,133 p=185671 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:52,133 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:52 +0000 (0:00:00.152)       0:00:47.054 ********** 
2025-07-29 13:29:53,674 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:53,681 p=185671 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:53,681 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:53 +0000 (0:00:01.547)       0:00:48.602 ********** 
2025-07-29 13:29:53,957 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:29:53,995 p=185671 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:29:54,046 p=185671 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:29:54,047 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:54 +0000 (0:00:00.365)       0:00:48.968 ********** 
2025-07-29 13:29:54,079 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 13:29:54,095 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 13:29:54,098 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 13:29:54,111 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 13:29:54,119 p=185671 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:54,119 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:54 +0000 (0:00:00.072)       0:00:49.040 ********** 
2025-07-29 13:29:54,923 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:56,011 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:56,090 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:56,367 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:56,377 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:29:56,377 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:56 +0000 (0:00:02.258)       0:00:51.299 ********** 
2025-07-29 13:29:57,387 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:57,488 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:57,490 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:57,544 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:57,552 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:57,552 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:57 +0000 (0:00:01.175)       0:00:52.474 ********** 
2025-07-29 13:29:57,876 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:57,889 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:57,896 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:57,919 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:57,926 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:29:57,927 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:57 +0000 (0:00:00.374)       0:00:52.848 ********** 
2025-07-29 13:29:58,268 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:58,282 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:58,295 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:58,322 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:58,332 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:29:58,332 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:58 +0000 (0:00:00.405)       0:00:53.254 ********** 
2025-07-29 13:29:59,322 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:29:59,412 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:29:59,432 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:29:59,443 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:29:59,450 p=185671 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:29:59,450 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:29:59 +0000 (0:00:01.117)       0:00:54.371 ********** 
2025-07-29 13:30:01,034 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:30:01,077 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:30:01,090 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:30:01,107 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:01,115 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:30:01,115 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:01 +0000 (0:00:01.664)       0:00:56.036 ********** 
2025-07-29 13:30:01,167 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:01,168 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:01,181 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:01,377 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:01,386 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:30:01,386 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:01 +0000 (0:00:00.271)       0:00:56.308 ********** 
2025-07-29 13:30:01,681 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,683 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,711 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,723 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,936 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,948 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,972 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:01,982 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:02,195 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:02,211 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:02,238 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:02,242 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:30:02,451 p=185671 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:30:02,476 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:30:02,496 p=185671 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:30:02,874 p=185671 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:30:02,883 p=185671 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:30:02,883 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:02 +0000 (0:00:01.496)       0:00:57.805 ********** 
2025-07-29 13:30:02,918 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:30:03,175 p=185671 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 13:30:03,202 p=185671 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 13:30:03,223 p=185671 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 13:30:03,231 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:30:03,231 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:03 +0000 (0:00:00.347)       0:00:58.152 ********** 
2025-07-29 13:30:03,266 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:30:04,005 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:30:04,005 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:30:04,006 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:30:04,013 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:30:04,014 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:04 +0000 (0:00:00.782)       0:00:58.935 ********** 
2025-07-29 13:30:04,061 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:04,064 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:04,075 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:04,306 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:04,313 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:30:04,314 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:04 +0000 (0:00:00.300)       0:00:59.235 ********** 
2025-07-29 13:30:06,252 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:30:06,285 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:30:06,331 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:30:06,342 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:06,350 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:30:06,350 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:06 +0000 (0:00:02.036)       0:01:01.271 ********** 
2025-07-29 13:30:06,627 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:06,630 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:30:06,648 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:30:06,663 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:30:06,671 p=185671 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:30:06,671 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:06 +0000 (0:00:00.320)       0:01:01.592 ********** 
2025-07-29 13:30:06,704 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 13:30:06,719 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 13:30:06,721 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 13:30:06,737 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 13:30:06,747 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:30:06,747 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:06 +0000 (0:00:00.075)       0:01:01.668 ********** 
2025-07-29 13:30:07,722 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:30:07,815 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:30:07,879 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:30:07,894 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:07,901 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:30:07,902 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:07 +0000 (0:00:01.154)       0:01:02.823 ********** 
2025-07-29 13:30:08,182 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:08,183 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:30:08,203 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:30:08,212 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:30:08,219 p=185671 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:30:08,219 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:08 +0000 (0:00:00.317)       0:01:03.141 ********** 
2025-07-29 13:30:08,251 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:30:08,267 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:30:08,271 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:30:08,284 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:30:08,294 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:30:08,294 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:08 +0000 (0:00:00.075)       0:01:03.216 ********** 
2025-07-29 13:30:08,342 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:08,345 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:08,356 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:09,493 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:09,501 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:30:09,502 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:09 +0000 (0:00:01.207)       0:01:04.423 ********** 
2025-07-29 13:30:09,544 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:30:09,545 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:30:09,554 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:09,556 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:30:09,557 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:30:09,559 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:09,568 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:30:09,571 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:30:09,571 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:09,782 p=185671 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 13:30:10,034 p=185671 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 13:30:10,043 p=185671 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:30:10,043 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:10 +0000 (0:00:00.541)       0:01:04.964 ********** 
2025-07-29 13:30:10,081 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:30:10,082 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:30:10,090 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:10,093 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:30:10,093 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:30:10,094 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:10,104 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:30:10,106 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:30:10,107 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:10,311 p=185671 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 13:30:10,556 p=185671 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 13:30:10,569 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:30:10,570 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:10 +0000 (0:00:00.526)       0:01:05.491 ********** 
2025-07-29 13:30:10,717 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:30:10,718 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:30:10,719 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:30:10,722 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:30:10,724 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:30:10,727 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:30:10,728 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:10,744 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:30:10,747 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:30:10,750 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:30:10,752 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:30:10,753 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:30:10,755 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:30:10,756 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:30:10,758 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:30:10,759 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:30:10,759 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:10,761 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:30:10,764 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:30:10,767 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:30:10,768 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:10,931 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 13:30:11,178 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 13:30:11,424 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 13:30:11,668 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 13:30:11,913 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 13:30:12,157 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 13:30:12,168 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:30:12,168 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:12 +0000 (0:00:01.598)       0:01:07.090 ********** 
2025-07-29 13:30:12,220 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:12,221 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:12,233 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:12,654 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:12,662 p=185671 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:30:12,662 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:12 +0000 (0:00:00.494)       0:01:07.584 ********** 
2025-07-29 13:30:12,717 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:12,718 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:12,730 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:12,936 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:12,944 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:30:12,944 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:12 +0000 (0:00:00.281)       0:01:07.866 ********** 
2025-07-29 13:30:12,996 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:12,997 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:13,009 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:13,220 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:13,228 p=185671 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:30:13,228 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:13 +0000 (0:00:00.283)       0:01:08.150 ********** 
2025-07-29 13:30:13,263 p=185671 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 13:30:13,277 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:13,277 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:13,290 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:13,297 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:30:13,297 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:13 +0000 (0:00:00.068)       0:01:08.218 ********** 
2025-07-29 13:30:13,328 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:30:14,281 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:30:14,337 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:30:14,380 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:30:14,388 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:30:14,388 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:14 +0000 (0:00:01.091)       0:01:09.310 ********** 
2025-07-29 13:30:14,414 p=185671 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 13:30:14,423 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:30:14,682 p=185671 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 13:30:14,694 p=185671 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 13:30:14,709 p=185671 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 13:30:14,717 p=185671 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:30:14,717 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:14 +0000 (0:00:00.329)       0:01:09.639 ********** 
2025-07-29 13:30:14,741 p=185671 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 13:30:14,743 p=185671 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 13:30:14,751 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:30:15,006 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:30:15,022 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:30:15,039 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:30:15,254 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:30:15,280 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:30:15,291 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:30:15,300 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:30:15,300 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:15 +0000 (0:00:00.582)       0:01:10.222 ********** 
2025-07-29 13:30:15,352 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:15,353 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:15,366 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:16,363 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:16,371 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:30:16,371 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:16 +0000 (0:00:01.071)       0:01:11.293 ********** 
2025-07-29 13:30:16,419 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:16,422 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:16,432 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:17,349 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:17,356 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:30:17,356 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:17 +0000 (0:00:00.985)       0:01:12.278 ********** 
2025-07-29 13:30:17,638 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:17,680 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:17,694 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:17,750 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:17,899 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:17,943 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:17,951 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,002 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,159 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,206 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,207 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,258 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,423 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,474 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,477 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,513 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,695 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:30:18,731 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:30:18,744 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:30:18,771 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:30:18,972 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:18,990 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:19,020 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:19,023 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:30:19,035 p=185671 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:30:19,036 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:19 +0000 (0:00:01.679)       0:01:13.957 ********** 
2025-07-29 13:30:19,073 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 13:30:19,089 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 13:30:19,091 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 13:30:19,106 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 13:30:19,131 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Начало сборки Slurm] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:30:19,131 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:19 +0000 (0:00:00.095)       0:01:14.053 ********** 
2025-07-29 13:30:19,163 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm01"
2025-07-29 13:30:19,179 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm02"
2025-07-29 13:30:19,181 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn01"
2025-07-29 13:30:19,197 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn02"
2025-07-29 13:30:19,207 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Очистка старой сборки] **************************************************************************************************************************************************************************************************************
2025-07-29 13:30:19,207 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:19 +0000 (0:00:00.075)       0:01:14.129 ********** 
2025-07-29 13:30:19,256 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:19,258 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:19,269 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:19,970 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:19,978 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки] ***********************************************************************************************************************************************************************************
2025-07-29 13:30:19,978 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:19 +0000 (0:00:00.771)       0:01:14.900 ********** 
2025-07-29 13:30:20,029 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:20,030 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:20,042 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:32,678 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:32,686 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание временной директории для сборки] *******************************************************************************************************************************************************************************************
2025-07-29 13:30:32,686 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:32 +0000 (0:00:12.707)       0:01:27.607 ********** 
2025-07-29 13:30:32,733 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:32,734 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:32,744 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:32,962 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:32,973 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка существования исходников] **************************************************************************************************************************************************************************************************
2025-07-29 13:30:32,973 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:32 +0000 (0:00:00.287)       0:01:27.895 ********** 
2025-07-29 13:30:33,022 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:33,024 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:33,035 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:33,243 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:30:33,254 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Скачивание исходников Slurm 25.05.1] ************************************************************************************************************************************************************************************************
2025-07-29 13:30:33,254 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:33 +0000 (0:00:00.280)       0:01:28.176 ********** 
2025-07-29 13:30:33,301 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:33,302 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:33,313 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:38,996 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:39,005 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Извлечение исходников Slurm] ********************************************************************************************************************************************************************************************************
2025-07-29 13:30:39,005 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:39 +0000 (0:00:05.751)       0:01:33.927 ********** 
2025-07-29 13:30:39,056 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:39,057 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:39,069 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:30:44,653 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:30:44,664 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой] *****************************************************************************************************************************************************************************************
2025-07-29 13:30:44,664 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:30:44 +0000 (0:00:05.658)       0:01:39.586 ********** 
2025-07-29 13:30:44,712 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:30:44,713 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:30:44,726 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:31:11,926 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:31:11,934 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...)] *********************************************************************************************************************************************************************************************
2025-07-29 13:31:11,934 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:31:11 +0000 (0:00:27.269)       0:02:06.856 ********** 
2025-07-29 13:31:11,981 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:31:11,982 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:31:11,991 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:36:12,682 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:36:12,699 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на master] **********************************************************************************************************************************************************************************************************
2025-07-29 13:36:12,699 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:12 +0000 (0:05:00.764)       0:07:07.621 ********** 
2025-07-29 13:36:12,749 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:36:12,750 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:36:12,761 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:36:13,005 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:13,013 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка development файлов (headers для Pyxis)] ***********************************************************************************************************************************************************************************
2025-07-29 13:36:13,014 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:13 +0000 (0:00:00.314)       0:07:07.935 ********** 
2025-07-29 13:36:13,050 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:36:13,067 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:36:13,080 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:36:13,281 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:13,288 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание директории Slurm на всех узлах] ********************************************************************************************************************************************************************************************
2025-07-29 13:36:13,288 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:13 +0000 (0:00:00.274)       0:07:08.210 ********** 
2025-07-29 13:36:13,571 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:14,500 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:36:14,502 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:36:14,504 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:36:14,511 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание полного архива Slurm в NFS] ************************************************************************************************************************************************************************************************
2025-07-29 13:36:14,511 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:14 +0000 (0:00:01.222)       0:07:09.433 ********** 
2025-07-29 13:36:14,568 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:36:14,569 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:36:14,581 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:36:15,999 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:36:16,006 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат создания архива] **********************************************************************************************************************************************************************************************************
2025-07-29 13:36:16,007 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:16 +0000 (0:00:01.495)       0:07:10.928 ********** 
2025-07-29 13:36:16,041 p=185671 u=master n=ansible | ok: [sm01] => 
  archive_creation.stdout_lines:
  - === СОЗДАНИЕ АРХИВА SLURM + HEADERS ===
  - Копируем binaries...
  - '✅ Headers включены в архив: 6 файлов'
  - === АРХИВ ГОТОВ ===
  - 'Binaries: 20 файлов'
  - 'Daemons: 6 файлов'
  - 'Headers: 6 файлов'
  - 'Libs: 6 файлов'
2025-07-29 13:36:16,056 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:36:16,056 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:36:16,068 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:36:16,075 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Ожидание готовности архива] *********************************************************************************************************************************************************************************************************
2025-07-29 13:36:16,075 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:16 +0000 (0:00:00.068)       0:07:10.997 ********** 
2025-07-29 13:36:16,093 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:36:16,535 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:36:16,536 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:36:16,536 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:36:16,544 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива] **********************************************************************************************************************************************************************************************
2025-07-29 13:36:16,544 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:16 +0000 (0:00:00.468)       0:07:11.465 ********** 
2025-07-29 13:36:16,578 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:36:35,465 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:36:35,530 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:36:36,010 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:36:36,049 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат установки на узлах] *******************************************************************************************************************************************************************************************************
2025-07-29 13:36:36,049 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:36 +0000 (0:00:19.505)       0:07:30.971 ********** 
2025-07-29 13:36:36,083 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:36:36,099 p=185671 u=master n=ansible | ok: [sm02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 13:36:36,102 p=185671 u=master n=ansible | ok: [cn01] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 13:36:36,117 p=185671 u=master n=ansible | ok: [cn02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 13:36:36,124 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm] ********************************************************************************************************************************************************************
2025-07-29 13:36:36,124 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:36 +0000 (0:00:00.075)       0:07:31.046 ********** 
2025-07-29 13:36:36,413 p=185671 u=master n=ansible | ok: [sm01] => (item=sinfo)
2025-07-29 13:36:36,427 p=185671 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-29 13:36:36,432 p=185671 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-29 13:36:36,482 p=185671 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-29 13:36:36,670 p=185671 u=master n=ansible | ok: [sm01] => (item=squeue)
2025-07-29 13:36:36,693 p=185671 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-29 13:36:36,717 p=185671 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-29 13:36:36,776 p=185671 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-29 13:36:36,934 p=185671 u=master n=ansible | ok: [sm01] => (item=scancel)
2025-07-29 13:36:36,971 p=185671 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-29 13:36:36,977 p=185671 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-29 13:36:37,041 p=185671 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-29 13:36:37,193 p=185671 u=master n=ansible | ok: [sm01] => (item=sbatch)
2025-07-29 13:36:37,236 p=185671 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-29 13:36:37,271 p=185671 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-29 13:36:37,297 p=185671 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-29 13:36:37,480 p=185671 u=master n=ansible | ok: [sm01] => (item=salloc)
2025-07-29 13:36:37,538 p=185671 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-29 13:36:37,575 p=185671 u=master n=ansible | ok: [cn01] => (item=salloc)
2025-07-29 13:36:37,607 p=185671 u=master n=ansible | ok: [cn02] => (item=salloc)
2025-07-29 13:36:37,736 p=185671 u=master n=ansible | ok: [sm01] => (item=srun)
2025-07-29 13:36:37,820 p=185671 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-29 13:36:37,834 p=185671 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-29 13:36:37,868 p=185671 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-29 13:36:37,995 p=185671 u=master n=ansible | ok: [sm01] => (item=sacct)
2025-07-29 13:36:38,085 p=185671 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-29 13:36:38,124 p=185671 u=master n=ansible | ok: [cn01] => (item=sacct)
2025-07-29 13:36:38,126 p=185671 u=master n=ansible | ok: [cn02] => (item=sacct)
2025-07-29 13:36:38,263 p=185671 u=master n=ansible | ok: [sm01] => (item=scontrol)
2025-07-29 13:36:38,362 p=185671 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-29 13:36:38,373 p=185671 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-29 13:36:38,376 p=185671 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-29 13:36:38,517 p=185671 u=master n=ansible | ok: [sm01] => (item=sprio)
2025-07-29 13:36:38,619 p=185671 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-29 13:36:38,631 p=185671 u=master n=ansible | ok: [cn02] => (item=sprio)
2025-07-29 13:36:38,656 p=185671 u=master n=ansible | ok: [cn01] => (item=sprio)
2025-07-29 13:36:38,775 p=185671 u=master n=ansible | ok: [sm01] => (item=smap)
2025-07-29 13:36:38,881 p=185671 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-29 13:36:38,887 p=185671 u=master n=ansible | ok: [cn02] => (item=smap)
2025-07-29 13:36:38,916 p=185671 u=master n=ansible | ok: [cn01] => (item=smap)
2025-07-29 13:36:39,028 p=185671 u=master n=ansible | ok: [sm01] => (item=sdiag)
2025-07-29 13:36:39,140 p=185671 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-29 13:36:39,144 p=185671 u=master n=ansible | ok: [cn02] => (item=sdiag)
2025-07-29 13:36:39,194 p=185671 u=master n=ansible | ok: [cn01] => (item=sdiag)
2025-07-29 13:36:39,283 p=185671 u=master n=ansible | ok: [sm01] => (item=sstat)
2025-07-29 13:36:39,401 p=185671 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-29 13:36:39,403 p=185671 u=master n=ansible | ok: [cn02] => (item=sstat)
2025-07-29 13:36:39,466 p=185671 u=master n=ansible | ok: [cn01] => (item=sstat)
2025-07-29 13:36:39,536 p=185671 u=master n=ansible | ok: [sm01] => (item=sreport)
2025-07-29 13:36:39,661 p=185671 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-29 13:36:39,662 p=185671 u=master n=ansible | ok: [cn02] => (item=sreport)
2025-07-29 13:36:39,804 p=185671 u=master n=ansible | ok: [sm01] => (item=sacctmgr)
2025-07-29 13:36:39,819 p=185671 u=master n=ansible | ok: [cn01] => (item=sreport)
2025-07-29 13:36:39,924 p=185671 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-29 13:36:39,940 p=185671 u=master n=ansible | ok: [cn02] => (item=sacctmgr)
2025-07-29 13:36:40,073 p=185671 u=master n=ansible | ok: [sm01] => (item=sattach)
2025-07-29 13:36:40,103 p=185671 u=master n=ansible | ok: [cn01] => (item=sacctmgr)
2025-07-29 13:36:40,218 p=185671 u=master n=ansible | ok: [cn02] => (item=sattach)
2025-07-29 13:36:40,261 p=185671 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-29 13:36:40,327 p=185671 u=master n=ansible | ok: [sm01] => (item=sbcast)
2025-07-29 13:36:40,355 p=185671 u=master n=ansible | ok: [cn01] => (item=sattach)
2025-07-29 13:36:40,478 p=185671 u=master n=ansible | ok: [cn02] => (item=sbcast)
2025-07-29 13:36:40,515 p=185671 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-29 13:36:40,598 p=185671 u=master n=ansible | ok: [sm01] => (item=sshare)
2025-07-29 13:36:40,611 p=185671 u=master n=ansible | ok: [cn01] => (item=sbcast)
2025-07-29 13:36:40,730 p=185671 u=master n=ansible | ok: [cn02] => (item=sshare)
2025-07-29 13:36:40,766 p=185671 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-29 13:36:40,864 p=185671 u=master n=ansible | ok: [cn01] => (item=sshare)
2025-07-29 13:36:40,868 p=185671 u=master n=ansible | ok: [sm01] => (item=sview)
2025-07-29 13:36:40,874 p=185671 u=master n=ansible | [WARNING]: Cannot set fs attributes on a non-existent symlink target. follow should be set to False to avoid this.

2025-07-29 13:36:40,982 p=185671 u=master n=ansible | ok: [cn02] => (item=sview)
2025-07-29 13:36:41,039 p=185671 u=master n=ansible | ok: [sm02] => (item=sview)
2025-07-29 13:36:41,115 p=185671 u=master n=ansible | ok: [cn01] => (item=sview)
2025-07-29 13:36:41,128 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для системных демонов Slurm] **************************************************************************************************************************************************************************
2025-07-29 13:36:41,128 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:41 +0000 (0:00:05.003)       0:07:36.050 ********** 
2025-07-29 13:36:41,417 p=185671 u=master n=ansible | ok: [sm02] => (item=slurmctld)
2025-07-29 13:36:41,418 p=185671 u=master n=ansible | ok: [sm01] => (item=slurmctld)
2025-07-29 13:36:41,435 p=185671 u=master n=ansible | ok: [cn01] => (item=slurmctld)
2025-07-29 13:36:41,448 p=185671 u=master n=ansible | ok: [cn02] => (item=slurmctld)
2025-07-29 13:36:41,666 p=185671 u=master n=ansible | ok: [sm02] => (item=slurmd)
2025-07-29 13:36:41,673 p=185671 u=master n=ansible | ok: [sm01] => (item=slurmd)
2025-07-29 13:36:41,696 p=185671 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-29 13:36:41,698 p=185671 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-29 13:36:41,922 p=185671 u=master n=ansible | ok: [sm02] => (item=slurmdbd)
2025-07-29 13:36:41,941 p=185671 u=master n=ansible | ok: [sm01] => (item=slurmdbd)
2025-07-29 13:36:41,989 p=185671 u=master n=ansible | ok: [cn02] => (item=slurmdbd)
2025-07-29 13:36:41,991 p=185671 u=master n=ansible | ok: [cn01] => (item=slurmdbd)
2025-07-29 13:36:42,183 p=185671 u=master n=ansible | ok: [sm02] => (item=slurmrestd)
2025-07-29 13:36:42,214 p=185671 u=master n=ansible | ok: [sm01] => (item=slurmrestd)
2025-07-29 13:36:42,239 p=185671 u=master n=ansible | ok: [cn02] => (item=slurmrestd)
2025-07-29 13:36:42,243 p=185671 u=master n=ansible | ok: [cn01] => (item=slurmrestd)
2025-07-29 13:36:42,434 p=185671 u=master n=ansible | ok: [sm02] => (item=slurmstepd)
2025-07-29 13:36:42,468 p=185671 u=master n=ansible | ok: [sm01] => (item=slurmstepd)
2025-07-29 13:36:42,491 p=185671 u=master n=ansible | ok: [cn02] => (item=slurmstepd)
2025-07-29 13:36:42,496 p=185671 u=master n=ansible | ok: [cn01] => (item=slurmstepd)
2025-07-29 13:36:42,505 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Обновление библиотечного кеша] ******************************************************************************************************************************************************************************************************
2025-07-29 13:36:42,506 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:42 +0000 (0:00:01.377)       0:07:37.427 ********** 
2025-07-29 13:36:42,831 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:36:42,839 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:36:42,880 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:36:42,936 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:36:42,944 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка версии Slurm] **************************************************************************************************************************************************************************************************************
2025-07-29 13:36:42,944 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:42 +0000 (0:00:00.438)       0:07:37.866 ********** 
2025-07-29 13:36:43,235 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:36:43,243 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:43,257 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:36:43,270 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:36:43,277 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка поддержки JWT] *************************************************************************************************************************************************************************************************************
2025-07-29 13:36:43,277 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:43 +0000 (0:00:00.332)       0:07:38.199 ********** 
2025-07-29 13:36:43,565 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:36:43,571 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:43,578 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:36:43,607 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:36:43,614 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка headers (КРИТИЧНО ДЛЯ PYXIS!)] *********************************************************************************************************************************************************************************************
2025-07-29 13:36:43,614 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:43 +0000 (0:00:00.336)       0:07:38.536 ********** 
2025-07-29 13:36:43,904 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:43,905 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:36:43,928 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:36:43,956 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:36:43,963 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результаты проверки] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:36:43,963 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:43 +0000 (0:00:00.349)       0:07:38.885 ********** 
2025-07-29 13:36:43,998 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm успешно установлен на sm01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 13:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 13:36:44,013 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm успешно установлен на sm02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 16:36 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 13:36:44,016 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "✅ Slurm успешно установлен на cn01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 16:36 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 13:36:44,031 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "✅ Slurm успешно установлен на cn02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 16:36 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 13:36:44,037 p=185671 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Сборка завершена успешно] ***********************************************************************************************************************************************************************************************************
2025-07-29 13:36:44,038 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:44 +0000 (0:00:00.074)       0:07:38.959 ********** 
2025-07-29 13:36:44,070 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm01"
2025-07-29 13:36:44,085 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm02"
2025-07-29 13:36:44,088 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn01"
2025-07-29 13:36:44,101 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn02"
2025-07-29 13:36:44,160 p=185671 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:36:44,160 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:44 +0000 (0:00:00.122)       0:07:39.081 ********** 
2025-07-29 13:36:45,874 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:36:45,881 p=185671 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:36:45,881 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:45 +0000 (0:00:01.721)       0:07:40.803 ********** 
2025-07-29 13:36:46,154 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:36:46,193 p=185671 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] ***************************************************************************************************************************************************************************************************************************************
2025-07-29 13:36:46,209 p=185671 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Начало настройки Slurm Master] ****************************************************************************************************************************************************************************************************
2025-07-29 13:36:46,209 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:46 +0000 (0:00:00.327)       0:07:41.130 ********** 
2025-07-29 13:36:46,262 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F3AF Настройка Slurm Master узла: sm01\n\U0001F4CD Роль: primary\n\U0001F310 IP: 10.20.90.240"
2025-07-29 13:36:46,269 p=185671 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка MariaDB для Slurm] ******************************************************************************************************************************************************************************************************
2025-07-29 13:36:46,269 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:46 +0000 (0:00:00.060)       0:07:41.191 ********** 
2025-07-29 13:36:46,327 p=185671 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/mariadb.yml for sm01
2025-07-29 13:36:46,334 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка работы свежей MariaDB] ********************************************************************************************************************************************************************************************************
2025-07-29 13:36:46,335 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:46 +0000 (0:00:00.065)       0:07:41.256 ********** 
2025-07-29 13:36:46,640 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:46,647 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Показать версию MariaDB] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:36:46,647 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:46 +0000 (0:00:00.312)       0:07:41.569 ********** 
2025-07-29 13:36:46,702 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB версия: 10.11.13-MariaDB-0ubuntu0.24.04.1"
2025-07-29 13:36:46,709 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание пользователя и базы Slurm (исправленная версия)] ******************************************************************************************************************************************************************************
2025-07-29 13:36:46,709 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:46 +0000 (0:00:00.061)       0:07:41.631 ********** 
2025-07-29 13:36:47,141 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:36:47,149 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Результат создания пользователя] *******************************************************************************************************************************************************************************************************
2025-07-29 13:36:47,149 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:47 +0000 (0:00:00.440)       0:07:42.071 ********** 
2025-07-29 13:36:47,204 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Создание пользователя: False"
2025-07-29 13:36:47,213 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Тест подключения пользователя Slurm] ***************************************************************************************************************************************************************************************************
2025-07-29 13:36:47,214 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:47 +0000 (0:00:00.064)       0:07:42.135 ********** 
2025-07-29 13:36:47,524 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:47,532 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка списка баз данных] ************************************************************************************************************************************************************************************************************
2025-07-29 13:36:47,532 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:47 +0000 (0:00:00.318)       0:07:42.454 ********** 
2025-07-29 13:36:47,839 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:47,847 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание конфига оптимизации для Slurm] ************************************************************************************************************************************************************************************************
2025-07-29 13:36:47,847 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:47 +0000 (0:00:00.315)       0:07:42.769 ********** 
2025-07-29 13:36:48,426 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:36:48,434 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек] ********************************************************************************************************************************************************************************************
2025-07-29 13:36:48,434 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:36:48 +0000 (0:00:00.586)       0:07:43.356 ********** 
2025-07-29 13:37:06,952 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:06,961 p=185671 u=master n=ansible | TASK [slurm_master : [MARIADB] Финальный результат] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:37:06,961 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:06 +0000 (0:00:18.527)       0:08:01.883 ********** 
2025-07-29 13:37:07,018 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB настройка завершена:\n\U0001F464 Пользователь: slurm\n\U0001F4CA База: slurm_acct_db\n✅ Подключение: False\n\n\U0001F4CB Доступные базы:\nDatabase\ninformation_schema\nslurm_acct_db\n\n\U0001F389 ГОТОВ ДЛЯ SLURM!"
2025-07-29 13:37:07,026 p=185671 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание конфигурации Slurm] ******************************************************************************************************************************************************************************************************
2025-07-29 13:37:07,026 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:07 +0000 (0:00:00.064)       0:08:01.948 ********** 
2025-07-29 13:37:07,052 p=185671 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/config.yml for sm01
2025-07-29 13:37:07,063 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание основного конфига slurm.conf] **************************************************************************************************************************************************************************************************
2025-07-29 13:37:07,063 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:07 +0000 (0:00:00.036)       0:08:01.984 ********** 
2025-07-29 13:37:07,904 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:07,911 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание конфига slurmdbd.conf] *********************************************************************************************************************************************************************************************************
2025-07-29 13:37:07,911 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:07 +0000 (0:00:00.848)       0:08:02.832 ********** 
2025-07-29 13:37:08,556 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:08,563 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание gres.conf для GPU] *************************************************************************************************************************************************************************************************************
2025-07-29 13:37:08,564 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:08 +0000 (0:00:00.652)       0:08:03.485 ********** 
2025-07-29 13:37:09,238 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:09,247 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание cgroup.conf] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:37:09,247 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:09 +0000 (0:00:00.683)       0:08:04.169 ********** 
2025-07-29 13:37:09,859 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:09,870 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание директории для конфигов на NFS] ************************************************************************************************************************************************************************************************
2025-07-29 13:37:09,870 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:09 +0000 (0:00:00.622)       0:08:04.791 ********** 
2025-07-29 13:37:10,140 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:10,147 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Копирование конфигов на NFS для распространения] ****************************************************************************************************************************************************************************************
2025-07-29 13:37:10,148 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:10 +0000 (0:00:00.277)       0:08:05.069 ********** 
2025-07-29 13:37:10,459 p=185671 u=master n=ansible | changed: [sm01] => (item=slurm.conf)
2025-07-29 13:37:10,746 p=185671 u=master n=ansible | changed: [sm01] => (item=cgroup.conf)
2025-07-29 13:37:11,032 p=185671 u=master n=ansible | changed: [sm01] => (item=gres.conf)
2025-07-29 13:37:11,041 p=185671 u=master n=ansible | TASK [slurm_master : [CONFIG] Конфигурация создана] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:37:11,041 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:11 +0000 (0:00:00.893)       0:08:05.963 ********** 
2025-07-29 13:37:11,062 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Конфигурация Slurm:\n✅ slurm.conf создан\n✅ gres.conf создан (AutoDetect=nvml)\n✅ cgroup.conf создан\n✅ slurmdbd.conf создан\n\U0001F4E4 Файлы скопированы в /sw/config/ для распространения"
2025-07-29 13:37:11,070 p=185671 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка systemd сервисов] *******************************************************************************************************************************************************************************************************
2025-07-29 13:37:11,070 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:11 +0000 (0:00:00.028)       0:08:05.991 ********** 
2025-07-29 13:37:11,095 p=185671 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/services.yml for sm01
2025-07-29 13:37:11,107 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmctld] **************************************************************************************************************************************************************************************************
2025-07-29 13:37:11,107 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:11 +0000 (0:00:00.036)       0:08:06.028 ********** 
2025-07-29 13:37:11,801 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:11,808 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmdbd] ***************************************************************************************************************************************************************************************************
2025-07-29 13:37:11,808 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:11 +0000 (0:00:00.701)       0:08:06.730 ********** 
2025-07-29 13:37:12,411 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:12,419 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Перезагрузка systemd daemon] **********************************************************************************************************************************************************************************************************
2025-07-29 13:37:12,419 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:12 +0000 (0:00:00.610)       0:08:07.340 ********** 
2025-07-29 13:37:13,214 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:13,223 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmdbd (сначала база)] *******************************************************************************************************************************************************************************************************
2025-07-29 13:37:13,223 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:13 +0000 (0:00:00.803)       0:08:08.144 ********** 
2025-07-29 13:37:13,737 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:13,745 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Пауза после запуска slurmdbd] *********************************************************************************************************************************************************************************************************
2025-07-29 13:37:13,745 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:13 +0000 (0:00:00.522)       0:08:08.667 ********** 
2025-07-29 13:37:13,798 p=185671 u=master n=ansible | Pausing for 3 seconds
2025-07-29 13:37:13,799 p=185671 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 13:37:16,805 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:16,812 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmctld (после базы)] ********************************************************************************************************************************************************************************************************
2025-07-29 13:37:16,813 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:16 +0000 (0:00:03.067)       0:08:11.734 ********** 
2025-07-29 13:37:17,465 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:37:17,476 p=185671 u=master n=ansible | TASK [slurm_master : [SERVICES] Сервисы запущены] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:37:17,476 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:17 +0000 (0:00:00.663)       0:08:12.398 ********** 
2025-07-29 13:37:17,497 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F39B️ Slurm сервисы:\n✅ slurmdbd запущен\n✅ slurmctld запущен\n\U0001F527 Проверьте: systemctl status slurmctld slurmdbd"
2025-07-29 13:37:17,504 p=185671 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Завершение настройки] *************************************************************************************************************************************************************************************************************
2025-07-29 13:37:17,504 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:17 +0000 (0:00:00.028)       0:08:12.426 ********** 
2025-07-29 13:37:17,557 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm Master настроен!\n\U0001F527 Кластер: hpc-cluster\n\U0001F39B️ Controller: sm01:6817\n\U0001F4BE Database: включена"
2025-07-29 13:37:17,577 p=185671 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmctld] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:37:17,577 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:17 +0000 (0:00:00.072)       0:08:12.499 ********** 
2025-07-29 13:37:23,326 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:23,334 p=185671 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmdbd] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:37:23,334 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:23 +0000 (0:00:05.757)       0:08:18.256 ********** 
2025-07-29 13:37:24,215 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:37:24,231 p=185671 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] **************************************************************************************************************************************************************************************************************************************
2025-07-29 13:37:24,268 p=185671 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:37:24,269 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:24 +0000 (0:00:00.934)       0:08:19.190 ********** 
2025-07-29 13:37:24,291 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 13:37:24,304 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 13:37:24,311 p=185671 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:37:24,311 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:24 +0000 (0:00:00.042)       0:08:19.233 ********** 
2025-07-29 13:37:52,298 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:37:52,411 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:37:52,419 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:37:52,419 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:52 +0000 (0:00:28.107)       0:08:47.341 ********** 
2025-07-29 13:37:53,488 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:37:53,500 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:37:53,508 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:37:53,508 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:53 +0000 (0:00:01.088)       0:08:48.430 ********** 
2025-07-29 13:37:53,892 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:37:53,893 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:37:53,937 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:37:53,938 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:53 +0000 (0:00:00.429)       0:08:48.859 ********** 
2025-07-29 13:37:54,272 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:37:54,280 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:37:54,290 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:37:54,290 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:54 +0000 (0:00:00.352)       0:08:49.212 ********** 
2025-07-29 13:37:55,286 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:37:55,303 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:37:55,311 p=185671 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:37:55,311 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:55 +0000 (0:00:01.020)       0:08:50.233 ********** 
2025-07-29 13:37:56,952 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:37:56,977 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:37:56,985 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:37:56,985 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:56 +0000 (0:00:01.673)       0:08:51.906 ********** 
2025-07-29 13:37:57,004 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:37:57,015 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:37:57,022 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:37:57,022 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:57 +0000 (0:00:00.037)       0:08:51.944 ********** 
2025-07-29 13:37:57,301 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:37:57,315 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:37:57,559 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:37:57,584 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:37:57,838 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:37:57,857 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:37:58,094 p=185671 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:37:58,111 p=185671 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:37:58,119 p=185671 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:37:58,119 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:58 +0000 (0:00:01.096)       0:08:53.041 ********** 
2025-07-29 13:37:58,391 p=185671 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 13:37:58,406 p=185671 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 13:37:58,414 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:37:58,414 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:58 +0000 (0:00:00.294)       0:08:53.335 ********** 
2025-07-29 13:37:59,280 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:37:59,599 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:37:59,608 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:37:59,608 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:59 +0000 (0:00:01.194)       0:08:54.530 ********** 
2025-07-29 13:37:59,629 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:37:59,641 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:37:59,648 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:37:59,649 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:37:59 +0000 (0:00:00.040)       0:08:54.570 ********** 
2025-07-29 13:38:01,557 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:38:01,617 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:38:01,625 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:01,625 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:01 +0000 (0:00:01.976)       0:08:56.547 ********** 
2025-07-29 13:38:01,910 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:01,942 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:01,953 p=185671 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:01,953 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:01 +0000 (0:00:00.328)       0:08:56.875 ********** 
2025-07-29 13:38:01,980 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 13:38:01,995 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 13:38:02,002 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:02,002 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:02 +0000 (0:00:00.048)       0:08:56.924 ********** 
2025-07-29 13:38:02,987 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:03,043 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:03,051 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,052 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:01.049)       0:08:57.973 ********** 
2025-07-29 13:38:03,322 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:03,341 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:03,349 p=185671 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,349 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.297)       0:08:58.271 ********** 
2025-07-29 13:38:03,372 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:38:03,384 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:38:03,391 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,392 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.042)       0:08:58.313 ********** 
2025-07-29 13:38:03,411 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,421 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,431 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,431 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.039)       0:08:58.353 ********** 
2025-07-29 13:38:03,451 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:38:03,452 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:38:03,454 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,462 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:38:03,465 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:38:03,466 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,477 p=185671 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,477 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.045)       0:08:58.398 ********** 
2025-07-29 13:38:03,497 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:38:03,498 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:38:03,499 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,508 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:38:03,511 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:38:03,512 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,519 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,519 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.042)       0:08:58.441 ********** 
2025-07-29 13:38:03,598 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:38:03,664 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:38:03,665 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:38:03,665 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:38:03,666 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:38:03,667 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:38:03,668 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:38:03,669 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,669 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:38:03,670 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:38:03,671 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:38:03,671 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:38:03,672 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:38:03,674 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,681 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,681 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.162)       0:08:58.603 ********** 
2025-07-29 13:38:03,702 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,714 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,721 p=185671 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,721 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.039)       0:08:58.642 ********** 
2025-07-29 13:38:03,740 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,750 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,757 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,757 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.036)       0:08:58.679 ********** 
2025-07-29 13:38:03,777 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,786 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,793 p=185671 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,793 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.035)       0:08:58.715 ********** 
2025-07-29 13:38:03,813 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:03,823 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:03,833 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:03,833 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:03 +0000 (0:00:00.039)       0:08:58.755 ********** 
2025-07-29 13:38:04,870 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:04,873 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:04,881 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:38:04,881 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:04 +0000 (0:00:01.048)       0:08:59.803 ********** 
2025-07-29 13:38:05,165 p=185671 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 13:38:05,172 p=185671 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 13:38:05,181 p=185671 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:38:05,181 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:05 +0000 (0:00:00.299)       0:09:00.103 ********** 
2025-07-29 13:38:05,463 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:38:05,469 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:38:05,722 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:38:05,724 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:38:05,733 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:05,733 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:05 +0000 (0:00:00.551)       0:09:00.655 ********** 
2025-07-29 13:38:05,753 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:05,763 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:05,770 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:38:05,770 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:05 +0000 (0:00:00.037)       0:09:00.692 ********** 
2025-07-29 13:38:05,790 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:05,800 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:05,808 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:38:05,808 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:05 +0000 (0:00:00.037)       0:09:00.729 ********** 
2025-07-29 13:38:06,119 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,131 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,375 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,388 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,631 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,637 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,921 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:06,922 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:07,171 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:38:07,175 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:38:07,424 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:07,438 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:07,446 p=185671 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:07,446 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:07 +0000 (0:00:01.638)       0:09:02.368 ********** 
2025-07-29 13:38:07,470 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 13:38:07,483 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 13:38:07,499 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Начало настройки Slurm Compute узла] ********************************************************************************************************************************************************************************************
2025-07-29 13:38:07,499 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:07 +0000 (0:00:00.052)       0:09:02.421 ********** 
2025-07-29 13:38:07,559 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn01\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-29 13:38:07,572 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn02\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-29 13:38:07,579 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности Slurm binaries] ********************************************************************************************************************************************************************************************
2025-07-29 13:38:07,579 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:07 +0000 (0:00:00.080)       0:09:02.501 ********** 
2025-07-29 13:38:07,856 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:07,862 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:07,869 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование Slurm binaries из NFS] **********************************************************************************************************************************************************************************************
2025-07-29 13:38:07,869 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:07 +0000 (0:00:00.289)       0:09:02.791 ********** 
2025-07-29 13:38:07,888 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:07,899 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:07,906 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности мастер узла] ***********************************************************************************************************************************************************************************************
2025-07-29 13:38:07,906 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:07 +0000 (0:00:00.036)       0:09:02.828 ********** 
2025-07-29 13:38:08,212 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:08,221 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:08,229 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Предупреждение о мастер узле] ***************************************************************************************************************************************************************************************************
2025-07-29 13:38:08,229 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:08 +0000 (0:00:00.322)       0:09:03.150 ********** 
2025-07-29 13:38:08,277 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:38:08,287 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:38:08,294 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Ожидание конфигурационных файлов на NFS] ****************************************************************************************************************************************************************************************
2025-07-29 13:38:08,295 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:08 +0000 (0:00:00.065)       0:09:03.216 ********** 
2025-07-29 13:38:08,566 p=185671 u=master n=ansible | ok: [cn01] => (item=slurm.conf)
2025-07-29 13:38:08,583 p=185671 u=master n=ansible | ok: [cn02] => (item=slurm.conf)
2025-07-29 13:38:08,814 p=185671 u=master n=ansible | ok: [cn01] => (item=cgroup.conf)
2025-07-29 13:38:08,828 p=185671 u=master n=ansible | ok: [cn02] => (item=cgroup.conf)
2025-07-29 13:38:09,066 p=185671 u=master n=ansible | ok: [cn01] => (item=gres.conf)
2025-07-29 13:38:09,074 p=185671 u=master n=ansible | ok: [cn02] => (item=gres.conf)
2025-07-29 13:38:09,083 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование конфигурационных файлов из NFS] *************************************************************************************************************************************************************************************
2025-07-29 13:38:09,083 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:09 +0000 (0:00:00.788)       0:09:04.005 ********** 
2025-07-29 13:38:09,817 p=185671 u=master n=ansible | changed: [cn01] => (item=slurm.conf)
2025-07-29 13:38:09,848 p=185671 u=master n=ansible | changed: [cn02] => (item=slurm.conf)
2025-07-29 13:38:10,433 p=185671 u=master n=ansible | changed: [cn01] => (item=cgroup.conf)
2025-07-29 13:38:10,456 p=185671 u=master n=ansible | changed: [cn02] => (item=cgroup.conf)
2025-07-29 13:38:11,082 p=185671 u=master n=ansible | changed: [cn01] => (item=gres.conf)
2025-07-29 13:38:11,136 p=185671 u=master n=ansible | changed: [cn02] => (item=gres.conf)
2025-07-29 13:38:11,146 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на команды] ***************************************************************************************************************************************************************************************
2025-07-29 13:38:11,146 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:11 +0000 (0:00:02.062)       0:09:06.068 ********** 
2025-07-29 13:38:11,422 p=185671 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-29 13:38:11,438 p=185671 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-29 13:38:11,673 p=185671 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-29 13:38:11,689 p=185671 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-29 13:38:11,957 p=185671 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-29 13:38:11,965 p=185671 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-29 13:38:12,208 p=185671 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-29 13:38:12,224 p=185671 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-29 13:38:12,457 p=185671 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-29 13:38:12,478 p=185671 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-29 13:38:12,708 p=185671 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-29 13:38:12,735 p=185671 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-29 13:38:12,745 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на демоны] ****************************************************************************************************************************************************************************************
2025-07-29 13:38:12,745 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:12 +0000 (0:00:01.599)       0:09:07.667 ********** 
2025-07-29 13:38:13,020 p=185671 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-29 13:38:13,029 p=185671 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-29 13:38:13,041 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка наличия NVIDIA GPU] ****************************************************************************************************************************************************************************************************
2025-07-29 13:38:13,041 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:13 +0000 (0:00:00.296)       0:09:07.963 ********** 
2025-07-29 13:38:13,309 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:13,319 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:13,327 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Результат обнаружения GPU] ******************************************************************************************************************************************************************************************************
2025-07-29 13:38:13,327 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:13 +0000 (0:00:00.285)       0:09:08.248 ********** 
2025-07-29 13:38:13,382 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-29 13:38:13,393 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-29 13:38:13,400 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание systemd unit для slurmd] ***********************************************************************************************************************************************************************************************
2025-07-29 13:38:13,400 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:13 +0000 (0:00:00.073)       0:09:08.322 ********** 
2025-07-29 13:38:14,992 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:38:15,291 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:38:15,300 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Перезагрузка systemd daemon] ****************************************************************************************************************************************************************************************************
2025-07-29 13:38:15,300 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:15 +0000 (0:00:01.899)       0:09:10.222 ********** 
2025-07-29 13:38:16,152 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:16,184 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:16,191 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка cgroup v1/v2] **********************************************************************************************************************************************************************************************************
2025-07-29 13:38:16,192 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:16 +0000 (0:00:00.891)       0:09:11.113 ********** 
2025-07-29 13:38:16,463 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:16,469 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:16,477 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Информация о cgroup] ************************************************************************************************************************************************************************************************************
2025-07-29 13:38:16,478 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:16 +0000 (0:00:00.285)       0:09:11.399 ********** 
2025-07-29 13:38:16,532 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-29 13:38:16,547 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-29 13:38:16,558 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание скрипта проверки здоровья узла] ****************************************************************************************************************************************************************************************
2025-07-29 13:38:16,558 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:16 +0000 (0:00:00.080)       0:09:11.479 ********** 
2025-07-29 13:38:18,275 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:38:18,356 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:38:18,365 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Запуск и включение slurmd] ******************************************************************************************************************************************************************************************************
2025-07-29 13:38:18,365 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:18 +0000 (0:00:01.807)       0:09:13.287 ********** 
2025-07-29 13:38:18,906 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:38:18,919 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:38:18,927 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой] **********************************************************************************************************************************************************************************************************
2025-07-29 13:38:18,927 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:18 +0000 (0:00:00.561)       0:09:13.848 ********** 
2025-07-29 13:38:18,945 p=185671 u=master n=ansible | Pausing for 5 seconds
2025-07-29 13:38:18,946 p=185671 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 13:38:23,953 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:23,963 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка статуса slurmd] ********************************************************************************************************************************************************************************************************
2025-07-29 13:38:23,964 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:23 +0000 (0:00:05.036)       0:09:18.885 ********** 
2025-07-29 13:38:24,450 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:24,457 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:24,466 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка логов slurmd] **********************************************************************************************************************************************************************************************************
2025-07-29 13:38:24,466 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:24 +0000 (0:00:00.502)       0:09:19.388 ********** 
2025-07-29 13:38:24,751 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:24,758 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:24,766 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Тест подключения к мастеру] *****************************************************************************************************************************************************************************************************
2025-07-29 13:38:24,766 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:24 +0000 (0:00:00.299)       0:09:19.687 ********** 
2025-07-29 13:38:25,105 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:25,115 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:25,122 p=185671 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Финальный статус узла] **********************************************************************************************************************************************************************************************************
2025-07-29 13:38:25,122 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:25 +0000 (0:00:00.356)       0:09:20.044 ********** 
2025-07-29 13:38:25,151 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Slurm Compute узел cn01 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-29T16:38:18.881] error: MPI: Cannot create context for mpi/pmix_v5\n[2025-07-29T16:38:18.882] slurmd started on Tue, 29 Jul 2025 16:38:18 +0300\n[2025-07-29T16:38:18.882] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=12694 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-29 13:38:25,166 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Slurm Compute узел cn02 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-29T16:38:18.889] error: MPI: Cannot create context for mpi/pmix\n[2025-07-29T16:38:18.890] slurmd started on Tue, 29 Jul 2025 16:38:18 +0300\n[2025-07-29T16:38:18.890] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=12602 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-29 13:38:25,199 p=185671 u=master n=ansible | RUNNING HANDLER [slurm_compute : restart slurmd] **********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:25,199 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:25 +0000 (0:00:00.076)       0:09:20.121 ********** 
2025-07-29 13:38:26,025 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:38:26,056 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:38:26,082 p=185671 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ****************************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:26,108 p=185671 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:26,108 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:26 +0000 (0:00:00.909)       0:09:21.030 ********** 
2025-07-29 13:38:26,132 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 13:38:26,139 p=185671 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:26,139 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:26 +0000 (0:00:00.031)       0:09:21.061 ********** 
2025-07-29 13:38:27,755 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:27,763 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:27,763 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:27 +0000 (0:00:01.623)       0:09:22.685 ********** 
2025-07-29 13:38:28,774 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:28,782 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:28,783 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:28 +0000 (0:00:01.019)       0:09:23.704 ********** 
2025-07-29 13:38:29,147 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:29,158 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:38:29,158 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:29 +0000 (0:00:00.375)       0:09:24.080 ********** 
2025-07-29 13:38:29,486 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:29,534 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:29,534 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:29 +0000 (0:00:00.376)       0:09:24.456 ********** 
2025-07-29 13:38:30,550 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:30,559 p=185671 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:38:30,559 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:30 +0000 (0:00:01.024)       0:09:25.481 ********** 
2025-07-29 13:38:32,132 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:38:32,140 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:38:32,140 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:32 +0000 (0:00:01.581)       0:09:27.062 ********** 
2025-07-29 13:38:32,159 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:32,166 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:38:32,166 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:32 +0000 (0:00:00.025)       0:09:27.088 ********** 
2025-07-29 13:38:32,462 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:38:32,711 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:38:32,959 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:38:33,211 p=185671 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:38:33,221 p=185671 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:38:33,221 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:33 +0000 (0:00:01.054)       0:09:28.143 ********** 
2025-07-29 13:38:33,496 p=185671 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 13:38:33,506 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:38:33,506 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:33 +0000 (0:00:00.284)       0:09:28.427 ********** 
2025-07-29 13:38:34,393 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:34,401 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:38:34,401 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:34 +0000 (0:00:00.895)       0:09:29.323 ********** 
2025-07-29 13:38:34,422 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:34,429 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:34,429 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:34 +0000 (0:00:00.027)       0:09:29.351 ********** 
2025-07-29 13:38:36,327 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:38:36,335 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:36,335 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:36 +0000 (0:00:01.906)       0:09:31.257 ********** 
2025-07-29 13:38:36,606 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:36,614 p=185671 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:36,614 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:36 +0000 (0:00:00.278)       0:09:31.535 ********** 
2025-07-29 13:38:36,639 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 13:38:36,646 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:36,646 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:36 +0000 (0:00:00.032)       0:09:31.568 ********** 
2025-07-29 13:38:37,694 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:37,705 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:37,706 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:37 +0000 (0:00:01.059)       0:09:32.627 ********** 
2025-07-29 13:38:38,005 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:38,013 p=185671 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,013 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.307)       0:09:32.935 ********** 
2025-07-29 13:38:38,037 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:38:38,044 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,045 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.031)       0:09:32.966 ********** 
2025-07-29 13:38:38,062 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,069 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,069 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.024)       0:09:32.991 ********** 
2025-07-29 13:38:38,089 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:38:38,090 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:38:38,092 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,099 p=185671 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,099 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.029)       0:09:33.020 ********** 
2025-07-29 13:38:38,118 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:38:38,119 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:38:38,121 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,128 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,128 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.029)       0:09:33.050 ********** 
2025-07-29 13:38:38,210 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:38:38,212 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:38:38,215 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:38:38,217 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:38:38,220 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:38:38,223 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:38:38,225 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,232 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,232 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.104)       0:09:33.154 ********** 
2025-07-29 13:38:38,251 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,258 p=185671 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,258 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.025)       0:09:33.180 ********** 
2025-07-29 13:38:38,276 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,283 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,283 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.024)       0:09:33.205 ********** 
2025-07-29 13:38:38,301 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,308 p=185671 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,309 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.025)       0:09:33.230 ********** 
2025-07-29 13:38:38,327 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:38,335 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:38,335 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:38 +0000 (0:00:00.026)       0:09:33.257 ********** 
2025-07-29 13:38:39,334 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:39,343 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:38:39,343 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:39 +0000 (0:00:01.008)       0:09:34.265 ********** 
2025-07-29 13:38:39,621 p=185671 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 13:38:39,633 p=185671 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:38:39,634 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:39 +0000 (0:00:00.290)       0:09:34.555 ********** 
2025-07-29 13:38:39,909 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:38:40,157 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:38:40,166 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:40,166 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:40 +0000 (0:00:00.532)       0:09:35.087 ********** 
2025-07-29 13:38:40,184 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:40,191 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:38:40,191 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:40 +0000 (0:00:00.025)       0:09:35.113 ********** 
2025-07-29 13:38:40,211 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:38:40,218 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:38:40,218 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:40 +0000 (0:00:00.026)       0:09:35.139 ********** 
2025-07-29 13:38:40,498 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:40,750 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:41,007 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:41,262 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:41,516 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:38:41,833 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:38:41,843 p=185671 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:41,844 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:41 +0000 (0:00:01.625)       0:09:36.765 ********** 
2025-07-29 13:38:41,868 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 13:38:41,879 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Начало настройки Slurm Login узла] **************************************************************************************************************************************************************************************************
2025-07-29 13:38:41,879 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:41 +0000 (0:00:00.035)       0:09:36.801 ********** 
2025-07-29 13:38:41,903 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F511 Настройка Slurm Login узла: sm02\n\U0001F517 Master: sm01\n\U0001F465 Пользовательский доступ к кластеру"
2025-07-29 13:38:41,910 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Установка пакетов для пользователей] ************************************************************************************************************************************************************************************************
2025-07-29 13:38:41,910 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:41 +0000 (0:00:00.030)       0:09:36.832 ********** 
2025-07-29 13:38:43,786 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:43,793 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание директории Slurm] **********************************************************************************************************************************************************************************************************
2025-07-29 13:38:43,793 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:43 +0000 (0:00:01.883)       0:09:38.715 ********** 
2025-07-29 13:38:44,069 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:44,077 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование Slurm клиентских команд из NFS] *****************************************************************************************************************************************************************************************
2025-07-29 13:38:44,077 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:44 +0000 (0:00:00.283)       0:09:38.999 ********** 
2025-07-29 13:38:44,364 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:38:44,372 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результат установки клиентов] *******************************************************************************************************************************************************************************************************
2025-07-29 13:38:44,372 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:44 +0000 (0:00:00.295)       0:09:39.294 ********** 
2025-07-29 13:38:44,399 p=185671 u=master n=ansible | ok: [sm02] => 
  client_install.stdout_lines:
  - Установлено 20 команд
2025-07-29 13:38:44,406 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд] *************************************************************************************************************************************************************************************
2025-07-29 13:38:44,406 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:44 +0000 (0:00:00.033)       0:09:39.328 ********** 
2025-07-29 13:38:44,684 p=185671 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-29 13:38:44,943 p=185671 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-29 13:38:45,197 p=185671 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-29 13:38:45,449 p=185671 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-29 13:38:45,712 p=185671 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-29 13:38:45,961 p=185671 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-29 13:38:46,210 p=185671 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-29 13:38:46,466 p=185671 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-29 13:38:46,713 p=185671 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-29 13:38:47,086 p=185671 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-29 13:38:47,338 p=185671 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-29 13:38:47,587 p=185671 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-29 13:38:47,838 p=185671 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-29 13:38:48,087 p=185671 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-29 13:38:48,342 p=185671 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-29 13:38:48,591 p=185671 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-29 13:38:48,840 p=185671 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-29 13:38:48,856 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Обновление библиотечного кеша] ******************************************************************************************************************************************************************************************************
2025-07-29 13:38:48,857 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:48 +0000 (0:00:04.450)       0:09:43.778 ********** 
2025-07-29 13:38:49,183 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:38:49,191 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Ожидание конфигурационных файлов на NFS] ********************************************************************************************************************************************************************************************
2025-07-29 13:38:49,191 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:49 +0000 (0:00:00.334)       0:09:44.113 ********** 
2025-07-29 13:38:49,464 p=185671 u=master n=ansible | ok: [sm02] => (item=slurm.conf)
2025-07-29 13:38:49,713 p=185671 u=master n=ansible | ok: [sm02] => (item=gres.conf)
2025-07-29 13:38:49,958 p=185671 u=master n=ansible | ok: [sm02] => (item=cgroup.conf)
2025-07-29 13:38:49,967 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование конфигурационных файлов из NFS] *****************************************************************************************************************************************************************************************
2025-07-29 13:38:49,967 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:49 +0000 (0:00:00.776)       0:09:44.889 ********** 
2025-07-29 13:38:50,588 p=185671 u=master n=ansible | changed: [sm02] => (item=slurm.conf)
2025-07-29 13:38:51,102 p=185671 u=master n=ansible | changed: [sm02] => (item=gres.conf)
2025-07-29 13:38:51,736 p=185671 u=master n=ansible | changed: [sm02] => (item=cgroup.conf)
2025-07-29 13:38:51,745 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание пользовательских директорий] ***********************************************************************************************************************************************************************************************
2025-07-29 13:38:51,745 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:51 +0000 (0:00:01.777)       0:09:46.667 ********** 
2025-07-29 13:38:52,018 p=185671 u=master n=ansible | ok: [sm02] => (item=/home/users)
2025-07-29 13:38:52,268 p=185671 u=master n=ansible | ok: [sm02] => (item=/scratch)
2025-07-29 13:38:52,523 p=185671 u=master n=ansible | ok: [sm02] => (item=/projects)
2025-07-29 13:38:52,532 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание профиля Slurm для пользователей] *******************************************************************************************************************************************************************************************
2025-07-29 13:38:52,532 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:52 +0000 (0:00:00.786)       0:09:47.454 ********** 
2025-07-29 13:38:53,494 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:53,502 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Bash completion для Slurm команд] ***************************************************************************************************************************************************************************************************
2025-07-29 13:38:53,502 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:53 +0000 (0:00:00.970)       0:09:48.424 ********** 
2025-07-29 13:38:54,329 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:54,337 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Настройка SSH для пользователей] ****************************************************************************************************************************************************************************************************
2025-07-29 13:38:54,337 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:54 +0000 (0:00:00.834)       0:09:49.259 ********** 
2025-07-29 13:38:54,603 p=185671 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?MaxSessions', 'line': 'MaxSessions 10'})
2025-07-29 13:38:54,851 p=185671 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?PrintMotd', 'line': 'PrintMotd yes'})
2025-07-29 13:38:55,091 p=185671 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?Banner', 'line': 'Banner /etc/ssh/banner'})
2025-07-29 13:38:55,101 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание SSH banner] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:55,101 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:55 +0000 (0:00:00.763)       0:09:50.023 ********** 
2025-07-29 13:38:55,853 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:55,861 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Тест Slurm клиентских команд] *******************************************************************************************************************************************************************************************************
2025-07-29 13:38:55,861 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:55 +0000 (0:00:00.760)       0:09:50.783 ********** 
2025-07-29 13:38:56,148 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:56,156 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результаты тестирования] ************************************************************************************************************************************************************************************************************
2025-07-29 13:38:56,156 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:56 +0000 (0:00:00.295)       0:09:51.078 ********** 
2025-07-29 13:38:56,185 p=185671 u=master n=ansible | ok: [sm02] => 
  slurm_test.stdout_lines:
  - === ТЕСТ SLURM КОМАНД ===
  - 'sinfo version: slurm 25.05.1'
  - 'Cluster ping:'
  - Slurmctld(primary) at sm01 is UP
  - 'Cluster info:'
  - PARTITION AVAIL  TIMELIMIT   NODES(A/I/O/T) NODELIST
  - compute*     up   infinite          0/0/2/2 cn[01-02]
2025-07-29 13:38:56,195 p=185671 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Завершение настройки Login узла] ****************************************************************************************************************************************************************************************************
2025-07-29 13:38:56,195 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:56 +0000 (0:00:00.038)       0:09:51.116 ********** 
2025-07-29 13:38:56,253 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm Login узел sm02 настроен!\n\n\U0001F465 Пользователи могут:\n- Подключаться по SSH\n- Запускать задачи: sbatch, srun, salloc\n- Просматривать кластер: sinfo, squeue\n- Управлять задачами: scancel, scontrol\n\n\U0001F4C1 Доступные директории:\n/home/users, /scratch, /projects\n\n\U0001F527 Команды Slurm установлены в /usr/bin/\n\U0001F4CB Конфигурация синхронизирована с sm01\n\U0001F3AF Алиасы и автодополнение настроены\n\n\U0001F680 Login узел готов к работе!"
2025-07-29 13:38:56,281 p=185671 u=master n=ansible | PLAY [ЭТАП 6: Установка контейнеров] **********************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:56,331 p=185671 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:38:56,331 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:56 +0000 (0:00:00.136)       0:09:51.253 ********** 
2025-07-29 13:38:56,365 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 13:38:56,381 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 13:38:56,384 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 13:38:56,397 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 13:38:56,404 p=185671 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:38:56,405 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:56 +0000 (0:00:00.073)       0:09:51.326 ********** 
2025-07-29 13:38:57,142 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:57,185 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:57,198 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:38:57,245 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:38:57,256 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:38:57,256 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:38:57 +0000 (0:00:00.851)       0:09:52.178 ********** 
2025-07-29 13:38:58,322 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:38:58,376 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:38:58,429 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:16,591 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:39:16,599 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:16,599 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:16 +0000 (0:00:19.342)       0:10:11.520 ********** 
2025-07-29 13:39:16,973 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:16,992 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:17,010 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:17,037 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:17,044 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:39:17,045 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:17 +0000 (0:00:00.445)       0:10:11.966 ********** 
2025-07-29 13:39:17,387 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:17,388 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:17,413 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:17,420 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:17,431 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:17,431 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:17 +0000 (0:00:00.386)       0:10:12.353 ********** 
2025-07-29 13:39:18,478 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:18,483 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:18,576 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:18,626 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:18,634 p=185671 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:39:18,634 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:18 +0000 (0:00:01.202)       0:10:13.556 ********** 
2025-07-29 13:39:20,282 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:39:20,315 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:39:20,323 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:39:20,352 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:39:20,360 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:39:20,361 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:20 +0000 (0:00:01.726)       0:10:15.282 ********** 
2025-07-29 13:39:20,420 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:20,421 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:20,434 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:20,622 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:20,630 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:39:20,630 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:20 +0000 (0:00:00.269)       0:10:15.552 ********** 
2025-07-29 13:39:20,922 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:20,940 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:20,949 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:20,989 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,180 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,215 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,250 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,253 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,437 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,482 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,507 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,508 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:39:21,702 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:39:21,762 p=185671 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:39:21,836 p=185671 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:39:22,185 p=185671 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:39:22,195 p=185671 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:39:22,196 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:22 +0000 (0:00:01.565)       0:10:17.117 ********** 
2025-07-29 13:39:22,232 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:39:22,497 p=185671 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 13:39:22,514 p=185671 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 13:39:22,530 p=185671 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 13:39:22,538 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:39:22,538 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:22 +0000 (0:00:00.342)       0:10:17.460 ********** 
2025-07-29 13:39:22,573 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:39:23,242 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:23,244 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:23,245 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:23,253 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:39:23,253 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:23 +0000 (0:00:00.714)       0:10:18.174 ********** 
2025-07-29 13:39:23,301 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:23,303 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:23,313 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:23,537 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:23,545 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:39:23,545 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:23 +0000 (0:00:00.291)       0:10:18.466 ********** 
2025-07-29 13:39:25,491 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:39:25,567 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:39:25,591 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:39:25,622 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:39:25,630 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:25,630 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:25 +0000 (0:00:02.085)       0:10:20.552 ********** 
2025-07-29 13:39:25,911 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:25,916 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:25,936 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:25,945 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:25,952 p=185671 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:39:25,953 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:25 +0000 (0:00:00.322)       0:10:20.874 ********** 
2025-07-29 13:39:25,997 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 13:39:26,017 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 13:39:26,018 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 13:39:26,034 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 13:39:26,044 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:26,044 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:26 +0000 (0:00:00.091)       0:10:20.966 ********** 
2025-07-29 13:39:27,164 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:27,168 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:27,212 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:27,262 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:27,270 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:27,270 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:27 +0000 (0:00:01.225)       0:10:22.191 ********** 
2025-07-29 13:39:27,550 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:27,561 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:27,570 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:27,603 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:27,611 p=185671 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:27,611 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:27 +0000 (0:00:00.341)       0:10:22.533 ********** 
2025-07-29 13:39:27,651 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:39:27,668 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:39:27,669 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:39:27,682 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:39:27,690 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:39:27,690 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:27 +0000 (0:00:00.079)       0:10:22.612 ********** 
2025-07-29 13:39:27,735 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:27,753 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:27,766 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:28,678 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:28,686 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:39:28,686 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:28 +0000 (0:00:00.996)       0:10:23.608 ********** 
2025-07-29 13:39:28,726 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:39:28,727 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:39:28,737 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:28,740 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:39:28,741 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:39:28,742 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:28,751 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:39:28,754 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:39:28,755 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:28,964 p=185671 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 13:39:29,217 p=185671 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 13:39:29,226 p=185671 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:39:29,226 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:29 +0000 (0:00:00.539)       0:10:24.148 ********** 
2025-07-29 13:39:29,262 p=185671 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:39:29,267 p=185671 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:39:29,277 p=185671 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:39:29,279 p=185671 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:39:29,280 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:29,282 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:29,290 p=185671 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:39:29,294 p=185671 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:39:29,294 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:29,494 p=185671 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 13:39:30,086 p=185671 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 13:39:30,097 p=185671 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:39:30,098 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:30 +0000 (0:00:00.871)       0:10:25.019 ********** 
2025-07-29 13:39:30,209 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:39:30,211 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:39:30,216 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:39:30,217 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:39:30,221 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:39:30,225 p=185671 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:39:30,226 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:39:30,227 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:30,229 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:39:30,230 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:39:30,233 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:39:30,236 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:39:30,239 p=185671 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:39:30,240 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:30,253 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:39:30,256 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:39:30,259 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:39:30,262 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:39:30,264 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:39:30,267 p=185671 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:39:30,268 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:30,586 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 13:39:30,839 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 13:39:31,085 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 13:39:31,329 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 13:39:31,570 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 13:39:31,814 p=185671 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 13:39:31,826 p=185671 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:39:31,826 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:31 +0000 (0:00:01.728)       0:10:26.748 ********** 
2025-07-29 13:39:31,876 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:31,877 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:31,889 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:32,313 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:32,322 p=185671 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:39:32,322 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:32 +0000 (0:00:00.496)       0:10:27.244 ********** 
2025-07-29 13:39:32,374 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:32,375 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:32,387 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:32,591 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:39:32,599 p=185671 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:39:32,600 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:32 +0000 (0:00:00.277)       0:10:27.521 ********** 
2025-07-29 13:39:32,649 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:32,650 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:32,661 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:32,869 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:39:32,877 p=185671 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:39:32,877 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:32 +0000 (0:00:00.277)       0:10:27.799 ********** 
2025-07-29 13:39:32,912 p=185671 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 13:39:32,926 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:32,927 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:32,938 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:32,946 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:32,946 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:32 +0000 (0:00:00.068)       0:10:27.867 ********** 
2025-07-29 13:39:32,965 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:39:33,972 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:33,982 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:34,051 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:34,059 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:39:34,059 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:34 +0000 (0:00:01.113)       0:10:28.981 ********** 
2025-07-29 13:39:34,086 p=185671 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 13:39:34,096 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:39:34,357 p=185671 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 13:39:34,378 p=185671 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 13:39:34,384 p=185671 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 13:39:34,393 p=185671 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:39:34,393 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:34 +0000 (0:00:00.334)       0:10:29.315 ********** 
2025-07-29 13:39:34,419 p=185671 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 13:39:34,420 p=185671 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 13:39:34,430 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:39:34,685 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:39:34,700 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:39:34,724 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:39:34,940 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:39:34,964 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:39:34,982 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:39:34,991 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:39:34,992 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:34 +0000 (0:00:00.598)       0:10:29.913 ********** 
2025-07-29 13:39:35,045 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:35,046 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:35,058 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:35,977 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:35,985 p=185671 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:39:35,985 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:35 +0000 (0:00:00.993)       0:10:30.907 ********** 
2025-07-29 13:39:36,034 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:39:36,035 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:39:36,047 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:39:36,958 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:36,966 p=185671 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:39:36,966 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:36 +0000 (0:00:00.981)       0:10:31.888 ********** 
2025-07-29 13:39:37,256 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,280 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,283 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,310 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,513 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,547 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,553 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,570 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,770 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,804 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,816 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:37,893 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,028 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,071 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,084 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,159 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,281 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:39:38,326 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:39:38,347 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:39:38,416 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:39:38,537 p=185671 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,582 p=185671 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,607 p=185671 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,671 p=185671 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:39:38,683 p=185671 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:39:38,683 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:38 +0000 (0:00:01.717)       0:10:33.605 ********** 
2025-07-29 13:39:38,719 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 13:39:38,735 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 13:39:38,738 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 13:39:38,752 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 13:39:38,778 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Исправление Pyxis + добавление enroot+caps] *******************************************************************************************************************************************************************************************
2025-07-29 13:39:38,778 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:38 +0000 (0:00:00.094)       0:10:33.699 ********** 
2025-07-29 13:39:38,812 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 13:39:38,827 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 13:39:38,828 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 13:39:38,840 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 13:39:38,850 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Задание переменных] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:39:38,851 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:38 +0000 (0:00:00.072)       0:10:33.772 ********** 
2025-07-29 13:39:38,886 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:38,902 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:38,903 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:38,914 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:38,922 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Установка libslurm-dev (для headers)] *************************************************************************************************************************************************************************************************
2025-07-29 13:39:38,922 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:38 +0000 (0:00:00.071)       0:10:33.844 ********** 
2025-07-29 13:39:46,452 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:39:48,289 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:39:51,102 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:39:52,603 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:39:52,610 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Проверка установки Enroot] ************************************************************************************************************************************************************************************************************
2025-07-29 13:39:52,611 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:52 +0000 (0:00:13.688)       0:10:47.532 ********** 
2025-07-29 13:39:52,877 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:39:52,881 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:39:52,912 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:39:52,927 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:39:52,938 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Установка Enroot] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:39:52,938 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:39:52 +0000 (0:00:00.327)       0:10:47.860 ********** 
2025-07-29 13:40:06,701 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:11,284 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:13,584 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:24,714 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:24,722 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Проверка capabilities для enroot] *****************************************************************************************************************************************************************************************************
2025-07-29 13:40:24,722 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:24 +0000 (0:00:31.783)       0:11:19.644 ********** 
2025-07-29 13:40:24,743 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:40:24,761 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:40:25,046 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:40:25,053 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:40:25,061 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Установка enroot+caps на compute узлах] ***********************************************************************************************************************************************************************************************
2025-07-29 13:40:25,061 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:25 +0000 (0:00:00.339)       0:11:19.983 ********** 
2025-07-29 13:40:25,095 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:40:25,110 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:40:25,113 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:40:25,123 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:40:25,134 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Результат установки enroot+caps] ******************************************************************************************************************************************************************************************************
2025-07-29 13:40:25,134 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:25 +0000 (0:00:00.072)       0:11:20.056 ********** 
2025-07-29 13:40:25,170 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:40:25,185 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:40:25,204 p=185671 u=master n=ansible | ok: [cn01] => 
  enroot_caps_install.stdout_lines: VARIABLE IS NOT DEFINED!
2025-07-29 13:40:25,213 p=185671 u=master n=ansible | ok: [cn02] => 
  enroot_caps_install.stdout_lines: VARIABLE IS NOT DEFINED!
2025-07-29 13:40:25,220 p=185671 u=master n=ansible | TASK [containers : [PYXIS] Очистка старых файлов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:40:25,220 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:25 +0000 (0:00:00.086)       0:11:20.142 ********** 
2025-07-29 13:40:25,518 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:40:25,519 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:40:25,541 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:40:25,544 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:40:25,552 p=185671 u=master n=ansible | TASK [containers : [PYXIS] Создание build директории] *****************************************************************************************************************************************************************************************************************
2025-07-29 13:40:25,552 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:25 +0000 (0:00:00.331)       0:11:20.473 ********** 
2025-07-29 13:40:25,843 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:25,854 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:25,879 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:25,881 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:25,892 p=185671 u=master n=ansible | TASK [containers : [PYXIS] Скачивание исходников] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:40:25,893 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:25 +0000 (0:00:00.340)       0:11:20.814 ********** 
2025-07-29 13:40:27,022 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:27,026 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:27,257 p=185671 u=master n=ansible | [WARNING]: Module remote_tmp /root/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2025-07-29 13:40:27,257 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:27,263 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:27,271 p=185671 u=master n=ansible | TASK [containers : [PYXIS] Извлечение исходников] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:40:27,271 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:27 +0000 (0:00:01.378)       0:11:22.192 ********** 
2025-07-29 13:40:28,067 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:28,305 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:28,307 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:28,307 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:28,315 p=185671 u=master n=ansible | TASK [containers : [PYXIS] ИСПРАВЛЕННАЯ компиляция] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:40:28,315 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:28 +0000 (0:00:01.044)       0:11:23.237 ********** 
2025-07-29 13:40:30,002 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:31,971 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:32,187 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:33,083 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:33,095 p=185671 u=master n=ansible | TASK [containers : [CONFIG] Создание ПРАВИЛЬНОГО plugstack.conf] ******************************************************************************************************************************************************************************************************
2025-07-29 13:40:33,095 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:33 +0000 (0:00:04.779)       0:11:28.016 ********** 
2025-07-29 13:40:33,825 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:34,445 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:34,511 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:34,522 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:34,530 p=185671 u=master n=ansible | TASK [containers : [ENROOT] Создание директорий Enroot] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:40:34,530 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:34 +0000 (0:00:01.435)       0:11:29.452 ********** 
2025-07-29 13:40:34,812 p=185671 u=master n=ansible | changed: [sm01] => (item=/var/lib/enroot)
2025-07-29 13:40:34,821 p=185671 u=master n=ansible | changed: [sm02] => (item=/var/lib/enroot)
2025-07-29 13:40:34,834 p=185671 u=master n=ansible | changed: [cn01] => (item=/var/lib/enroot)
2025-07-29 13:40:34,850 p=185671 u=master n=ansible | changed: [cn02] => (item=/var/lib/enroot)
2025-07-29 13:40:35,064 p=185671 u=master n=ansible | changed: [sm01] => (item=/var/cache/enroot)
2025-07-29 13:40:35,072 p=185671 u=master n=ansible | changed: [sm02] => (item=/var/cache/enroot)
2025-07-29 13:40:35,089 p=185671 u=master n=ansible | changed: [cn01] => (item=/var/cache/enroot)
2025-07-29 13:40:35,111 p=185671 u=master n=ansible | changed: [cn02] => (item=/var/cache/enroot)
2025-07-29 13:40:35,323 p=185671 u=master n=ansible | changed: [sm01] => (item=/run/enroot)
2025-07-29 13:40:35,328 p=185671 u=master n=ansible | changed: [sm02] => (item=/run/enroot)
2025-07-29 13:40:35,343 p=185671 u=master n=ansible | changed: [cn01] => (item=/run/enroot)
2025-07-29 13:40:35,368 p=185671 u=master n=ansible | changed: [cn02] => (item=/run/enroot)
2025-07-29 13:40:35,577 p=185671 u=master n=ansible | ok: [sm01] => (item=/etc/enroot)
2025-07-29 13:40:35,596 p=185671 u=master n=ansible | ok: [sm02] => (item=/etc/enroot)
2025-07-29 13:40:35,603 p=185671 u=master n=ansible | ok: [cn01] => (item=/etc/enroot)
2025-07-29 13:40:35,631 p=185671 u=master n=ansible | ok: [cn02] => (item=/etc/enroot)
2025-07-29 13:40:35,640 p=185671 u=master n=ansible | TASK [containers : [ENROOT] Продакшн конфигурация Enroot] *************************************************************************************************************************************************************************************************************
2025-07-29 13:40:35,640 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:35 +0000 (0:00:01.110)       0:11:30.562 ********** 
2025-07-29 13:40:38,069 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:38,669 p=185671 u=master n=ansible | changed: [sm02]
2025-07-29 13:40:38,901 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:39,016 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:39,027 p=185671 u=master n=ansible | TASK [containers : [VERIFY] Проверка исправлений] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:40:39,028 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:39 +0000 (0:00:03.387)       0:11:33.949 ********** 
2025-07-29 13:40:39,312 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:40:39,317 p=185671 u=master n=ansible | ok: [sm02]
2025-07-29 13:40:39,332 p=185671 u=master n=ansible | ok: [cn01]
2025-07-29 13:40:39,357 p=185671 u=master n=ansible | ok: [cn02]
2025-07-29 13:40:39,365 p=185671 u=master n=ansible | TASK [containers : [CONTAINERS] Результат исправления] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:40:39,365 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:39 +0000 (0:00:00.337)       0:11:34.287 ********** 
2025-07-29 13:40:39,400 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 16:40 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 13:40:39,416 p=185671 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 16:40 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 13:40:39,419 p=185671 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 16:40 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n✅ Enroot+caps check:\n\n\U0001F3AF На compute узле также установлен enroot+caps\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 13:40:39,437 p=185671 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 16:40 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n✅ Enroot+caps check:\n\n\U0001F3AF На compute узле также установлен enroot+caps\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 13:40:39,497 p=185671 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:39,497 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:39 +0000 (0:00:00.131)       0:11:34.418 ********** 
2025-07-29 13:40:40,738 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:40,744 p=185671 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:40,744 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:40 +0000 (0:00:01.247)       0:11:35.666 ********** 
2025-07-29 13:40:41,015 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:41,053 p=185671 u=master n=ansible | PLAY [ЭТАП 7: Перезапуск сервисов] ************************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:41,090 p=185671 u=master n=ansible | TASK [Перезапуск slurmd] **********************************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:41,091 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:41 +0000 (0:00:00.346)       0:11:36.012 ********** 
2025-07-29 13:40:41,125 p=185671 u=master n=ansible | skipping: [sm01]
2025-07-29 13:40:41,142 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:40:45,805 p=185671 u=master n=ansible | changed: [cn02]
2025-07-29 13:40:48,837 p=185671 u=master n=ansible | changed: [cn01]
2025-07-29 13:40:48,845 p=185671 u=master n=ansible | TASK [Перезапуск slurmctld] *******************************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:48,845 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:48 +0000 (0:00:07.754)       0:11:43.767 ********** 
2025-07-29 13:40:48,893 p=185671 u=master n=ansible | skipping: [sm02]
2025-07-29 13:40:48,895 p=185671 u=master n=ansible | skipping: [cn01]
2025-07-29 13:40:48,904 p=185671 u=master n=ansible | skipping: [cn02]
2025-07-29 13:40:50,716 p=185671 u=master n=ansible | changed: [sm01]
2025-07-29 13:40:50,724 p=185671 u=master n=ansible | TASK [Пауза] **********************************************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:50,724 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:50 +0000 (0:00:01.879)       0:11:45.646 ********** 
2025-07-29 13:40:50,748 p=185671 u=master n=ansible | Pausing for 5 seconds
2025-07-29 13:40:50,749 p=185671 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 13:40:55,753 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:40:55,824 p=185671 u=master n=ansible | PLAY [ЭТАП 8: Тестирование] *******************************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:55,840 p=185671 u=master n=ansible | TASK [Тест кластера] **************************************************************************************************************************************************************************************************************************************************
2025-07-29 13:40:55,840 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:40:55 +0000 (0:00:05.115)       0:11:50.761 ********** 
2025-07-29 13:51:45,100 p=185671 u=master n=ansible | ok: [sm01]
2025-07-29 13:51:45,111 p=185671 u=master n=ansible | TASK [Результат] ******************************************************************************************************************************************************************************************************************************************************
2025-07-29 13:51:45,112 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:51:45 +0000 (0:10:49.271)       0:22:40.033 ********** 
2025-07-29 13:51:45,145 p=185671 u=master n=ansible | ok: [sm01] => 
  msg: "=== ТЕСТ КЛАСТЕРА ===\nSlurmctld(primary) at sm01 is UP\nPARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST\ncompute*     up   infinite      2  inval cn[01-02]\ncn01\nКонтейнеры настраиваются...\n\n\U0001F389 КЛАСТЕР УСТАНОВЛЕН!\n\nКоманды для тестирования:\n- sinfo\n- srun hostname\n- srun --container-image=docker://hello-world"
2025-07-29 13:51:45,169 p=185671 u=master n=ansible | PLAY RECAP ************************************************************************************************************************************************************************************************************************************************************
2025-07-29 13:51:45,169 p=185671 u=master n=ansible | cn01                       : ok=137  changed=30   unreachable=0    failed=0    skipped=64   rescued=0    ignored=0   
2025-07-29 13:51:45,169 p=185671 u=master n=ansible | cn02                       : ok=136  changed=30   unreachable=0    failed=0    skipped=64   rescued=0    ignored=0   
2025-07-29 13:51:45,169 p=185671 u=master n=ansible | localhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-07-29 13:51:45,170 p=185671 u=master n=ansible | sm01                       : ok=162  changed=58   unreachable=0    failed=0    skipped=22   rescued=0    ignored=0   
2025-07-29 13:51:45,170 p=185671 u=master n=ansible | sm02                       : ok=130  changed=27   unreachable=0    failed=0    skipped=65   rescued=0    ignored=0   
2025-07-29 13:51:45,170 p=185671 u=master n=ansible | Playbook run took 0 days, 0 hours, 22 minutes, 40 seconds
2025-07-29 13:51:45,170 p=185671 u=master n=ansible | Tuesday 29 July 2025  13:51:45 +0000 (0:00:00.058)       0:22:40.092 ********** 
2025-07-29 13:51:45,170 p=185671 u=master n=ansible | =============================================================================== 
2025-07-29 13:51:45,171 p=185671 u=master n=ansible | Тест кластера ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 649.27s
2025-07-29 13:51:45,171 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 300.76s
2025-07-29 13:51:45,171 p=185671 u=master n=ansible | containers : [CONTAINERS] Установка Enroot -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 31.78s
2025-07-29 13:51:45,171 p=185671 u=master n=ansible | common : [COMMON] Обновление apt cache ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 28.11s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 27.27s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 19.51s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | common : [COMMON] Установка базовых пакетов ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 19.34s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 18.53s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | containers : [CONTAINERS] Установка libslurm-dev (для headers) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 13.69s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 12.71s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | common : [COMMON] Установка базовых пакетов ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 12.09s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | common : [COMMON] Обновление apt cache ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 9.60s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | Перезапуск slurmd ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 7.75s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | slurm_master : restart slurmctld ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.76s
2025-07-29 13:51:45,172 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Скачивание исходников Slurm 25.05.1 ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 5.75s
2025-07-29 13:51:45,173 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Извлечение исходников Slurm -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.66s
2025-07-29 13:51:45,173 p=185671 u=master n=ansible | Пауза ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.12s
2025-07-29 13:51:45,173 p=185671 u=master n=ansible | slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.04s
2025-07-29 13:51:45,173 p=185671 u=master n=ansible | slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm -------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.00s
2025-07-29 13:51:45,173 p=185671 u=master n=ansible | containers : [PYXIS] ИСПРАВЛЕННАЯ компиляция ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.78s
2025-07-29 13:53:37,702 p=189336 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ********************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:37,714 p=189336 u=master n=ansible | TASK [Информация о развертывании] *************************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:37,714 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:37 +0000 (0:00:00.014)       0:00:00.014 ********** 
2025-07-29 13:53:37,772 p=189336 u=master n=ansible | ok: [localhost] => 
  msg: "\U0001F680 Установка Slurm HPC кластера\n\U0001F4CD Master:  sm01\n\U0001F4CD Login:   sm02\n\U0001F4CD Compute: cn01, cn02"
2025-07-29 13:53:37,781 p=189336 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *************************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:37,846 p=189336 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:53:37,846 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:37 +0000 (0:00:00.132)       0:00:00.146 ********** 
2025-07-29 13:53:37,884 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 13:53:37,900 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 13:53:37,903 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 13:53:37,918 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 13:53:37,954 p=189336 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:37,954 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:37 +0000 (0:00:00.107)       0:00:00.254 ********** 
2025-07-29 13:53:39,675 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:39,702 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:39,955 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:39,983 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:39,991 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:53:39,991 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:39 +0000 (0:00:02.037)       0:00:02.291 ********** 
2025-07-29 13:53:41,072 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:41,106 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:41,113 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:41,172 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:41,180 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:41,180 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:41 +0000 (0:00:01.189)       0:00:03.480 ********** 
2025-07-29 13:53:41,687 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:41,689 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:41,699 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:41,716 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:41,725 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:53:41,725 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:41 +0000 (0:00:00.544)       0:00:04.025 ********** 
2025-07-29 13:53:42,247 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:42,249 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:42,250 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:42,258 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:42,268 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:42,268 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:42 +0000 (0:00:00.542)       0:00:04.568 ********** 
2025-07-29 13:53:43,329 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:43,383 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:43,463 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:43,464 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:43,472 p=189336 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:53:43,473 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:43 +0000 (0:00:01.204)       0:00:05.772 ********** 
2025-07-29 13:53:45,532 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 13:53:45,544 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 13:53:45,567 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:53:45,569 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 13:53:45,578 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:53:45,578 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:45 +0000 (0:00:02.105)       0:00:07.878 ********** 
2025-07-29 13:53:45,616 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:45,633 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:45,645 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:45,957 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:45,966 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:53:45,966 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:45 +0000 (0:00:00.387)       0:00:08.266 ********** 
2025-07-29 13:53:46,387 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,389 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,390 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,395 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,642 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,645 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,650 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,658 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,898 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,906 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,908 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:46,915 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:53:47,157 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:53:47,165 p=189336 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:53:47,166 p=189336 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:53:47,168 p=189336 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:53:47,180 p=189336 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:53:47,180 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:47 +0000 (0:00:01.214)       0:00:09.480 ********** 
2025-07-29 13:53:47,217 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:53:47,589 p=189336 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 13:53:47,589 p=189336 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 13:53:47,590 p=189336 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 13:53:47,600 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:53:47,600 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:47 +0000 (0:00:00.419)       0:00:09.900 ********** 
2025-07-29 13:53:47,636 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:53:48,484 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:48,485 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:48,486 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:48,494 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:53:48,495 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:48 +0000 (0:00:00.894)       0:00:10.794 ********** 
2025-07-29 13:53:48,532 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:48,551 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:48,561 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:48,763 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:48,771 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:53:48,772 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:48 +0000 (0:00:00.277)       0:00:11.071 ********** 
2025-07-29 13:53:50,698 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 13:53:50,708 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 13:53:50,763 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 13:53:50,810 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:53:50,818 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:50,818 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:50 +0000 (0:00:02.046)       0:00:13.118 ********** 
2025-07-29 13:53:51,099 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:51,103 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:51,125 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:51,144 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:51,152 p=189336 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:53:51,152 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:51 +0000 (0:00:00.334)       0:00:13.452 ********** 
2025-07-29 13:53:51,191 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 13:53:51,207 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 13:53:51,210 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 13:53:51,226 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 13:53:51,234 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:51,234 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:51 +0000 (0:00:00.081)       0:00:13.534 ********** 
2025-07-29 13:53:52,283 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:52,471 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:52,485 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:52,555 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:52,564 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:52,565 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:52 +0000 (0:00:01.330)       0:00:14.864 ********** 
2025-07-29 13:53:52,848 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:52,855 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:52,882 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:52,894 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:52,903 p=189336 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:52,903 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:52 +0000 (0:00:00.338)       0:00:15.202 ********** 
2025-07-29 13:53:52,938 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:53:52,955 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:53:52,957 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:53:52,971 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:53:52,980 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:53:52,980 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:52 +0000 (0:00:00.076)       0:00:15.279 ********** 
2025-07-29 13:53:53,017 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:53,035 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:53,047 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:54,037 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:54,046 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:53:54,046 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:54 +0000 (0:00:01.066)       0:00:16.346 ********** 
2025-07-29 13:53:54,084 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:53:54,092 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:53:54,098 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:53:54,102 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:53:54,105 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:54,106 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:54,116 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:53:54,119 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:53:54,121 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:54,318 p=189336 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 13:53:54,577 p=189336 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 13:53:54,587 p=189336 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:53:54,587 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:54 +0000 (0:00:00.541)       0:00:16.887 ********** 
2025-07-29 13:53:54,630 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:53:54,631 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:53:54,643 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:53:54,646 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:54,646 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:53:54,647 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:54,657 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:53:54,660 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:53:54,661 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:55,001 p=189336 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 13:53:55,243 p=189336 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 13:53:55,253 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:53:55,253 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:55 +0000 (0:00:00.665)       0:00:17.553 ********** 
2025-07-29 13:53:55,354 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:53:55,356 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:53:55,359 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:53:55,361 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:53:55,365 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:53:55,370 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:53:55,372 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:55,375 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:53:55,378 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:53:55,382 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:53:55,385 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:53:55,387 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:53:55,390 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:53:55,391 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:53:55,392 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:55,394 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:53:55,397 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:53:55,399 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:53:55,402 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:53:55,405 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:53:55,406 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:55,592 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 13:53:55,839 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 13:53:56,088 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 13:53:56,337 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 13:53:56,587 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 13:53:56,836 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 13:53:56,850 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:53:56,850 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:56 +0000 (0:00:01.597)       0:00:19.150 ********** 
2025-07-29 13:53:56,890 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:56,907 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:56,920 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:57,341 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:53:57,350 p=189336 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:53:57,350 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:57 +0000 (0:00:00.500)       0:00:19.650 ********** 
2025-07-29 13:53:57,394 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:57,412 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:57,425 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:57,622 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:53:57,631 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:53:57,631 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:57 +0000 (0:00:00.280)       0:00:19.931 ********** 
2025-07-29 13:53:57,683 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:57,684 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:57,696 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:57,899 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:53:57,908 p=189336 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:53:57,908 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:57 +0000 (0:00:00.276)       0:00:20.208 ********** 
2025-07-29 13:53:57,946 p=189336 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 13:53:57,961 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:53:57,962 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:53:57,974 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:53:57,982 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:53:57,982 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:57 +0000 (0:00:00.074)       0:00:20.282 ********** 
2025-07-29 13:53:58,005 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:53:59,010 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:53:59,057 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:53:59,123 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:53:59,132 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:53:59,133 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:59 +0000 (0:00:01.150)       0:00:21.432 ********** 
2025-07-29 13:53:59,156 p=189336 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 13:53:59,176 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:53:59,430 p=189336 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 13:53:59,451 p=189336 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 13:53:59,476 p=189336 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 13:53:59,486 p=189336 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:53:59,487 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:53:59 +0000 (0:00:00.354)       0:00:21.786 ********** 
2025-07-29 13:53:59,518 p=189336 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 13:53:59,519 p=189336 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 13:53:59,529 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:53:59,914 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:53:59,919 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:53:59,922 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:54:00,169 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:54:00,184 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:54:00,186 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:54:00,196 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:00,196 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:00 +0000 (0:00:00.709)       0:00:22.496 ********** 
2025-07-29 13:54:00,235 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:00,251 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:00,265 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:01,236 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:01,245 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:54:01,245 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:01 +0000 (0:00:01.048)       0:00:23.545 ********** 
2025-07-29 13:54:01,340 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:01,358 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:01,371 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:02,233 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:02,242 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:54:02,242 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:02 +0000 (0:00:00.997)       0:00:24.542 ********** 
2025-07-29 13:54:02,533 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,553 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,554 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,593 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,799 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,808 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,813 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:02,853 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,061 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,062 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,076 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,111 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,319 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,324 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,336 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,374 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,574 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:03,589 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:03,594 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:03,633 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:03,832 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,843 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,853 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,892 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:03,902 p=189336 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:54:03,903 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:03 +0000 (0:00:01.660)       0:00:26.202 ********** 
2025-07-29 13:54:03,939 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 13:54:03,958 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 13:54:03,960 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 13:54:03,974 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 13:54:04,049 p=189336 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:04,049 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:04 +0000 (0:00:00.146)       0:00:26.348 ********** 
2025-07-29 13:54:05,307 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:05,314 p=189336 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:05,314 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:05 +0000 (0:00:01.265)       0:00:27.614 ********** 
2025-07-29 13:54:05,579 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:05,627 p=189336 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:54:05,691 p=189336 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:54:05,691 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:05 +0000 (0:00:00.376)       0:00:27.991 ********** 
2025-07-29 13:54:05,726 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 13:54:05,742 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 13:54:05,745 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 13:54:05,760 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 13:54:05,769 p=189336 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:05,769 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:05 +0000 (0:00:00.078)       0:00:28.069 ********** 
2025-07-29 13:54:06,604 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:06,767 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:06,945 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:07,097 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:07,106 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 13:54:07,106 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:07 +0000 (0:00:01.336)       0:00:29.406 ********** 
2025-07-29 13:54:08,232 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:08,381 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:08,409 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:08,410 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:08,418 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:08,419 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:08 +0000 (0:00:01.312)       0:00:30.718 ********** 
2025-07-29 13:54:08,758 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:08,759 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:08,769 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:08,805 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:08,814 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:54:08,814 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:08 +0000 (0:00:00.395)       0:00:31.114 ********** 
2025-07-29 13:54:09,165 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:09,174 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:09,180 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:09,204 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:09,212 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:09,212 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:09 +0000 (0:00:00.398)       0:00:31.512 ********** 
2025-07-29 13:54:10,277 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:10,295 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:10,303 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:10,373 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:10,381 p=189336 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 13:54:10,382 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:10 +0000 (0:00:01.169)       0:00:32.681 ********** 
2025-07-29 13:54:11,986 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 13:54:11,997 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 13:54:11,998 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 13:54:12,023 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:12,031 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 13:54:12,032 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:12 +0000 (0:00:01.650)       0:00:34.331 ********** 
2025-07-29 13:54:12,069 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:12,086 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:12,099 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:12,295 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:12,304 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 13:54:12,304 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:12 +0000 (0:00:00.272)       0:00:34.604 ********** 
2025-07-29 13:54:12,582 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,601 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,621 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,634 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,848 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,878 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,880 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:12,898 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:13,121 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:13,138 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:13,140 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:13,162 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 13:54:13,376 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:54:13,405 p=189336 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:54:13,435 p=189336 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:54:13,454 p=189336 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 13:54:13,465 p=189336 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 13:54:13,465 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:13 +0000 (0:00:01.160)       0:00:35.764 ********** 
2025-07-29 13:54:13,503 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:54:13,754 p=189336 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 13:54:13,768 p=189336 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 13:54:13,783 p=189336 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 13:54:13,791 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 13:54:13,792 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:13 +0000 (0:00:00.326)       0:00:36.091 ********** 
2025-07-29 13:54:13,813 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:54:14,471 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:14,473 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:14,484 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:14,492 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 13:54:14,493 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:14 +0000 (0:00:00.701)       0:00:36.792 ********** 
2025-07-29 13:54:14,547 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:14,548 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:14,561 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:14,763 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:14,772 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:54:14,772 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:14 +0000 (0:00:00.279)       0:00:37.072 ********** 
2025-07-29 13:54:16,748 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 13:54:16,750 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 13:54:16,783 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:16,800 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 13:54:16,808 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:16,808 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:16 +0000 (0:00:02.036)       0:00:39.108 ********** 
2025-07-29 13:54:17,090 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:17,092 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:17,112 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:17,129 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:17,137 p=189336 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:54:17,137 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:17 +0000 (0:00:00.329)       0:00:39.437 ********** 
2025-07-29 13:54:17,179 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 13:54:17,195 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 13:54:17,198 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 13:54:17,214 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 13:54:17,222 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:17,222 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:17 +0000 (0:00:00.084)       0:00:39.522 ********** 
2025-07-29 13:54:18,264 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:18,284 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:18,307 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:18,377 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:18,385 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:18,385 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:18 +0000 (0:00:01.163)       0:00:40.685 ********** 
2025-07-29 13:54:18,654 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:18,685 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:18,701 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:18,708 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:18,752 p=189336 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:18,752 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:18 +0000 (0:00:00.366)       0:00:41.052 ********** 
2025-07-29 13:54:18,793 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:54:18,809 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:54:18,810 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:54:18,825 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 13:54:18,834 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 13:54:18,834 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:18 +0000 (0:00:00.081)       0:00:41.134 ********** 
2025-07-29 13:54:18,873 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:18,891 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:18,903 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:19,793 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:19,802 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 13:54:19,803 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:19 +0000 (0:00:00.968)       0:00:42.102 ********** 
2025-07-29 13:54:19,840 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:54:19,847 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:54:19,855 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:54:19,857 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:54:19,861 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:19,862 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:19,877 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:54:19,879 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:54:19,881 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:20,074 p=189336 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 13:54:20,321 p=189336 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 13:54:20,332 p=189336 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 13:54:20,332 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:20 +0000 (0:00:00.529)       0:00:42.632 ********** 
2025-07-29 13:54:20,376 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 13:54:20,378 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 13:54:20,386 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 13:54:20,389 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:20,390 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 13:54:20,391 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:20,403 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 13:54:20,406 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 13:54:20,407 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:20,600 p=189336 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 13:54:20,839 p=189336 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 13:54:20,849 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 13:54:20,850 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:20 +0000 (0:00:00.517)       0:00:43.149 ********** 
2025-07-29 13:54:20,956 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:54:20,958 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:54:20,960 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:54:20,967 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:54:20,968 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:54:20,969 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:54:20,970 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:54:20,971 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:54:20,972 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:20,974 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:54:20,976 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:54:20,979 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:54:20,982 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:54:20,983 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:20,994 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:54:20,997 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:54:20,999 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:54:21,002 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 13:54:21,005 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 13:54:21,008 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 13:54:21,009 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:21,177 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 13:54:21,417 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 13:54:21,657 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 13:54:21,896 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 13:54:22,136 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 13:54:22,375 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 13:54:22,387 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:54:22,388 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:22 +0000 (0:00:01.537)       0:00:44.687 ********** 
2025-07-29 13:54:22,427 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:22,445 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:22,458 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:22,863 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:22,872 p=189336 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 13:54:22,872 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:22 +0000 (0:00:00.484)       0:00:45.172 ********** 
2025-07-29 13:54:22,927 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:22,928 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:22,941 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:23,150 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:23,159 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 13:54:23,159 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:23 +0000 (0:00:00.286)       0:00:45.459 ********** 
2025-07-29 13:54:23,211 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:23,212 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:23,224 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:23,428 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:23,473 p=189336 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 13:54:23,473 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:23 +0000 (0:00:00.313)       0:00:45.773 ********** 
2025-07-29 13:54:23,512 p=189336 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 13:54:23,527 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:23,528 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:23,541 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:23,549 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:23,550 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:23 +0000 (0:00:00.076)       0:00:45.849 ********** 
2025-07-29 13:54:23,588 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:54:24,536 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 13:54:24,680 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 13:54:24,699 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 13:54:24,707 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 13:54:24,708 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:24 +0000 (0:00:01.158)       0:00:47.007 ********** 
2025-07-29 13:54:24,730 p=189336 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 13:54:24,746 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:54:25,003 p=189336 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 13:54:25,017 p=189336 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 13:54:25,045 p=189336 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 13:54:25,054 p=189336 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 13:54:25,055 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:25 +0000 (0:00:00.346)       0:00:47.354 ********** 
2025-07-29 13:54:25,078 p=189336 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 13:54:25,086 p=189336 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 13:54:25,094 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 13:54:25,357 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:54:25,368 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:54:25,385 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 13:54:25,616 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:54:25,622 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:54:25,651 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 13:54:25,661 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 13:54:25,662 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:25 +0000 (0:00:00.606)       0:00:47.961 ********** 
2025-07-29 13:54:25,719 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:25,720 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:25,732 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:26,628 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:26,637 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 13:54:26,637 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:26 +0000 (0:00:00.975)       0:00:48.937 ********** 
2025-07-29 13:54:26,691 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:26,692 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:26,705 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:27,612 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:27,621 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 13:54:27,621 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:27 +0000 (0:00:00.983)       0:00:49.921 ********** 
2025-07-29 13:54:27,901 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:27,925 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:27,939 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:27,951 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,164 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,192 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,201 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,215 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,424 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,507 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,507 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,508 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,679 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,729 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,744 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,744 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:28,941 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:28,991 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:28,998 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:29,001 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 13:54:29,204 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:29,251 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:29,256 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:29,297 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 13:54:29,307 p=189336 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:54:29,307 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:29 +0000 (0:00:01.685)       0:00:51.607 ********** 
2025-07-29 13:54:29,347 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 13:54:29,361 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 13:54:29,364 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 13:54:29,378 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 13:54:29,411 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Начало сборки Slurm] ****************************************************************************************************************************************************************************************************************
2025-07-29 13:54:29,411 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:29 +0000 (0:00:00.104)       0:00:51.711 ********** 
2025-07-29 13:54:29,453 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm01"
2025-07-29 13:54:29,469 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm02"
2025-07-29 13:54:29,471 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn01"
2025-07-29 13:54:29,486 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn02"
2025-07-29 13:54:29,495 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Очистка старой сборки] **************************************************************************************************************************************************************************************************************
2025-07-29 13:54:29,495 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:29 +0000 (0:00:00.083)       0:00:51.795 ********** 
2025-07-29 13:54:29,544 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:29,545 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:29,557 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:30,234 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:30,245 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки] ***********************************************************************************************************************************************************************************
2025-07-29 13:54:30,245 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:30 +0000 (0:00:00.749)       0:00:52.545 ********** 
2025-07-29 13:54:30,296 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:30,297 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:30,310 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:38,844 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:38,853 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание временной директории для сборки] *******************************************************************************************************************************************************************************************
2025-07-29 13:54:38,853 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:38 +0000 (0:00:08.608)       0:01:01.153 ********** 
2025-07-29 13:54:38,909 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:38,910 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:38,923 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:39,135 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:39,144 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка существования исходников] **************************************************************************************************************************************************************************************************
2025-07-29 13:54:39,145 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:39 +0000 (0:00:00.291)       0:01:01.444 ********** 
2025-07-29 13:54:39,201 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:39,203 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:39,214 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:39,426 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 13:54:39,438 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Скачивание исходников Slurm 25.05.1] ************************************************************************************************************************************************************************************************
2025-07-29 13:54:39,438 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:39 +0000 (0:00:00.293)       0:01:01.737 ********** 
2025-07-29 13:54:39,475 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:39,492 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:39,504 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:42,322 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:42,335 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Извлечение исходников Slurm] ********************************************************************************************************************************************************************************************************
2025-07-29 13:54:42,335 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:42 +0000 (0:00:02.897)       0:01:04.635 ********** 
2025-07-29 13:54:42,373 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:42,391 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:42,400 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:54:48,035 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:54:48,044 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой] *****************************************************************************************************************************************************************************************
2025-07-29 13:54:48,044 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:54:48 +0000 (0:00:05.709)       0:01:10.344 ********** 
2025-07-29 13:54:48,098 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:54:48,099 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:54:48,110 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 13:55:15,197 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 13:55:15,207 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...)] *********************************************************************************************************************************************************************************************
2025-07-29 13:55:15,207 p=189336 u=master n=ansible | Tuesday 29 July 2025  13:55:15 +0000 (0:00:27.162)       0:01:37.507 ********** 
2025-07-29 13:55:15,242 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 13:55:15,261 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 13:55:15,275 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:00:04,189 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:04,209 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на master] **********************************************************************************************************************************************************************************************************
2025-07-29 14:00:04,209 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:04 +0000 (0:04:49.001)       0:06:26.508 ********** 
2025-07-29 14:00:04,245 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:00:04,262 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:00:04,274 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:00:04,473 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:04,484 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка development файлов (headers для Pyxis)] ***********************************************************************************************************************************************************************************
2025-07-29 14:00:04,484 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:04 +0000 (0:00:00.275)       0:06:26.784 ********** 
2025-07-29 14:00:04,522 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:00:04,539 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:00:04,551 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:00:04,741 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:04,750 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание директории Slurm на всех узлах] ********************************************************************************************************************************************************************************************
2025-07-29 14:00:04,750 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:04 +0000 (0:00:00.265)       0:06:27.050 ********** 
2025-07-29 14:00:05,022 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:05,860 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:00:06,037 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:00:06,088 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:00:06,096 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание полного архива Slurm в NFS] ************************************************************************************************************************************************************************************************
2025-07-29 14:00:06,096 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:06 +0000 (0:00:01.346)       0:06:28.396 ********** 
2025-07-29 14:00:06,150 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:00:06,151 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:00:06,162 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:00:07,404 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:07,413 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат создания архива] **********************************************************************************************************************************************************************************************************
2025-07-29 14:00:07,413 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:07 +0000 (0:00:01.316)       0:06:29.713 ********** 
2025-07-29 14:00:07,454 p=189336 u=master n=ansible | ok: [sm01] => 
  archive_creation.stdout_lines:
  - === СОЗДАНИЕ АРХИВА SLURM + HEADERS ===
  - Копируем binaries...
  - '✅ Headers включены в архив: 6 файлов'
  - === АРХИВ ГОТОВ ===
  - 'Binaries: 20 файлов'
  - 'Daemons: 6 файлов'
  - 'Headers: 6 файлов'
  - 'Libs: 6 файлов'
2025-07-29 14:00:07,470 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:00:07,471 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:00:07,482 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:00:07,491 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Ожидание готовности архива] *********************************************************************************************************************************************************************************************************
2025-07-29 14:00:07,491 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:07 +0000 (0:00:00.077)       0:06:29.791 ********** 
2025-07-29 14:00:07,516 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:00:07,933 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:00:07,949 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:00:07,953 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:00:07,962 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива] **********************************************************************************************************************************************************************************************
2025-07-29 14:00:07,962 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:07 +0000 (0:00:00.471)       0:06:30.262 ********** 
2025-07-29 14:00:07,983 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:00:27,184 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:00:27,238 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:00:29,512 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:00:29,521 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат установки на узлах] *******************************************************************************************************************************************************************************************************
2025-07-29 14:00:29,521 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:29 +0000 (0:00:21.558)       0:06:51.821 ********** 
2025-07-29 14:00:29,544 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:00:29,577 p=189336 u=master n=ansible | ok: [sm02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 14:00:29,580 p=189336 u=master n=ansible | ok: [cn01] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 14:00:29,595 p=189336 u=master n=ansible | ok: [cn02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 14:00:29,606 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm] ********************************************************************************************************************************************************************
2025-07-29 14:00:29,606 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:29 +0000 (0:00:00.084)       0:06:51.905 ********** 
2025-07-29 14:00:29,892 p=189336 u=master n=ansible | ok: [sm01] => (item=sinfo)
2025-07-29 14:00:29,931 p=189336 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-29 14:00:29,936 p=189336 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-29 14:00:29,952 p=189336 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-29 14:00:30,182 p=189336 u=master n=ansible | ok: [sm01] => (item=squeue)
2025-07-29 14:00:30,222 p=189336 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-29 14:00:30,232 p=189336 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-29 14:00:30,246 p=189336 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-29 14:00:30,436 p=189336 u=master n=ansible | ok: [sm01] => (item=scancel)
2025-07-29 14:00:30,493 p=189336 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-29 14:00:30,518 p=189336 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-29 14:00:30,528 p=189336 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-29 14:00:30,690 p=189336 u=master n=ansible | ok: [sm01] => (item=sbatch)
2025-07-29 14:00:30,762 p=189336 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-29 14:00:30,776 p=189336 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-29 14:00:30,795 p=189336 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-29 14:00:30,950 p=189336 u=master n=ansible | ok: [sm01] => (item=salloc)
2025-07-29 14:00:31,021 p=189336 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-29 14:00:31,029 p=189336 u=master n=ansible | ok: [cn02] => (item=salloc)
2025-07-29 14:00:31,070 p=189336 u=master n=ansible | ok: [cn01] => (item=salloc)
2025-07-29 14:00:31,209 p=189336 u=master n=ansible | ok: [sm01] => (item=srun)
2025-07-29 14:00:31,286 p=189336 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-29 14:00:31,330 p=189336 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-29 14:00:31,383 p=189336 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-29 14:00:31,467 p=189336 u=master n=ansible | ok: [sm01] => (item=sacct)
2025-07-29 14:00:31,543 p=189336 u=master n=ansible | ok: [cn02] => (item=sacct)
2025-07-29 14:00:31,639 p=189336 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-29 14:00:31,643 p=189336 u=master n=ansible | ok: [cn01] => (item=sacct)
2025-07-29 14:00:31,725 p=189336 u=master n=ansible | ok: [sm01] => (item=scontrol)
2025-07-29 14:00:31,818 p=189336 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-29 14:00:31,912 p=189336 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-29 14:00:31,928 p=189336 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-29 14:00:31,981 p=189336 u=master n=ansible | ok: [sm01] => (item=sprio)
2025-07-29 14:00:32,093 p=189336 u=master n=ansible | ok: [cn02] => (item=sprio)
2025-07-29 14:00:32,171 p=189336 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-29 14:00:32,206 p=189336 u=master n=ansible | ok: [cn01] => (item=sprio)
2025-07-29 14:00:32,253 p=189336 u=master n=ansible | ok: [sm01] => (item=smap)
2025-07-29 14:00:32,346 p=189336 u=master n=ansible | ok: [cn02] => (item=smap)
2025-07-29 14:00:32,432 p=189336 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-29 14:00:32,460 p=189336 u=master n=ansible | ok: [cn01] => (item=smap)
2025-07-29 14:00:32,507 p=189336 u=master n=ansible | ok: [sm01] => (item=sdiag)
2025-07-29 14:00:32,639 p=189336 u=master n=ansible | ok: [cn02] => (item=sdiag)
2025-07-29 14:00:32,690 p=189336 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-29 14:00:32,796 p=189336 u=master n=ansible | ok: [sm01] => (item=sstat)
2025-07-29 14:00:32,874 p=189336 u=master n=ansible | ok: [cn01] => (item=sdiag)
2025-07-29 14:00:32,921 p=189336 u=master n=ansible | ok: [cn02] => (item=sstat)
2025-07-29 14:00:32,948 p=189336 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-29 14:00:33,054 p=189336 u=master n=ansible | ok: [sm01] => (item=sreport)
2025-07-29 14:00:33,141 p=189336 u=master n=ansible | ok: [cn01] => (item=sstat)
2025-07-29 14:00:33,182 p=189336 u=master n=ansible | ok: [cn02] => (item=sreport)
2025-07-29 14:00:33,206 p=189336 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-29 14:00:33,313 p=189336 u=master n=ansible | ok: [sm01] => (item=sacctmgr)
2025-07-29 14:00:33,407 p=189336 u=master n=ansible | ok: [cn01] => (item=sreport)
2025-07-29 14:00:33,438 p=189336 u=master n=ansible | ok: [cn02] => (item=sacctmgr)
2025-07-29 14:00:33,455 p=189336 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-29 14:00:33,588 p=189336 u=master n=ansible | ok: [sm01] => (item=sattach)
2025-07-29 14:00:33,674 p=189336 u=master n=ansible | ok: [cn01] => (item=sacctmgr)
2025-07-29 14:00:33,704 p=189336 u=master n=ansible | ok: [cn02] => (item=sattach)
2025-07-29 14:00:33,709 p=189336 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-29 14:00:33,842 p=189336 u=master n=ansible | ok: [sm01] => (item=sbcast)
2025-07-29 14:00:33,928 p=189336 u=master n=ansible | ok: [cn01] => (item=sattach)
2025-07-29 14:00:33,961 p=189336 u=master n=ansible | ok: [cn02] => (item=sbcast)
2025-07-29 14:00:33,962 p=189336 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-29 14:00:34,102 p=189336 u=master n=ansible | ok: [sm01] => (item=sshare)
2025-07-29 14:00:34,187 p=189336 u=master n=ansible | ok: [cn01] => (item=sbcast)
2025-07-29 14:00:34,213 p=189336 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-29 14:00:34,219 p=189336 u=master n=ansible | ok: [cn02] => (item=sshare)
2025-07-29 14:00:34,363 p=189336 u=master n=ansible | ok: [sm01] => (item=sview)
2025-07-29 14:00:34,369 p=189336 u=master n=ansible | [WARNING]: Cannot set fs attributes on a non-existent symlink target. follow should be set to False to avoid this.

2025-07-29 14:00:34,442 p=189336 u=master n=ansible | ok: [cn01] => (item=sshare)
2025-07-29 14:00:34,464 p=189336 u=master n=ansible | ok: [sm02] => (item=sview)
2025-07-29 14:00:34,479 p=189336 u=master n=ansible | ok: [cn02] => (item=sview)
2025-07-29 14:00:34,691 p=189336 u=master n=ansible | ok: [cn01] => (item=sview)
2025-07-29 14:00:34,705 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для системных демонов Slurm] **************************************************************************************************************************************************************************
2025-07-29 14:00:34,705 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:34 +0000 (0:00:05.099)       0:06:57.005 ********** 
2025-07-29 14:00:34,998 p=189336 u=master n=ansible | ok: [sm02] => (item=slurmctld)
2025-07-29 14:00:35,014 p=189336 u=master n=ansible | ok: [sm01] => (item=slurmctld)
2025-07-29 14:00:35,016 p=189336 u=master n=ansible | ok: [cn01] => (item=slurmctld)
2025-07-29 14:00:35,249 p=189336 u=master n=ansible | ok: [sm02] => (item=slurmd)
2025-07-29 14:00:35,253 p=189336 u=master n=ansible | ok: [cn02] => (item=slurmctld)
2025-07-29 14:00:35,303 p=189336 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-29 14:00:35,306 p=189336 u=master n=ansible | ok: [sm01] => (item=slurmd)
2025-07-29 14:00:35,503 p=189336 u=master n=ansible | ok: [sm02] => (item=slurmdbd)
2025-07-29 14:00:35,515 p=189336 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-29 14:00:35,558 p=189336 u=master n=ansible | ok: [cn01] => (item=slurmdbd)
2025-07-29 14:00:35,570 p=189336 u=master n=ansible | ok: [sm01] => (item=slurmdbd)
2025-07-29 14:00:35,757 p=189336 u=master n=ansible | ok: [sm02] => (item=slurmrestd)
2025-07-29 14:00:35,781 p=189336 u=master n=ansible | ok: [cn02] => (item=slurmdbd)
2025-07-29 14:00:35,822 p=189336 u=master n=ansible | ok: [cn01] => (item=slurmrestd)
2025-07-29 14:00:35,828 p=189336 u=master n=ansible | ok: [sm01] => (item=slurmrestd)
2025-07-29 14:00:36,009 p=189336 u=master n=ansible | ok: [sm02] => (item=slurmstepd)
2025-07-29 14:00:36,037 p=189336 u=master n=ansible | ok: [cn02] => (item=slurmrestd)
2025-07-29 14:00:36,081 p=189336 u=master n=ansible | ok: [cn01] => (item=slurmstepd)
2025-07-29 14:00:36,086 p=189336 u=master n=ansible | ok: [sm01] => (item=slurmstepd)
2025-07-29 14:00:36,291 p=189336 u=master n=ansible | ok: [cn02] => (item=slurmstepd)
2025-07-29 14:00:36,301 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Обновление библиотечного кеша] ******************************************************************************************************************************************************************************************************
2025-07-29 14:00:36,301 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:36 +0000 (0:00:01.595)       0:06:58.601 ********** 
2025-07-29 14:00:36,810 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:00:37,169 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:00:37,174 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:37,384 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:00:37,393 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка версии Slurm] **************************************************************************************************************************************************************************************************************
2025-07-29 14:00:37,394 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:37 +0000 (0:00:01.092)       0:06:59.693 ********** 
2025-07-29 14:00:37,693 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:00:37,695 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:37,721 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:00:37,766 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:00:37,777 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка поддержки JWT] *************************************************************************************************************************************************************************************************************
2025-07-29 14:00:37,778 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:37 +0000 (0:00:00.384)       0:07:00.077 ********** 
2025-07-29 14:00:38,050 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:38,066 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:00:38,098 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:00:38,104 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:00:38,113 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка headers (КРИТИЧНО ДЛЯ PYXIS!)] *********************************************************************************************************************************************************************************************
2025-07-29 14:00:38,113 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:38 +0000 (0:00:00.335)       0:07:00.412 ********** 
2025-07-29 14:00:38,384 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:38,399 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:00:38,425 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:00:38,441 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:00:38,451 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результаты проверки] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:00:38,452 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:38 +0000 (0:00:00.338)       0:07:00.751 ********** 
2025-07-29 14:00:38,491 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm успешно установлен на sm01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 13:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:00:38,508 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm успешно установлен на sm02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 17:00 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:00:38,511 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "✅ Slurm успешно установлен на cn01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 17:00 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:00:38,526 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "✅ Slurm успешно установлен на cn02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 17:00 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:00:38,535 p=189336 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Сборка завершена успешно] ***********************************************************************************************************************************************************************************************************
2025-07-29 14:00:38,535 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:38 +0000 (0:00:00.083)       0:07:00.834 ********** 
2025-07-29 14:00:38,578 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm01"
2025-07-29 14:00:38,595 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm02"
2025-07-29 14:00:38,598 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn01"
2025-07-29 14:00:38,614 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn02"
2025-07-29 14:00:38,727 p=189336 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:00:38,727 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:38 +0000 (0:00:00.192)       0:07:01.027 ********** 
2025-07-29 14:00:43,050 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:43,058 p=189336 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:00:43,058 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:43 +0000 (0:00:04.331)       0:07:05.358 ********** 
2025-07-29 14:00:43,328 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:43,378 p=189336 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] ***************************************************************************************************************************************************************************************************************************************
2025-07-29 14:00:43,399 p=189336 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Начало настройки Slurm Master] ****************************************************************************************************************************************************************************************************
2025-07-29 14:00:43,399 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:43 +0000 (0:00:00.341)       0:07:05.699 ********** 
2025-07-29 14:00:43,453 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F3AF Настройка Slurm Master узла: sm01\n\U0001F4CD Роль: primary\n\U0001F310 IP: 10.20.90.240"
2025-07-29 14:00:43,462 p=189336 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка MariaDB для Slurm] ******************************************************************************************************************************************************************************************************
2025-07-29 14:00:43,462 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:43 +0000 (0:00:00.062)       0:07:05.762 ********** 
2025-07-29 14:00:43,522 p=189336 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/mariadb.yml for sm01
2025-07-29 14:00:43,530 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка работы свежей MariaDB] ********************************************************************************************************************************************************************************************************
2025-07-29 14:00:43,530 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:43 +0000 (0:00:00.068)       0:07:05.830 ********** 
2025-07-29 14:00:43,815 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:43,827 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Показать версию MariaDB] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:00:43,827 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:43 +0000 (0:00:00.296)       0:07:06.126 ********** 
2025-07-29 14:00:43,879 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB версия: 10.11.13-MariaDB-0ubuntu0.24.04.1"
2025-07-29 14:00:43,888 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание пользователя и базы Slurm (исправленная версия)] ******************************************************************************************************************************************************************************
2025-07-29 14:00:43,888 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:43 +0000 (0:00:00.061)       0:07:06.188 ********** 
2025-07-29 14:00:46,018 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:46,027 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Результат создания пользователя] *******************************************************************************************************************************************************************************************************
2025-07-29 14:00:46,028 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:46 +0000 (0:00:02.139)       0:07:08.327 ********** 
2025-07-29 14:00:46,080 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Создание пользователя: False"
2025-07-29 14:00:46,089 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Тест подключения пользователя Slurm] ***************************************************************************************************************************************************************************************************
2025-07-29 14:00:46,089 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:46 +0000 (0:00:00.061)       0:07:08.389 ********** 
2025-07-29 14:00:46,747 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:46,757 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка списка баз данных] ************************************************************************************************************************************************************************************************************
2025-07-29 14:00:46,757 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:46 +0000 (0:00:00.667)       0:07:09.056 ********** 
2025-07-29 14:00:47,068 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:47,077 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание конфига оптимизации для Slurm] ************************************************************************************************************************************************************************************************
2025-07-29 14:00:47,077 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:47 +0000 (0:00:00.320)       0:07:09.377 ********** 
2025-07-29 14:00:47,644 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:47,659 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек] ********************************************************************************************************************************************************************************************
2025-07-29 14:00:47,659 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:47 +0000 (0:00:00.582)       0:07:09.959 ********** 
2025-07-29 14:00:55,389 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:55,401 p=189336 u=master n=ansible | TASK [slurm_master : [MARIADB] Финальный результат] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:00:55,402 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:55 +0000 (0:00:07.742)       0:07:17.701 ********** 
2025-07-29 14:00:55,459 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB настройка завершена:\n\U0001F464 Пользователь: slurm\n\U0001F4CA База: slurm_acct_db\n✅ Подключение: False\n\n\U0001F4CB Доступные базы:\nDatabase\ninformation_schema\nslurm_acct_db\n\n\U0001F389 ГОТОВ ДЛЯ SLURM!"
2025-07-29 14:00:55,469 p=189336 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание конфигурации Slurm] ******************************************************************************************************************************************************************************************************
2025-07-29 14:00:55,469 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:55 +0000 (0:00:00.067)       0:07:17.769 ********** 
2025-07-29 14:00:55,498 p=189336 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/config.yml for sm01
2025-07-29 14:00:55,513 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание основного конфига slurm.conf] **************************************************************************************************************************************************************************************************
2025-07-29 14:00:55,513 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:55 +0000 (0:00:00.044)       0:07:17.813 ********** 
2025-07-29 14:00:56,334 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:00:56,343 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание конфига slurmdbd.conf] *********************************************************************************************************************************************************************************************************
2025-07-29 14:00:56,344 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:56 +0000 (0:00:00.830)       0:07:18.643 ********** 
2025-07-29 14:00:56,939 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:56,948 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание gres.conf для GPU] *************************************************************************************************************************************************************************************************************
2025-07-29 14:00:56,948 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:56 +0000 (0:00:00.604)       0:07:19.248 ********** 
2025-07-29 14:00:57,584 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:57,592 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание cgroup.conf] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:00:57,593 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:57 +0000 (0:00:00.644)       0:07:19.892 ********** 
2025-07-29 14:00:58,156 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:58,165 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание директории для конфигов на NFS] ************************************************************************************************************************************************************************************************
2025-07-29 14:00:58,166 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:58 +0000 (0:00:00.573)       0:07:20.465 ********** 
2025-07-29 14:00:58,434 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:58,443 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Копирование конфигов на NFS для распространения] ****************************************************************************************************************************************************************************************
2025-07-29 14:00:58,443 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:58 +0000 (0:00:00.277)       0:07:20.743 ********** 
2025-07-29 14:00:58,757 p=189336 u=master n=ansible | changed: [sm01] => (item=slurm.conf)
2025-07-29 14:00:59,041 p=189336 u=master n=ansible | ok: [sm01] => (item=cgroup.conf)
2025-07-29 14:00:59,324 p=189336 u=master n=ansible | ok: [sm01] => (item=gres.conf)
2025-07-29 14:00:59,337 p=189336 u=master n=ansible | TASK [slurm_master : [CONFIG] Конфигурация создана] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:00:59,337 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:59 +0000 (0:00:00.894)       0:07:21.637 ********** 
2025-07-29 14:00:59,360 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Конфигурация Slurm:\n✅ slurm.conf создан\n✅ gres.conf создан (AutoDetect=nvml)\n✅ cgroup.conf создан\n✅ slurmdbd.conf создан\n\U0001F4E4 Файлы скопированы в /sw/config/ для распространения"
2025-07-29 14:00:59,368 p=189336 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка systemd сервисов] *******************************************************************************************************************************************************************************************************
2025-07-29 14:00:59,368 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:59 +0000 (0:00:00.031)       0:07:21.668 ********** 
2025-07-29 14:00:59,395 p=189336 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/services.yml for sm01
2025-07-29 14:00:59,408 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmctld] **************************************************************************************************************************************************************************************************
2025-07-29 14:00:59,408 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:59 +0000 (0:00:00.039)       0:07:21.708 ********** 
2025-07-29 14:00:59,978 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:00:59,989 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmdbd] ***************************************************************************************************************************************************************************************************
2025-07-29 14:00:59,989 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:00:59 +0000 (0:00:00.580)       0:07:22.289 ********** 
2025-07-29 14:01:00,584 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:01:00,593 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Перезагрузка systemd daemon] **********************************************************************************************************************************************************************************************************
2025-07-29 14:01:00,593 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:00 +0000 (0:00:00.604)       0:07:22.893 ********** 
2025-07-29 14:01:01,389 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:01:01,398 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmdbd (сначала база)] *******************************************************************************************************************************************************************************************************
2025-07-29 14:01:01,398 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:01 +0000 (0:00:00.804)       0:07:23.698 ********** 
2025-07-29 14:01:01,907 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:01:01,917 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Пауза после запуска slurmdbd] *********************************************************************************************************************************************************************************************************
2025-07-29 14:01:01,917 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:01 +0000 (0:00:00.518)       0:07:24.217 ********** 
2025-07-29 14:01:01,967 p=189336 u=master n=ansible | Pausing for 3 seconds
2025-07-29 14:01:01,968 p=189336 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 14:01:04,973 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:01:04,984 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmctld (после базы)] ********************************************************************************************************************************************************************************************************
2025-07-29 14:01:04,984 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:04 +0000 (0:00:03.067)       0:07:27.284 ********** 
2025-07-29 14:01:05,471 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:01:05,483 p=189336 u=master n=ansible | TASK [slurm_master : [SERVICES] Сервисы запущены] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:01:05,483 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:05 +0000 (0:00:00.499)       0:07:27.783 ********** 
2025-07-29 14:01:05,504 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F39B️ Slurm сервисы:\n✅ slurmdbd запущен\n✅ slurmctld запущен\n\U0001F527 Проверьте: systemctl status slurmctld slurmdbd"
2025-07-29 14:01:05,550 p=189336 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Завершение настройки] *************************************************************************************************************************************************************************************************************
2025-07-29 14:01:05,551 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:05 +0000 (0:00:00.067)       0:07:27.850 ********** 
2025-07-29 14:01:05,604 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm Master настроен!\n\U0001F527 Кластер: hpc-cluster\n\U0001F39B️ Controller: sm01:6817\n\U0001F4BE Database: включена"
2025-07-29 14:01:05,630 p=189336 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmctld] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:01:05,630 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:05 +0000 (0:00:00.079)       0:07:27.929 ********** 
2025-07-29 14:01:09,100 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:01:09,120 p=189336 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] **************************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:09,163 p=189336 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:01:09,163 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:09 +0000 (0:00:03.533)       0:07:31.463 ********** 
2025-07-29 14:01:09,187 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:01:09,199 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:01:09,210 p=189336 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:09,210 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:09 +0000 (0:00:00.046)       0:07:31.510 ********** 
2025-07-29 14:01:41,945 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:42,007 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:42,016 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:01:42,016 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:42 +0000 (0:00:32.806)       0:08:04.316 ********** 
2025-07-29 14:01:43,079 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:43,145 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:43,154 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:43,155 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:43 +0000 (0:00:01.138)       0:08:05.454 ********** 
2025-07-29 14:01:43,542 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:43,555 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:43,567 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:01:43,567 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:43 +0000 (0:00:00.412)       0:08:05.867 ********** 
2025-07-29 14:01:43,913 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:43,930 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:43,939 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:43,939 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:43 +0000 (0:00:00.372)       0:08:06.239 ********** 
2025-07-29 14:01:44,954 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:44,981 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:44,990 p=189336 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:01:44,990 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:44 +0000 (0:00:01.050)       0:08:07.290 ********** 
2025-07-29 14:01:46,629 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:01:46,638 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:01:46,647 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:01:46,648 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:46 +0000 (0:00:01.657)       0:08:08.947 ********** 
2025-07-29 14:01:46,669 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:46,681 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:46,690 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:01:46,691 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:46 +0000 (0:00:00.042)       0:08:08.990 ********** 
2025-07-29 14:01:46,975 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:01:46,982 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:01:47,230 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:01:47,233 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:01:47,487 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:01:47,488 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:01:47,739 p=189336 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:01:47,747 p=189336 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:01:47,761 p=189336 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:01:47,761 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:47 +0000 (0:00:01.070)       0:08:10.060 ********** 
2025-07-29 14:01:48,032 p=189336 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:01:48,047 p=189336 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:01:48,056 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:01:48,057 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:48 +0000 (0:00:00.295)       0:08:10.356 ********** 
2025-07-29 14:01:48,725 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:48,726 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:48,735 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:01:48,735 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:48 +0000 (0:00:00.678)       0:08:11.035 ********** 
2025-07-29 14:01:48,760 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:48,772 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:48,781 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:01:48,781 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:48 +0000 (0:00:00.046)       0:08:11.081 ********** 
2025-07-29 14:01:50,732 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:01:50,848 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:01:50,857 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:50,857 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:50 +0000 (0:00:02.075)       0:08:13.157 ********** 
2025-07-29 14:01:51,131 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:51,137 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:51,148 p=189336 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:01:51,149 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:51 +0000 (0:00:00.291)       0:08:13.448 ********** 
2025-07-29 14:01:51,174 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:01:51,189 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:01:51,198 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:51,198 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:51 +0000 (0:00:00.049)       0:08:13.498 ********** 
2025-07-29 14:01:52,214 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:52,265 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:52,274 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,274 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:01.076)       0:08:14.574 ********** 
2025-07-29 14:01:52,566 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:52,568 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:52,580 p=189336 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,580 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:00.306)       0:08:14.880 ********** 
2025-07-29 14:01:52,605 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:01:52,621 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:01:52,629 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,629 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:00.049)       0:08:14.929 ********** 
2025-07-29 14:01:52,651 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:52,663 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:52,672 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,672 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:00.042)       0:08:14.972 ********** 
2025-07-29 14:01:52,694 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:01:52,700 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:01:52,702 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:52,711 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:01:52,714 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:01:52,716 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:52,725 p=189336 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,725 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:00.052)       0:08:15.025 ********** 
2025-07-29 14:01:52,747 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:01:52,749 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:01:52,750 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:52,759 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:01:52,762 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:01:52,763 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:52,772 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,772 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:00.047)       0:08:15.072 ********** 
2025-07-29 14:01:52,907 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:01:52,908 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:01:52,911 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:01:52,913 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:01:52,916 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:01:52,919 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:01:52,920 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:01:52,920 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:52,922 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:01:52,925 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:01:52,927 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:01:52,930 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:01:52,933 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:01:52,934 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:52,945 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:01:52,946 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:52 +0000 (0:00:00.173)       0:08:15.245 ********** 
2025-07-29 14:01:53,008 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:53,021 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:53,030 p=189336 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:01:53,030 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:53 +0000 (0:00:00.084)       0:08:15.330 ********** 
2025-07-29 14:01:53,052 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:53,064 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:53,073 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:01:53,073 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:53 +0000 (0:00:00.042)       0:08:15.373 ********** 
2025-07-29 14:01:53,094 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:53,106 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:53,117 p=189336 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:01:53,118 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:53 +0000 (0:00:00.044)       0:08:15.417 ********** 
2025-07-29 14:01:53,139 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:53,151 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:53,161 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:53,161 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:53 +0000 (0:00:00.043)       0:08:15.460 ********** 
2025-07-29 14:01:54,170 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:54,288 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:54,297 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:01:54,297 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:54 +0000 (0:00:01.136)       0:08:16.597 ********** 
2025-07-29 14:01:54,588 p=189336 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:01:54,615 p=189336 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:01:54,624 p=189336 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:01:54,624 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:54 +0000 (0:00:00.327)       0:08:16.924 ********** 
2025-07-29 14:01:54,912 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:01:54,914 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:01:55,170 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:01:55,201 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:01:55,212 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:01:55,212 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:55 +0000 (0:00:00.588)       0:08:17.512 ********** 
2025-07-29 14:01:55,234 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:55,247 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:55,256 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:01:55,256 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:55 +0000 (0:00:00.043)       0:08:17.555 ********** 
2025-07-29 14:01:55,280 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:55,292 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:55,301 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:01:55,301 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:55 +0000 (0:00:00.045)       0:08:17.601 ********** 
2025-07-29 14:01:55,580 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:55,606 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:55,836 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:55,882 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:56,092 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:56,151 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:56,348 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:56,404 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:56,659 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:01:56,919 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:56,948 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:01:57,215 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:01:57,226 p=189336 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:01:57,226 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:57 +0000 (0:00:01.924)       0:08:19.526 ********** 
2025-07-29 14:01:57,250 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:01:57,263 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:01:57,286 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Начало настройки Slurm Compute узла] ********************************************************************************************************************************************************************************************
2025-07-29 14:01:57,286 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:57 +0000 (0:00:00.060)       0:08:19.586 ********** 
2025-07-29 14:01:57,349 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn01\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-29 14:01:57,367 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn02\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-29 14:01:57,376 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности Slurm binaries] ********************************************************************************************************************************************************************************************
2025-07-29 14:01:57,376 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:57 +0000 (0:00:00.090)       0:08:19.676 ********** 
2025-07-29 14:01:57,678 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:57,683 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:57,692 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование Slurm binaries из NFS] **********************************************************************************************************************************************************************************************
2025-07-29 14:01:57,693 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:57 +0000 (0:00:00.316)       0:08:19.992 ********** 
2025-07-29 14:01:57,714 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:57,726 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:57,735 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности мастер узла] ***********************************************************************************************************************************************************************************************
2025-07-29 14:01:57,735 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:57 +0000 (0:00:00.042)       0:08:20.035 ********** 
2025-07-29 14:01:58,042 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:01:58,069 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:01:58,080 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Предупреждение о мастер узле] ***************************************************************************************************************************************************************************************************
2025-07-29 14:01:58,081 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:58 +0000 (0:00:00.345)       0:08:20.380 ********** 
2025-07-29 14:01:58,125 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:01:58,141 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:01:58,150 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Ожидание конфигурационных файлов на NFS] ****************************************************************************************************************************************************************************************
2025-07-29 14:01:58,150 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:58 +0000 (0:00:00.069)       0:08:20.450 ********** 
2025-07-29 14:01:58,421 p=189336 u=master n=ansible | ok: [cn01] => (item=slurm.conf)
2025-07-29 14:01:58,434 p=189336 u=master n=ansible | ok: [cn02] => (item=slurm.conf)
2025-07-29 14:01:58,672 p=189336 u=master n=ansible | ok: [cn01] => (item=cgroup.conf)
2025-07-29 14:01:58,680 p=189336 u=master n=ansible | ok: [cn02] => (item=cgroup.conf)
2025-07-29 14:01:58,924 p=189336 u=master n=ansible | ok: [cn01] => (item=gres.conf)
2025-07-29 14:01:58,935 p=189336 u=master n=ansible | ok: [cn02] => (item=gres.conf)
2025-07-29 14:01:58,946 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование конфигурационных файлов из NFS] *************************************************************************************************************************************************************************************
2025-07-29 14:01:58,946 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:01:58 +0000 (0:00:00.796)       0:08:21.246 ********** 
2025-07-29 14:01:59,303 p=189336 u=master n=ansible | changed: [cn01] => (item=slurm.conf)
2025-07-29 14:01:59,333 p=189336 u=master n=ansible | changed: [cn02] => (item=slurm.conf)
2025-07-29 14:01:59,724 p=189336 u=master n=ansible | ok: [cn01] => (item=cgroup.conf)
2025-07-29 14:01:59,862 p=189336 u=master n=ansible | ok: [cn02] => (item=cgroup.conf)
2025-07-29 14:02:00,420 p=189336 u=master n=ansible | ok: [cn01] => (item=gres.conf)
2025-07-29 14:02:00,422 p=189336 u=master n=ansible | ok: [cn02] => (item=gres.conf)
2025-07-29 14:02:00,434 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на команды] ***************************************************************************************************************************************************************************************
2025-07-29 14:02:00,434 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:00 +0000 (0:00:01.488)       0:08:22.734 ********** 
2025-07-29 14:02:00,719 p=189336 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-29 14:02:00,736 p=189336 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-29 14:02:00,973 p=189336 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-29 14:02:00,987 p=189336 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-29 14:02:01,229 p=189336 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-29 14:02:01,240 p=189336 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-29 14:02:01,486 p=189336 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-29 14:02:01,496 p=189336 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-29 14:02:01,769 p=189336 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-29 14:02:01,772 p=189336 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-29 14:02:02,023 p=189336 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-29 14:02:02,032 p=189336 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-29 14:02:02,043 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на демоны] ****************************************************************************************************************************************************************************************
2025-07-29 14:02:02,043 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:02 +0000 (0:00:01.608)       0:08:24.343 ********** 
2025-07-29 14:02:02,325 p=189336 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-29 14:02:02,331 p=189336 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-29 14:02:02,343 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка наличия NVIDIA GPU] ****************************************************************************************************************************************************************************************************
2025-07-29 14:02:02,343 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:02 +0000 (0:00:00.300)       0:08:24.643 ********** 
2025-07-29 14:02:02,619 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:02,625 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:02,634 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Результат обнаружения GPU] ******************************************************************************************************************************************************************************************************
2025-07-29 14:02:02,635 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:02 +0000 (0:00:00.291)       0:08:24.934 ********** 
2025-07-29 14:02:02,688 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-29 14:02:02,702 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-29 14:02:02,711 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание systemd unit для slurmd] ***********************************************************************************************************************************************************************************************
2025-07-29 14:02:02,711 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:02 +0000 (0:00:00.076)       0:08:25.011 ********** 
2025-07-29 14:02:04,632 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:02:05,009 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:02:05,018 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Перезагрузка systemd daemon] ****************************************************************************************************************************************************************************************************
2025-07-29 14:02:05,018 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:05 +0000 (0:00:02.307)       0:08:27.318 ********** 
2025-07-29 14:02:05,859 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:05,860 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:05,869 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка cgroup v1/v2] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:05,870 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:05 +0000 (0:00:00.851)       0:08:28.169 ********** 
2025-07-29 14:02:06,175 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:06,185 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:06,194 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Информация о cgroup] ************************************************************************************************************************************************************************************************************
2025-07-29 14:02:06,194 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:06 +0000 (0:00:00.324)       0:08:28.494 ********** 
2025-07-29 14:02:06,250 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-29 14:02:06,266 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-29 14:02:06,274 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание скрипта проверки здоровья узла] ****************************************************************************************************************************************************************************************
2025-07-29 14:02:06,275 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:06 +0000 (0:00:00.080)       0:08:28.574 ********** 
2025-07-29 14:02:07,133 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:07,355 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:07,365 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Запуск и включение slurmd] ******************************************************************************************************************************************************************************************************
2025-07-29 14:02:07,365 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:07 +0000 (0:00:01.090)       0:08:29.665 ********** 
2025-07-29 14:02:07,972 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:02:08,011 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:02:08,018 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:08,018 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:08 +0000 (0:00:00.653)       0:08:30.318 ********** 
2025-07-29 14:02:08,040 p=189336 u=master n=ansible | Pausing for 5 seconds
2025-07-29 14:02:08,041 p=189336 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 14:02:13,046 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:13,059 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка статуса slurmd] ********************************************************************************************************************************************************************************************************
2025-07-29 14:02:13,059 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:13 +0000 (0:00:05.041)       0:08:35.359 ********** 
2025-07-29 14:02:13,533 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:13,550 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:13,559 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка логов slurmd] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:13,559 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:13 +0000 (0:00:00.500)       0:08:35.859 ********** 
2025-07-29 14:02:13,848 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:13,858 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:13,868 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Тест подключения к мастеру] *****************************************************************************************************************************************************************************************************
2025-07-29 14:02:13,868 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:13 +0000 (0:00:00.308)       0:08:36.168 ********** 
2025-07-29 14:02:14,184 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:14,194 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:14,204 p=189336 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Финальный статус узла] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:14,204 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:14 +0000 (0:00:00.336)       0:08:36.504 ********** 
2025-07-29 14:02:14,230 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Slurm Compute узел cn01 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-29T17:02:07.894] error: MPI: Cannot create context for mpi/pmix_v5\n[2025-07-29T17:02:07.895] slurmd started on Tue, 29 Jul 2025 17:02:07 +0300\n[2025-07-29T17:02:07.895] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=14123 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-29 14:02:14,247 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Slurm Compute узел cn02 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-29T17:02:07.959] error: MPI: Cannot create context for mpi/pmix\n[2025-07-29T17:02:07.960] slurmd started on Tue, 29 Jul 2025 17:02:07 +0300\n[2025-07-29T17:02:07.961] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=14031 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-29 14:02:14,292 p=189336 u=master n=ansible | RUNNING HANDLER [slurm_compute : restart slurmd] **********************************************************************************************************************************************************************************************************************
2025-07-29 14:02:14,292 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:14 +0000 (0:00:00.088)       0:08:36.592 ********** 
2025-07-29 14:02:15,126 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:02:15,148 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:02:15,179 p=189336 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ****************************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:15,209 p=189336 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:02:15,209 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:15 +0000 (0:00:00.916)       0:08:37.509 ********** 
2025-07-29 14:02:15,235 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:02:15,245 p=189336 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:15,245 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:15 +0000 (0:00:00.035)       0:08:37.545 ********** 
2025-07-29 14:02:16,919 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:16,928 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:02:16,928 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:16 +0000 (0:00:01.683)       0:08:39.228 ********** 
2025-07-29 14:02:17,991 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:18,000 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:18,000 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:17 +0000 (0:00:01.071)       0:08:40.300 ********** 
2025-07-29 14:02:18,364 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:18,373 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:02:18,373 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:18 +0000 (0:00:00.372)       0:08:40.673 ********** 
2025-07-29 14:02:18,703 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:18,712 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:18,712 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:18 +0000 (0:00:00.339)       0:08:41.012 ********** 
2025-07-29 14:02:19,775 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:19,788 p=189336 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:02:19,788 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:19 +0000 (0:00:01.075)       0:08:42.088 ********** 
2025-07-29 14:02:21,522 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:02:21,532 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:21,532 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:21 +0000 (0:00:01.744)       0:08:43.832 ********** 
2025-07-29 14:02:21,550 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:21,559 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:02:21,560 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:21 +0000 (0:00:00.027)       0:08:43.859 ********** 
2025-07-29 14:02:21,835 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:02:22,086 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:02:22,338 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:02:22,588 p=189336 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:02:22,599 p=189336 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:02:22,599 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:22 +0000 (0:00:01.039)       0:08:44.899 ********** 
2025-07-29 14:02:22,866 p=189336 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:02:22,875 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:02:22,875 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:22 +0000 (0:00:00.276)       0:08:45.175 ********** 
2025-07-29 14:02:23,490 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:23,502 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:02:23,502 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:23 +0000 (0:00:00.627)       0:08:45.802 ********** 
2025-07-29 14:02:23,522 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:23,531 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:02:23,531 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:23 +0000 (0:00:00.028)       0:08:45.831 ********** 
2025-07-29 14:02:25,438 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:02:25,447 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:25,448 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:25 +0000 (0:00:01.916)       0:08:47.747 ********** 
2025-07-29 14:02:25,714 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:25,724 p=189336 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:02:25,724 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:25 +0000 (0:00:00.276)       0:08:48.023 ********** 
2025-07-29 14:02:25,749 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:02:25,758 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:25,758 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:25 +0000 (0:00:00.033)       0:08:48.057 ********** 
2025-07-29 14:02:26,778 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:26,791 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:26,791 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:26 +0000 (0:00:01.032)       0:08:49.090 ********** 
2025-07-29 14:02:27,056 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:27,065 p=189336 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,066 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.274)       0:08:49.365 ********** 
2025-07-29 14:02:27,091 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:02:27,100 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,100 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.034)       0:08:49.400 ********** 
2025-07-29 14:02:27,117 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,126 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,126 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.026)       0:08:49.426 ********** 
2025-07-29 14:02:27,146 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:02:27,147 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:02:27,148 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,158 p=189336 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,158 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.031)       0:08:49.458 ********** 
2025-07-29 14:02:27,178 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:02:27,180 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:02:27,182 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,190 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,190 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.032)       0:08:49.490 ********** 
2025-07-29 14:02:27,280 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:02:27,281 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:02:27,284 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:02:27,287 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:02:27,290 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:02:27,292 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:02:27,293 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,306 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,306 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.115)       0:08:49.606 ********** 
2025-07-29 14:02:27,324 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,334 p=189336 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,334 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.027)       0:08:49.634 ********** 
2025-07-29 14:02:27,351 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,360 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,361 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.026)       0:08:49.660 ********** 
2025-07-29 14:02:27,378 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,387 p=189336 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,387 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.026)       0:08:49.687 ********** 
2025-07-29 14:02:27,404 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:27,413 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:27,413 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:27 +0000 (0:00:00.025)       0:08:49.713 ********** 
2025-07-29 14:02:28,413 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:28,425 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:02:28,425 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:28 +0000 (0:00:01.011)       0:08:50.724 ********** 
2025-07-29 14:02:28,699 p=189336 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:02:28,710 p=189336 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:02:28,710 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:28 +0000 (0:00:00.285)       0:08:51.010 ********** 
2025-07-29 14:02:28,991 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:02:29,250 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:02:29,261 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:29,262 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:29 +0000 (0:00:00.551)       0:08:51.561 ********** 
2025-07-29 14:02:29,281 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:29,290 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:02:29,291 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:29 +0000 (0:00:00.028)       0:08:51.590 ********** 
2025-07-29 14:02:29,309 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:29,318 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:02:29,318 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:29 +0000 (0:00:00.027)       0:08:51.618 ********** 
2025-07-29 14:02:29,601 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:02:29,864 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:02:30,115 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:02:30,371 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:02:30,624 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:02:30,899 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:02:30,951 p=189336 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:02:30,951 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:30 +0000 (0:00:01.632)       0:08:53.251 ********** 
2025-07-29 14:02:30,976 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:02:30,991 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Начало настройки Slurm Login узла] **************************************************************************************************************************************************************************************************
2025-07-29 14:02:30,992 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:30 +0000 (0:00:00.040)       0:08:53.291 ********** 
2025-07-29 14:02:31,016 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F511 Настройка Slurm Login узла: sm02\n\U0001F517 Master: sm01\n\U0001F465 Пользовательский доступ к кластеру"
2025-07-29 14:02:31,025 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Установка пакетов для пользователей] ************************************************************************************************************************************************************************************************
2025-07-29 14:02:31,026 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:31 +0000 (0:00:00.033)       0:08:53.325 ********** 
2025-07-29 14:02:32,954 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:32,964 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание директории Slurm] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:32,964 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:32 +0000 (0:00:01.938)       0:08:55.264 ********** 
2025-07-29 14:02:33,234 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:33,247 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование Slurm клиентских команд из NFS] *****************************************************************************************************************************************************************************************
2025-07-29 14:02:33,247 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:33 +0000 (0:00:00.282)       0:08:55.547 ********** 
2025-07-29 14:02:33,534 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:02:33,543 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результат установки клиентов] *******************************************************************************************************************************************************************************************************
2025-07-29 14:02:33,543 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:33 +0000 (0:00:00.295)       0:08:55.843 ********** 
2025-07-29 14:02:33,567 p=189336 u=master n=ansible | ok: [sm02] => 
  client_install.stdout_lines:
  - Установлено 20 команд
2025-07-29 14:02:33,576 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд] *************************************************************************************************************************************************************************************
2025-07-29 14:02:33,576 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:33 +0000 (0:00:00.033)       0:08:55.876 ********** 
2025-07-29 14:02:33,849 p=189336 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-29 14:02:34,096 p=189336 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-29 14:02:34,347 p=189336 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-29 14:02:34,597 p=189336 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-29 14:02:34,842 p=189336 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-29 14:02:35,088 p=189336 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-29 14:02:35,339 p=189336 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-29 14:02:35,582 p=189336 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-29 14:02:35,879 p=189336 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-29 14:02:36,126 p=189336 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-29 14:02:36,371 p=189336 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-29 14:02:36,617 p=189336 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-29 14:02:36,860 p=189336 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-29 14:02:37,103 p=189336 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-29 14:02:37,358 p=189336 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-29 14:02:37,603 p=189336 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-29 14:02:37,851 p=189336 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-29 14:02:37,866 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Обновление библиотечного кеша] ******************************************************************************************************************************************************************************************************
2025-07-29 14:02:37,866 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:37 +0000 (0:00:04.290)       0:09:00.166 ********** 
2025-07-29 14:02:38,189 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:02:38,201 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Ожидание конфигурационных файлов на NFS] ********************************************************************************************************************************************************************************************
2025-07-29 14:02:38,201 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:38 +0000 (0:00:00.335)       0:09:00.501 ********** 
2025-07-29 14:02:38,476 p=189336 u=master n=ansible | ok: [sm02] => (item=slurm.conf)
2025-07-29 14:02:38,721 p=189336 u=master n=ansible | ok: [sm02] => (item=gres.conf)
2025-07-29 14:02:38,963 p=189336 u=master n=ansible | ok: [sm02] => (item=cgroup.conf)
2025-07-29 14:02:38,974 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование конфигурационных файлов из NFS] *****************************************************************************************************************************************************************************************
2025-07-29 14:02:38,974 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:38 +0000 (0:00:00.772)       0:09:01.274 ********** 
2025-07-29 14:02:39,326 p=189336 u=master n=ansible | changed: [sm02] => (item=slurm.conf)
2025-07-29 14:02:39,632 p=189336 u=master n=ansible | ok: [sm02] => (item=gres.conf)
2025-07-29 14:02:40,112 p=189336 u=master n=ansible | ok: [sm02] => (item=cgroup.conf)
2025-07-29 14:02:40,123 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание пользовательских директорий] ***********************************************************************************************************************************************************************************************
2025-07-29 14:02:40,123 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:40 +0000 (0:00:01.148)       0:09:02.423 ********** 
2025-07-29 14:02:40,408 p=189336 u=master n=ansible | ok: [sm02] => (item=/home/users)
2025-07-29 14:02:40,655 p=189336 u=master n=ansible | ok: [sm02] => (item=/scratch)
2025-07-29 14:02:40,904 p=189336 u=master n=ansible | ok: [sm02] => (item=/projects)
2025-07-29 14:02:40,915 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание профиля Slurm для пользователей] *******************************************************************************************************************************************************************************************
2025-07-29 14:02:40,915 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:40 +0000 (0:00:00.792)       0:09:03.215 ********** 
2025-07-29 14:02:41,537 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:41,546 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Bash completion для Slurm команд] ***************************************************************************************************************************************************************************************************
2025-07-29 14:02:41,547 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:41 +0000 (0:00:00.631)       0:09:03.846 ********** 
2025-07-29 14:02:42,128 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:42,137 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Настройка SSH для пользователей] ****************************************************************************************************************************************************************************************************
2025-07-29 14:02:42,137 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:42 +0000 (0:00:00.590)       0:09:04.437 ********** 
2025-07-29 14:02:42,415 p=189336 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?MaxSessions', 'line': 'MaxSessions 10'})
2025-07-29 14:02:42,655 p=189336 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?PrintMotd', 'line': 'PrintMotd yes'})
2025-07-29 14:02:42,894 p=189336 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?Banner', 'line': 'Banner /etc/ssh/banner'})
2025-07-29 14:02:42,908 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание SSH banner] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:02:42,908 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:42 +0000 (0:00:00.770)       0:09:05.207 ********** 
2025-07-29 14:02:43,497 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:43,507 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Тест Slurm клиентских команд] *******************************************************************************************************************************************************************************************************
2025-07-29 14:02:43,507 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:43 +0000 (0:00:00.598)       0:09:05.806 ********** 
2025-07-29 14:02:43,795 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:43,804 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результаты тестирования] ************************************************************************************************************************************************************************************************************
2025-07-29 14:02:43,805 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:43 +0000 (0:00:00.297)       0:09:06.104 ********** 
2025-07-29 14:02:43,830 p=189336 u=master n=ansible | ok: [sm02] => 
  slurm_test.stdout_lines:
  - === ТЕСТ SLURM КОМАНД ===
  - 'sinfo version: slurm 25.05.1'
  - 'Cluster ping:'
  - Slurmctld(primary) at sm01 is UP
  - 'Cluster info:'
  - PARTITION AVAIL  TIMELIMIT   NODES(A/I/O/T) NODELIST
  - compute*     up   infinite          0/0/2/2 cn[01-02]
2025-07-29 14:02:43,839 p=189336 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Завершение настройки Login узла] ****************************************************************************************************************************************************************************************************
2025-07-29 14:02:43,839 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:43 +0000 (0:00:00.034)       0:09:06.139 ********** 
2025-07-29 14:02:43,896 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm Login узел sm02 настроен!\n\n\U0001F465 Пользователи могут:\n- Подключаться по SSH\n- Запускать задачи: sbatch, srun, salloc\n- Просматривать кластер: sinfo, squeue\n- Управлять задачами: scancel, scontrol\n\n\U0001F4C1 Доступные директории:\n/home/users, /scratch, /projects\n\n\U0001F527 Команды Slurm установлены в /usr/bin/\n\U0001F4CB Конфигурация синхронизирована с sm01\n\U0001F3AF Алиасы и автодополнение настроены\n\n\U0001F680 Login узел готов к работе!"
2025-07-29 14:02:43,932 p=189336 u=master n=ansible | PLAY [ЭТАП 6: Установка контейнеров] **********************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:43,995 p=189336 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:02:43,995 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:43 +0000 (0:00:00.156)       0:09:06.295 ********** 
2025-07-29 14:02:44,034 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 14:02:44,052 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:02:44,053 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:02:44,069 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:02:44,078 p=189336 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:44,078 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:44 +0000 (0:00:00.082)       0:09:06.378 ********** 
2025-07-29 14:02:44,864 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:02:44,878 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:44,900 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:44,927 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:44,939 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:02:44,939 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:44 +0000 (0:00:00.860)       0:09:07.238 ********** 
2025-07-29 14:02:46,063 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:46,064 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:46,139 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:55,993 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:02:56,002 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:56,002 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:56 +0000 (0:00:11.063)       0:09:18.302 ********** 
2025-07-29 14:02:56,369 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:02:56,430 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:56,433 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:56,450 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:56,459 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:02:56,459 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:56 +0000 (0:00:00.456)       0:09:18.759 ********** 
2025-07-29 14:02:56,794 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:02:56,812 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:56,845 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:56,847 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:56,856 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:02:56,857 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:56 +0000 (0:00:00.397)       0:09:19.156 ********** 
2025-07-29 14:02:57,893 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:02:57,922 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:02:57,952 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:02:58,020 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:02:58,029 p=189336 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:02:58,029 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:58 +0000 (0:00:01.172)       0:09:20.329 ********** 
2025-07-29 14:02:59,631 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:02:59,725 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:02:59,763 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:02:59,796 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:02:59,887 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:02:59,887 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:02:59 +0000 (0:00:01.858)       0:09:22.187 ********** 
2025-07-29 14:02:59,928 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:02:59,945 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:02:59,958 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:00,143 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:00,152 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:03:00,152 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:00 +0000 (0:00:00.264)       0:09:22.452 ********** 
2025-07-29 14:03:00,427 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,454 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,464 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,485 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,680 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,724 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,725 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,741 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,934 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,979 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,980 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:00,996 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:03:01,188 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:03:01,251 p=189336 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:03:01,305 p=189336 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:03:01,351 p=189336 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:03:01,361 p=189336 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:03:01,361 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:01 +0000 (0:00:01.208)       0:09:23.661 ********** 
2025-07-29 14:03:01,404 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:01,647 p=189336 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:03:01,662 p=189336 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:03:01,695 p=189336 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:03:01,703 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:03:01,703 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:01 +0000 (0:00:00.342)       0:09:24.003 ********** 
2025-07-29 14:03:01,725 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:02,338 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:02,355 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:02,357 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:02,366 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:03:02,366 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:02 +0000 (0:00:00.663)       0:09:24.666 ********** 
2025-07-29 14:03:02,408 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:02,429 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:02,441 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:02,637 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:02,646 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:02,647 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:02 +0000 (0:00:00.280)       0:09:24.946 ********** 
2025-07-29 14:03:04,590 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:03:04,633 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:04,644 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:04,656 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:04,665 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:04,665 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:04 +0000 (0:00:02.018)       0:09:26.965 ********** 
2025-07-29 14:03:04,958 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:04,972 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:04,989 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:05,938 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:05,947 p=189336 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:05,947 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:05 +0000 (0:00:01.282)       0:09:28.247 ********** 
2025-07-29 14:03:05,988 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 14:03:06,006 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:03:06,009 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:03:06,025 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:03:06,034 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:06,034 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:06 +0000 (0:00:00.086)       0:09:28.334 ********** 
2025-07-29 14:03:07,074 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:07,113 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:07,143 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:07,174 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:07,183 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:07,184 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:07 +0000 (0:00:01.149)       0:09:29.483 ********** 
2025-07-29 14:03:07,465 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:07,469 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:07,495 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:07,511 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:07,520 p=189336 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:07,520 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:07 +0000 (0:00:00.336)       0:09:29.820 ********** 
2025-07-29 14:03:07,562 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:03:07,580 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:03:07,581 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:03:07,596 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:03:07,607 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:03:07,607 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:07 +0000 (0:00:00.086)       0:09:29.907 ********** 
2025-07-29 14:03:07,648 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:07,669 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:07,679 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:08,559 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:08,568 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:03:08,568 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:08 +0000 (0:00:00.961)       0:09:30.868 ********** 
2025-07-29 14:03:08,607 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:03:08,614 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:03:08,627 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:03:08,630 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:03:08,636 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:08,637 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:08,648 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:03:08,650 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:03:08,651 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:08,842 p=189336 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 14:03:09,090 p=189336 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 14:03:09,101 p=189336 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:09,101 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:09 +0000 (0:00:00.532)       0:09:31.401 ********** 
2025-07-29 14:03:09,147 p=189336 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:03:09,200 p=189336 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:03:09,201 p=189336 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:03:09,202 p=189336 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:03:09,210 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:09,211 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:09,226 p=189336 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:03:09,228 p=189336 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:03:09,230 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:09,364 p=189336 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 14:03:09,607 p=189336 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 14:03:09,617 p=189336 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:03:09,618 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:09 +0000 (0:00:00.516)       0:09:31.917 ********** 
2025-07-29 14:03:09,726 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:03:09,729 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:03:09,732 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:03:09,734 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:03:09,739 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:03:09,742 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:03:09,743 p=189336 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:03:09,745 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:03:09,745 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:09,746 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:03:09,749 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:03:09,752 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:03:09,754 p=189336 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:03:09,756 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:09,759 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:03:09,762 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:03:09,765 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:03:09,767 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:03:09,770 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:03:09,773 p=189336 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:03:09,774 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:09,949 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 14:03:10,191 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 14:03:10,432 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 14:03:10,675 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 14:03:10,916 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 14:03:11,157 p=189336 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 14:03:11,173 p=189336 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:03:11,173 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:11 +0000 (0:00:01.555)       0:09:33.473 ********** 
2025-07-29 14:03:11,211 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:11,228 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:11,240 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:11,656 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:11,665 p=189336 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:03:11,666 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:11 +0000 (0:00:00.492)       0:09:33.965 ********** 
2025-07-29 14:03:11,706 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:11,724 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:11,736 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:11,928 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:11,938 p=189336 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:03:11,938 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:11 +0000 (0:00:00.272)       0:09:34.237 ********** 
2025-07-29 14:03:11,975 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:11,996 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:12,009 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:12,203 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:12,212 p=189336 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:03:12,212 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:12 +0000 (0:00:00.274)       0:09:34.512 ********** 
2025-07-29 14:03:12,252 p=189336 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 14:03:12,268 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:12,269 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:12,281 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:12,289 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:12,289 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:12 +0000 (0:00:00.077)       0:09:34.589 ********** 
2025-07-29 14:03:12,313 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:13,317 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:13,392 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:13,413 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:13,422 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:03:13,423 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:13 +0000 (0:00:01.133)       0:09:35.722 ********** 
2025-07-29 14:03:13,446 p=189336 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 14:03:13,466 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:13,730 p=189336 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:03:13,742 p=189336 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:03:13,764 p=189336 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:03:13,775 p=189336 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:03:13,775 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:13 +0000 (0:00:00.352)       0:09:36.075 ********** 
2025-07-29 14:03:13,807 p=189336 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 14:03:13,808 p=189336 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 14:03:13,818 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:14,075 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:03:14,104 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:03:14,116 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:03:14,337 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:03:14,366 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:03:14,371 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:03:14,382 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:14,382 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:14 +0000 (0:00:00.606)       0:09:36.682 ********** 
2025-07-29 14:03:14,424 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:14,442 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:14,454 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:15,355 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:15,364 p=189336 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:03:15,365 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:15 +0000 (0:00:00.982)       0:09:37.664 ********** 
2025-07-29 14:03:15,412 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:15,431 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:15,444 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:16,313 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:16,322 p=189336 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:03:16,322 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:16 +0000 (0:00:00.957)       0:09:38.622 ********** 
2025-07-29 14:03:16,604 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,607 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,643 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,671 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,862 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,863 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,911 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:16,947 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,114 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,120 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,175 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,202 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,369 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,382 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,456 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,465 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,640 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:03:17,651 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:03:17,720 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:03:17,728 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:03:17,892 p=189336 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,909 p=189336 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,978 p=189336 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,984 p=189336 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:03:17,995 p=189336 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:03:17,995 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:17 +0000 (0:00:01.672)       0:09:40.295 ********** 
2025-07-29 14:03:18,035 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 14:03:18,055 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:03:18,056 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:03:18,072 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:03:18,105 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Исправление Pyxis + добавление enroot+caps] *******************************************************************************************************************************************************************************************
2025-07-29 14:03:18,106 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:18 +0000 (0:00:00.110)       0:09:40.405 ********** 
2025-07-29 14:03:18,145 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:03:18,162 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:03:18,163 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:03:18,176 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:03:18,185 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Задание переменных] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:03:18,185 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:18 +0000 (0:00:00.079)       0:09:40.485 ********** 
2025-07-29 14:03:18,266 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:18,284 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:18,285 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:18,298 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:18,307 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Установка libslurm-dev (для headers)] *************************************************************************************************************************************************************************************************
2025-07-29 14:03:18,307 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:18 +0000 (0:00:00.122)       0:09:40.607 ********** 
2025-07-29 14:03:20,275 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:20,344 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:20,412 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:20,482 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:20,494 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Проверка установки Enroot] ************************************************************************************************************************************************************************************************************
2025-07-29 14:03:20,494 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:20 +0000 (0:00:02.186)       0:09:42.794 ********** 
2025-07-29 14:03:20,797 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:20,835 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:20,837 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:20,933 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:20,942 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Установка Enroot] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:20,942 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:20 +0000 (0:00:00.448)       0:09:43.242 ********** 
2025-07-29 14:03:21,207 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:21,228 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:03:21,253 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:21,265 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:21,274 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Проверка capabilities для enroot] *****************************************************************************************************************************************************************************************************
2025-07-29 14:03:21,274 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:21 +0000 (0:00:00.331)       0:09:43.574 ********** 
2025-07-29 14:03:21,295 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:21,311 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:21,586 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:21,596 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:21,606 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Установка enroot+caps на compute узлах] ***********************************************************************************************************************************************************************************************
2025-07-29 14:03:21,606 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:21 +0000 (0:00:00.331)       0:09:43.906 ********** 
2025-07-29 14:03:21,630 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:21,648 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:21,667 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:21,680 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:21,689 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Результат установки enroot+caps] ******************************************************************************************************************************************************************************************************
2025-07-29 14:03:21,689 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:21 +0000 (0:00:00.083)       0:09:43.989 ********** 
2025-07-29 14:03:21,713 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:21,731 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:21,759 p=189336 u=master n=ansible | ok: [cn01] => 
  enroot_caps_install.stdout_lines: VARIABLE IS NOT DEFINED!
2025-07-29 14:03:21,780 p=189336 u=master n=ansible | ok: [cn02] => 
  enroot_caps_install.stdout_lines: VARIABLE IS NOT DEFINED!
2025-07-29 14:03:21,789 p=189336 u=master n=ansible | TASK [containers : [PYXIS] Очистка старых файлов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:21,789 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:21 +0000 (0:00:00.099)       0:09:44.088 ********** 
2025-07-29 14:03:22,075 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:22,085 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:03:22,111 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:22,124 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:22,132 p=189336 u=master n=ansible | TASK [containers : [PYXIS] Создание build директории] *****************************************************************************************************************************************************************************************************************
2025-07-29 14:03:22,132 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:22 +0000 (0:00:00.343)       0:09:44.432 ********** 
2025-07-29 14:03:22,407 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:22,445 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:22,458 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:22,470 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:03:22,479 p=189336 u=master n=ansible | TASK [containers : [PYXIS] Скачивание исходников] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:22,479 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:22 +0000 (0:00:00.346)       0:09:44.779 ********** 
2025-07-29 14:03:23,637 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:23,657 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:23,660 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:23,687 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:23,696 p=189336 u=master n=ansible | TASK [containers : [PYXIS] Извлечение исходников] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:23,697 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:23 +0000 (0:00:01.217)       0:09:45.996 ********** 
2025-07-29 14:03:24,440 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:24,793 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:03:25,297 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:25,299 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:25,311 p=189336 u=master n=ansible | TASK [containers : [PYXIS] ИСПРАВЛЕННАЯ компиляция] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:03:25,311 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:25 +0000 (0:00:01.614)       0:09:47.611 ********** 
2025-07-29 14:03:27,014 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:27,016 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:27,093 p=189336 u=master n=ansible | changed: [sm02]
2025-07-29 14:03:27,682 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:27,691 p=189336 u=master n=ansible | TASK [containers : [CONFIG] Создание ПРАВИЛЬНОГО plugstack.conf] ******************************************************************************************************************************************************************************************************
2025-07-29 14:03:27,691 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:27 +0000 (0:00:02.380)       0:09:49.991 ********** 
2025-07-29 14:03:28,322 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:28,395 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:28,399 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:28,415 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:28,429 p=189336 u=master n=ansible | TASK [containers : [ENROOT] Создание директорий Enroot] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:03:28,430 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:28 +0000 (0:00:00.738)       0:09:50.729 ********** 
2025-07-29 14:03:28,712 p=189336 u=master n=ansible | ok: [sm01] => (item=/var/lib/enroot)
2025-07-29 14:03:28,728 p=189336 u=master n=ansible | ok: [sm02] => (item=/var/lib/enroot)
2025-07-29 14:03:28,752 p=189336 u=master n=ansible | ok: [cn01] => (item=/var/lib/enroot)
2025-07-29 14:03:28,763 p=189336 u=master n=ansible | ok: [cn02] => (item=/var/lib/enroot)
2025-07-29 14:03:28,965 p=189336 u=master n=ansible | ok: [sm01] => (item=/var/cache/enroot)
2025-07-29 14:03:28,985 p=189336 u=master n=ansible | ok: [sm02] => (item=/var/cache/enroot)
2025-07-29 14:03:29,017 p=189336 u=master n=ansible | ok: [cn01] => (item=/var/cache/enroot)
2025-07-29 14:03:29,018 p=189336 u=master n=ansible | ok: [cn02] => (item=/var/cache/enroot)
2025-07-29 14:03:29,214 p=189336 u=master n=ansible | ok: [sm01] => (item=/run/enroot)
2025-07-29 14:03:29,245 p=189336 u=master n=ansible | ok: [sm02] => (item=/run/enroot)
2025-07-29 14:03:29,268 p=189336 u=master n=ansible | ok: [cn02] => (item=/run/enroot)
2025-07-29 14:03:29,280 p=189336 u=master n=ansible | ok: [cn01] => (item=/run/enroot)
2025-07-29 14:03:29,472 p=189336 u=master n=ansible | ok: [sm01] => (item=/etc/enroot)
2025-07-29 14:03:29,503 p=189336 u=master n=ansible | ok: [sm02] => (item=/etc/enroot)
2025-07-29 14:03:29,518 p=189336 u=master n=ansible | ok: [cn02] => (item=/etc/enroot)
2025-07-29 14:03:29,538 p=189336 u=master n=ansible | ok: [cn01] => (item=/etc/enroot)
2025-07-29 14:03:29,548 p=189336 u=master n=ansible | TASK [containers : [ENROOT] Продакшн конфигурация Enroot] *************************************************************************************************************************************************************************************************************
2025-07-29 14:03:29,549 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:29 +0000 (0:00:01.119)       0:09:51.848 ********** 
2025-07-29 14:03:30,129 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:30,188 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:30,192 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:30,203 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:30,212 p=189336 u=master n=ansible | TASK [containers : [VERIFY] Проверка исправлений] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:03:30,212 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:30 +0000 (0:00:00.663)       0:09:52.512 ********** 
2025-07-29 14:03:30,491 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:30,512 p=189336 u=master n=ansible | ok: [sm02]
2025-07-29 14:03:30,524 p=189336 u=master n=ansible | ok: [cn01]
2025-07-29 14:03:30,601 p=189336 u=master n=ansible | ok: [cn02]
2025-07-29 14:03:30,610 p=189336 u=master n=ansible | TASK [containers : [CONTAINERS] Результат исправления] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:03:30,610 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:30 +0000 (0:00:00.397)       0:09:52.910 ********** 
2025-07-29 14:03:30,650 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:03 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:03:30,668 p=189336 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:03 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:03:30,671 p=189336 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:03 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n✅ Enroot+caps check:\n\n\U0001F3AF На compute узле также установлен enroot+caps\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:03:30,687 p=189336 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:03 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n✅ Enroot+caps check:\n\n\U0001F3AF На compute узле также установлен enroot+caps\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:03:30,765 p=189336 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:30,765 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:30 +0000 (0:00:00.155)       0:09:53.065 ********** 
2025-07-29 14:03:31,871 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:31,881 p=189336 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:31,882 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:31 +0000 (0:00:01.116)       0:09:54.181 ********** 
2025-07-29 14:03:32,149 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:32,197 p=189336 u=master n=ansible | PLAY [ЭТАП 7: Перезапуск сервисов] ************************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:32,247 p=189336 u=master n=ansible | TASK [Перезапуск slurmd] **********************************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:32,247 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:32 +0000 (0:00:00.365)       0:09:54.547 ********** 
2025-07-29 14:03:32,284 p=189336 u=master n=ansible | skipping: [sm01]
2025-07-29 14:03:32,300 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:33,218 p=189336 u=master n=ansible | changed: [cn01]
2025-07-29 14:03:46,347 p=189336 u=master n=ansible | changed: [cn02]
2025-07-29 14:03:46,356 p=189336 u=master n=ansible | TASK [Перезапуск slurmctld] *******************************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:46,356 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:46 +0000 (0:00:14.109)       0:10:08.656 ********** 
2025-07-29 14:03:46,397 p=189336 u=master n=ansible | skipping: [sm02]
2025-07-29 14:03:46,415 p=189336 u=master n=ansible | skipping: [cn01]
2025-07-29 14:03:46,427 p=189336 u=master n=ansible | skipping: [cn02]
2025-07-29 14:03:47,618 p=189336 u=master n=ansible | changed: [sm01]
2025-07-29 14:03:47,628 p=189336 u=master n=ansible | TASK [Пауза] **********************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:47,628 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:47 +0000 (0:00:01.271)       0:10:09.928 ********** 
2025-07-29 14:03:47,650 p=189336 u=master n=ansible | Pausing for 5 seconds
2025-07-29 14:03:47,651 p=189336 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 14:03:52,656 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:03:52,793 p=189336 u=master n=ansible | PLAY [ЭТАП 8: Тестирование] *******************************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:52,811 p=189336 u=master n=ansible | TASK [Тест кластера] **************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:03:52,812 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:03:52 +0000 (0:00:05.183)       0:10:15.111 ********** 
2025-07-29 14:08:37,200 p=189336 u=master n=ansible | ok: [sm01]
2025-07-29 14:08:37,211 p=189336 u=master n=ansible | TASK [Результат] ******************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:08:37,212 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:08:37 +0000 (0:04:44.400)       0:14:59.511 ********** 
2025-07-29 14:08:37,238 p=189336 u=master n=ansible | ok: [sm01] => 
  msg: "=== ТЕСТ КЛАСТЕРА ===\nSlurmctld(primary) at sm01 is UP\nPARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST\ncompute*     up   infinite      2  inval cn[01-02]\ncn01\nКонтейнеры настраиваются...\n\n\U0001F389 КЛАСТЕР УСТАНОВЛЕН!\n\nКоманды для тестирования:\n- sinfo\n- srun hostname\n- srun --container-image=docker://hello-world"
2025-07-29 14:08:37,264 p=189336 u=master n=ansible | PLAY RECAP ************************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:08:37,264 p=189336 u=master n=ansible | cn01                       : ok=136  changed=24   unreachable=0    failed=0    skipped=64   rescued=0    ignored=0   
2025-07-29 14:08:37,264 p=189336 u=master n=ansible | cn02                       : ok=135  changed=24   unreachable=0    failed=0    skipped=64   rescued=0    ignored=0   
2025-07-29 14:08:37,264 p=189336 u=master n=ansible | localhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-07-29 14:08:37,264 p=189336 u=master n=ansible | sm01                       : ok=160  changed=48   unreachable=0    failed=0    skipped=22   rescued=0    ignored=0   
2025-07-29 14:08:37,265 p=189336 u=master n=ansible | sm02                       : ok=129  changed=22   unreachable=0    failed=0    skipped=65   rescued=0    ignored=0   
2025-07-29 14:08:37,265 p=189336 u=master n=ansible | Playbook run took 0 days, 0 hours, 14 minutes, 59 seconds
2025-07-29 14:08:37,265 p=189336 u=master n=ansible | Tuesday 29 July 2025  14:08:37 +0000 (0:00:00.053)       0:14:59.565 ********** 
2025-07-29 14:08:37,265 p=189336 u=master n=ansible | =============================================================================== 
2025-07-29 14:08:37,266 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 289.00s
2025-07-29 14:08:37,266 p=189336 u=master n=ansible | Тест кластера ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 284.40s
2025-07-29 14:08:37,266 p=189336 u=master n=ansible | common : [COMMON] Обновление apt cache ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 32.81s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 27.16s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 21.56s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | Перезапуск slurmd --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 14.11s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | common : [COMMON] Установка базовых пакетов ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 11.06s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 8.61s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 7.74s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Извлечение исходников Slurm -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.71s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | Пауза ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.18s
2025-07-29 14:08:37,267 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm -------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.10s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.04s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | common : restart nfs-server ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 4.33s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.29s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | slurm_master : restart slurmctld ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.53s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | slurm_master : [SERVICES] Пауза после запуска slurmdbd --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.07s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | slurm_build : [SLURM_BUILD] Скачивание исходников Slurm 25.05.1 ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 2.90s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | containers : [PYXIS] ИСПРАВЛЕННАЯ компиляция ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 2.38s
2025-07-29 14:08:37,268 p=189336 u=master n=ansible | slurm_compute : [SLURM-COMPUTE] Создание systemd unit для slurmd ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 2.31s
2025-07-29 14:19:08,634 p=192754 u=master n=ansible | cn01 | FAILED | rc=2 >>
drwxrwxrwt 2 master master 4096 Jul 29 17:19 /tmp/enroot-data
drwx------ 3 root   root   4096 Jul 29 17:03 /var/lib/enroot-cachemkdir: cannot create directory ‘/run/enroot’: Permission denied
chmod: changing permissions of '/var/lib/enroot-cache': Operation not permitted
chmod: cannot access '/run/enroot': No such file or directory
ls: cannot access '/run/enroot': No such file or directorynon-zero return code

2025-07-29 14:19:08,689 p=192754 u=master n=ansible | cn02 | CHANGED | rc=0 >>
drwxr-xr-x 3 root root   60 Jul 29 17:03 /run/enroot
drwx------ 3 root root 4096 Jul 29 17:03 /tmp/enroot-data
drwx------ 3 root root 4096 Jul 29 17:03 /var/lib/enroot-cachechmod: changing permissions of '/var/lib/enroot-cache': Operation not permitted
chmod: changing permissions of '/run/enroot': Operation not permitted
chmod: changing permissions of '/tmp/enroot-data': Operation not permitted

2025-07-29 14:22:00,473 p=192820 u=master n=ansible | cn01 | CHANGED | rc=0 >>
--------------e------- /var/lib/enroot-cache/group-0
drwxrwxrwt 2 root   root     40 Jul 29 17:22 /run/enroot
drwxrwxrwt 2 master master 4096 Jul 29 17:19 /tmp/enroot-data
drwxrwxrwt 3 root   root   4096 Jul 29 17:03 /var/lib/enroot-cache

2025-07-29 14:22:00,474 p=192820 u=master n=ansible | cn02 | CHANGED | rc=0 >>
--------------e------- /var/lib/enroot-cache/group-0
---------------------- /run/enroot/user-0
drwxrwxrwt 3 root root   60 Jul 29 17:03 /run/enroot
drwxrwxrwt 3 root root 4096 Jul 29 17:03 /tmp/enroot-data
drwxrwxrwt 3 root root 4096 Jul 29 17:03 /var/lib/enroot-cache

2025-07-29 14:33:02,527 p=192986 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ********************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:02,537 p=192986 u=master n=ansible | TASK [Информация о развертывании] *************************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:02,537 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:02 +0000 (0:00:00.012)       0:00:00.012 ********** 
2025-07-29 14:33:02,588 p=192986 u=master n=ansible | ok: [localhost] => 
  msg: "\U0001F680 Установка Slurm HPC кластера\n\U0001F4CD Master:  sm01\n\U0001F4CD Login:   sm02\n\U0001F4CD Compute: cn01, cn02"
2025-07-29 14:33:02,596 p=192986 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *************************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:02,609 p=192986 u=master n=ansible | TASK [Gathering Facts] ************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:02,610 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:02 +0000 (0:00:00.072)       0:00:00.084 ********** 
2025-07-29 14:33:04,831 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:04,845 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:04,865 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:05,550 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:05,590 p=192986 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:33:05,590 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:05 +0000 (0:00:02.980)       0:00:03.064 ********** 
2025-07-29 14:33:05,620 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 14:33:05,635 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:33:05,641 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:33:05,650 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:33:05,657 p=192986 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:05,657 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:05 +0000 (0:00:00.067)       0:00:03.132 ********** 
2025-07-29 14:33:06,674 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:06,749 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:08,171 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:13,378 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:13,386 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:13,386 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:13 +0000 (0:00:07.729)       0:00:10.861 ********** 
2025-07-29 14:33:14,459 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:14,463 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:14,563 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:15,890 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:15,900 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:15,900 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:15 +0000 (0:00:02.514)       0:00:13.375 ********** 
2025-07-29 14:33:16,433 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:16,454 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:16,456 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:16,471 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:16,478 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:33:16,478 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:16 +0000 (0:00:00.578)       0:00:13.953 ********** 
2025-07-29 14:33:16,975 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:16,991 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:16,998 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:17,185 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:17,192 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:17,192 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:17 +0000 (0:00:00.714)       0:00:14.667 ********** 
2025-07-29 14:33:18,196 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:18,222 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:18,263 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:18,317 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:18,324 p=192986 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:33:18,325 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:18 +0000 (0:00:01.132)       0:00:15.799 ********** 
2025-07-29 14:33:20,216 p=192986 u=master n=ansible | changed: [cn02]
2025-07-29 14:33:20,221 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:20,223 p=192986 u=master n=ansible | changed: [cn01]
2025-07-29 14:33:20,247 p=192986 u=master n=ansible | changed: [sm02]
2025-07-29 14:33:20,255 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:33:20,255 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:20 +0000 (0:00:01.930)       0:00:17.730 ********** 
2025-07-29 14:33:20,309 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:20,310 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:20,320 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:20,630 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:20,637 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:33:20,638 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:20 +0000 (0:00:00.382)       0:00:18.112 ********** 
2025-07-29 14:33:21,051 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,059 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,063 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,065 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,304 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,314 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,319 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,320 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,556 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,571 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,575 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,586 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:21,809 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:22,259 p=192986 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:22,261 p=192986 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:22,263 p=192986 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:22,278 p=192986 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:33:22,278 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:22 +0000 (0:00:01.640)       0:00:19.753 ********** 
2025-07-29 14:33:22,327 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:22,707 p=192986 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:33:22,717 p=192986 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:33:22,720 p=192986 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:33:22,728 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:33:22,728 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:22 +0000 (0:00:00.450)       0:00:20.203 ********** 
2025-07-29 14:33:22,760 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:23,497 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:23,498 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:23,522 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:23,529 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:33:23,529 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:23 +0000 (0:00:00.801)       0:00:21.004 ********** 
2025-07-29 14:33:23,578 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:23,579 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:23,589 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:23,799 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:23,806 p=192986 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:23,806 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:23 +0000 (0:00:00.276)       0:00:21.281 ********** 
2025-07-29 14:33:25,709 p=192986 u=master n=ansible | changed: [cn01]
2025-07-29 14:33:25,759 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:25,802 p=192986 u=master n=ansible | changed: [cn02]
2025-07-29 14:33:26,049 p=192986 u=master n=ansible | changed: [sm02]
2025-07-29 14:33:26,058 p=192986 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:26,059 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:26 +0000 (0:00:02.252)       0:00:23.533 ********** 
2025-07-29 14:33:26,326 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:26,347 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:26,355 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:26,378 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:26,387 p=192986 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:26,387 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:26 +0000 (0:00:00.328)       0:00:23.862 ********** 
2025-07-29 14:33:26,419 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 14:33:26,434 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:33:26,439 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:33:26,452 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:33:26,459 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:26,459 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:26 +0000 (0:00:00.072)       0:00:23.934 ********** 
2025-07-29 14:33:27,484 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:27,498 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:27,542 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:27,566 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:27,577 p=192986 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:27,577 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:27 +0000 (0:00:01.117)       0:00:25.052 ********** 
2025-07-29 14:33:27,854 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:27,882 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:27,920 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:28,277 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:28,285 p=192986 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:28,285 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:28 +0000 (0:00:00.708)       0:00:25.760 ********** 
2025-07-29 14:33:28,318 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:28,333 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:28,336 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:28,352 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:28,359 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:33:28,359 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:28 +0000 (0:00:00.074)       0:00:25.834 ********** 
2025-07-29 14:33:28,405 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:28,406 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:28,416 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:29,337 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:29,347 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:33:29,348 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:29 +0000 (0:00:00.988)       0:00:26.822 ********** 
2025-07-29 14:33:29,393 p=192986 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:33:29,397 p=192986 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:33:29,401 p=192986 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:33:29,402 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:29,403 p=192986 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:33:29,404 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:29,414 p=192986 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:33:29,417 p=192986 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:33:29,418 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:29,705 p=192986 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 14:33:29,954 p=192986 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 14:33:29,963 p=192986 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:29,963 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:29 +0000 (0:00:00.615)       0:00:27.438 ********** 
2025-07-29 14:33:30,001 p=192986 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:33:30,002 p=192986 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:33:30,011 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:30,013 p=192986 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:33:30,014 p=192986 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:33:30,015 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:30,025 p=192986 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:33:30,028 p=192986 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:33:30,029 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:30,354 p=192986 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 14:33:30,592 p=192986 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 14:33:30,601 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:33:30,601 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:30 +0000 (0:00:00.638)       0:00:28.076 ********** 
2025-07-29 14:33:30,696 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:30,697 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:30,698 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:30,701 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:30,704 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:30,706 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:30,707 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:30,709 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:30,710 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:30,713 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:30,716 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:30,718 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:30,721 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:30,722 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:30,727 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:30,730 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:30,732 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:30,735 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:30,738 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:30,740 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:30,742 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:30,928 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 14:33:31,172 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 14:33:31,411 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 14:33:31,651 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 14:33:31,889 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 14:33:32,128 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 14:33:32,142 p=192986 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:33:32,142 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:32 +0000 (0:00:01.540)       0:00:29.617 ********** 
2025-07-29 14:33:32,190 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:32,192 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:32,203 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:32,624 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:32,632 p=192986 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:33:32,632 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:32 +0000 (0:00:00.490)       0:00:30.107 ********** 
2025-07-29 14:33:32,682 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:32,683 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:32,695 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:32,896 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:32,903 p=192986 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:33:32,904 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:32 +0000 (0:00:00.271)       0:00:30.378 ********** 
2025-07-29 14:33:32,942 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:32,961 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:32,974 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:33,166 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:33,174 p=192986 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:33:33,174 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:33 +0000 (0:00:00.270)       0:00:30.649 ********** 
2025-07-29 14:33:33,211 p=192986 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 14:33:33,226 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:33,227 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:33,239 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:33,246 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:33,247 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:33 +0000 (0:00:00.072)       0:00:30.721 ********** 
2025-07-29 14:33:33,282 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:34,244 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:34,358 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:34,405 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:34,412 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:33:34,412 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:34 +0000 (0:00:01.165)       0:00:31.887 ********** 
2025-07-29 14:33:34,436 p=192986 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 14:33:34,450 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:34,706 p=192986 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:33:34,716 p=192986 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:33:34,739 p=192986 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:33:34,747 p=192986 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:33:34,748 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:34 +0000 (0:00:00.335)       0:00:32.222 ********** 
2025-07-29 14:33:34,770 p=192986 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 14:33:34,774 p=192986 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 14:33:34,783 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:35,177 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:33:35,178 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:33:35,180 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:33:35,429 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:33:35,433 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:33:35,436 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:33:35,445 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:35,445 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:35 +0000 (0:00:00.697)       0:00:32.920 ********** 
2025-07-29 14:33:35,496 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:35,497 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:35,506 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:37,163 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:37,171 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:33:37,171 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:37 +0000 (0:00:01.725)       0:00:34.646 ********** 
2025-07-29 14:33:37,211 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:37,229 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:37,242 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:38,082 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:38,090 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:33:38,090 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:38 +0000 (0:00:00.919)       0:00:35.565 ********** 
2025-07-29 14:33:38,366 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,384 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,414 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,442 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,616 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,639 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,681 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,699 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,865 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,892 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,939 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:38,949 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,117 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,148 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,202 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,204 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,365 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:33:39,413 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:33:39,458 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:33:39,471 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:33:39,626 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,679 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,715 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,732 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:33:39,741 p=192986 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:33:39,742 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:39 +0000 (0:00:01.651)       0:00:37.216 ********** 
2025-07-29 14:33:39,779 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 14:33:39,799 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:33:39,800 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:33:39,816 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:33:39,902 p=192986 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:39,902 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:39 +0000 (0:00:00.160)       0:00:37.377 ********** 
2025-07-29 14:33:40,999 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:41,006 p=192986 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:41,006 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:41 +0000 (0:00:01.104)       0:00:38.481 ********** 
2025-07-29 14:33:41,265 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:41,304 p=192986 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:41,355 p=192986 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:33:41,356 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:41 +0000 (0:00:00.349)       0:00:38.830 ********** 
2025-07-29 14:33:41,402 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 14:33:41,403 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:33:41,405 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:33:41,418 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:33:41,425 p=192986 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:41,425 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:41 +0000 (0:00:00.069)       0:00:38.899 ********** 
2025-07-29 14:33:42,122 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:42,302 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:42,479 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:42,512 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:42,522 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:42,522 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:42 +0000 (0:00:01.097)       0:00:39.997 ********** 
2025-07-29 14:33:43,546 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:43,606 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:43,706 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:43,739 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:43,747 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:43,748 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:43 +0000 (0:00:01.225)       0:00:41.222 ********** 
2025-07-29 14:33:44,054 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:44,078 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:44,084 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:44,112 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:44,120 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:33:44,120 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:44 +0000 (0:00:00.372)       0:00:41.595 ********** 
2025-07-29 14:33:44,447 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:44,470 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:44,471 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:44,497 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:44,508 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:44,508 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:44 +0000 (0:00:00.387)       0:00:41.982 ********** 
2025-07-29 14:33:45,517 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:45,553 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:45,577 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:45,651 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:45,658 p=192986 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:33:45,658 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:45 +0000 (0:00:01.150)       0:00:43.133 ********** 
2025-07-29 14:33:47,223 p=192986 u=master n=ansible | changed: [cn01]
2025-07-29 14:33:47,250 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:47,262 p=192986 u=master n=ansible | changed: [sm02]
2025-07-29 14:33:47,311 p=192986 u=master n=ansible | changed: [cn02]
2025-07-29 14:33:47,319 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:33:47,319 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:47 +0000 (0:00:01.660)       0:00:44.793 ********** 
2025-07-29 14:33:47,369 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:47,372 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:47,383 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:47,572 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:47,580 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:33:47,580 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:47 +0000 (0:00:00.261)       0:00:45.055 ********** 
2025-07-29 14:33:47,874 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:47,887 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:47,893 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:47,941 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,143 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,144 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,154 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,222 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,396 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,403 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,404 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,483 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:33:48,654 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:48,658 p=192986 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:48,708 p=192986 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:48,741 p=192986 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:33:48,750 p=192986 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:33:48,750 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:48 +0000 (0:00:01.170)       0:00:46.225 ********** 
2025-07-29 14:33:48,782 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:49,028 p=192986 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:33:49,044 p=192986 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:33:49,060 p=192986 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:33:49,068 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:33:49,068 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:49 +0000 (0:00:00.317)       0:00:46.543 ********** 
2025-07-29 14:33:49,101 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:49,923 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:49,930 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:49,931 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:49,938 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:33:49,939 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:49 +0000 (0:00:00.870)       0:00:47.413 ********** 
2025-07-29 14:33:49,986 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:49,987 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:49,999 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:50,206 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:50,214 p=192986 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:50,214 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:50 +0000 (0:00:00.275)       0:00:47.689 ********** 
2025-07-29 14:33:52,094 p=192986 u=master n=ansible | changed: [cn01]
2025-07-29 14:33:52,180 p=192986 u=master n=ansible | changed: [cn02]
2025-07-29 14:33:52,183 p=192986 u=master n=ansible | changed: [sm02]
2025-07-29 14:33:52,201 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:52,209 p=192986 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:52,209 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:52 +0000 (0:00:01.994)       0:00:49.683 ********** 
2025-07-29 14:33:52,473 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:52,491 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:52,502 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:52,523 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:52,530 p=192986 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:52,531 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:52 +0000 (0:00:00.321)       0:00:50.005 ********** 
2025-07-29 14:33:52,578 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 14:33:52,579 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:33:52,581 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:33:52,597 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:33:52,606 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:52,606 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:52 +0000 (0:00:00.075)       0:00:50.081 ********** 
2025-07-29 14:33:53,598 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:53,682 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:53,735 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:53,805 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:53,813 p=192986 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:53,813 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:53 +0000 (0:00:01.206)       0:00:51.288 ********** 
2025-07-29 14:33:54,076 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:54,098 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:54,114 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:54,165 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:54,172 p=192986 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:54,173 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:54 +0000 (0:00:00.359)       0:00:51.647 ********** 
2025-07-29 14:33:54,206 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:54,221 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:54,224 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:54,240 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:33:54,251 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:33:54,251 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:54 +0000 (0:00:00.078)       0:00:51.725 ********** 
2025-07-29 14:33:54,302 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:54,303 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:54,315 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:55,171 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:55,179 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:33:55,179 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:55 +0000 (0:00:00.928)       0:00:52.654 ********** 
2025-07-29 14:33:55,218 p=192986 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:33:55,222 p=192986 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:33:55,224 p=192986 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:33:55,229 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:55,232 p=192986 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:33:55,233 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:55,243 p=192986 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:33:55,245 p=192986 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:33:55,246 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:55,449 p=192986 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 14:33:55,693 p=192986 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 14:33:55,702 p=192986 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:33:55,703 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:55 +0000 (0:00:00.523)       0:00:53.177 ********** 
2025-07-29 14:33:55,736 p=192986 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:33:55,742 p=192986 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:33:55,748 p=192986 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:33:55,754 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:55,755 p=192986 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:33:55,756 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:55,766 p=192986 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:33:55,769 p=192986 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:33:55,770 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:55,959 p=192986 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 14:33:56,201 p=192986 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 14:33:56,213 p=192986 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:33:56,213 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:56 +0000 (0:00:00.510)       0:00:53.688 ********** 
2025-07-29 14:33:56,369 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:56,370 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:56,371 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:56,373 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:56,380 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:56,381 p=192986 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:56,383 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:56,387 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:56,390 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:56,393 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:56,395 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:56,396 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:56,398 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:56,399 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:56,401 p=192986 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:56,402 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:56,402 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:56,404 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:33:56,407 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:33:56,409 p=192986 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:33:56,410 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:56,569 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 14:33:56,807 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 14:33:57,045 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 14:33:57,281 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 14:33:57,519 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 14:33:57,756 p=192986 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 14:33:57,767 p=192986 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:33:57,767 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:57 +0000 (0:00:01.553)       0:00:55.242 ********** 
2025-07-29 14:33:57,813 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:57,815 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:57,826 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:58,238 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:33:58,246 p=192986 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:33:58,246 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:58 +0000 (0:00:00.478)       0:00:55.721 ********** 
2025-07-29 14:33:58,295 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:58,296 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:58,308 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:58,507 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:58,514 p=192986 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:33:58,515 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:58 +0000 (0:00:00.268)       0:00:55.989 ********** 
2025-07-29 14:33:58,561 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:58,563 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:58,574 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:58,774 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:33:58,782 p=192986 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:33:58,782 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:58 +0000 (0:00:00.267)       0:00:56.257 ********** 
2025-07-29 14:33:58,816 p=192986 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 14:33:58,830 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:33:58,831 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:33:58,844 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:33:58,851 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:33:58,851 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:58 +0000 (0:00:00.069)       0:00:56.326 ********** 
2025-07-29 14:33:58,883 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:33:59,828 p=192986 u=master n=ansible | ok: [cn01]
2025-07-29 14:33:59,910 p=192986 u=master n=ansible | ok: [sm02]
2025-07-29 14:33:59,970 p=192986 u=master n=ansible | ok: [cn02]
2025-07-29 14:33:59,978 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:33:59,978 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:33:59 +0000 (0:00:01.127)       0:00:57.453 ********** 
2025-07-29 14:34:00,003 p=192986 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 14:34:00,012 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:00,274 p=192986 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:34:00,276 p=192986 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:34:00,314 p=192986 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:34:00,323 p=192986 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:34:00,323 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:00 +0000 (0:00:00.344)       0:00:57.798 ********** 
2025-07-29 14:34:00,351 p=192986 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 14:34:00,352 p=192986 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 14:34:00,360 p=192986 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:00,621 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:34:00,629 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:34:00,656 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:34:00,874 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:34:00,878 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:34:00,910 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:34:00,919 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:00,919 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:00 +0000 (0:00:00.595)       0:00:58.394 ********** 
2025-07-29 14:34:00,971 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:00,972 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:00,984 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:01,847 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:01,854 p=192986 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:34:01,855 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:01 +0000 (0:00:00.935)       0:00:59.329 ********** 
2025-07-29 14:34:01,901 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:01,903 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:01,914 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:02,777 p=192986 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:02,785 p=192986 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:34:02,785 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:02 +0000 (0:00:00.930)       0:01:00.260 ********** 
2025-07-29 14:34:03,060 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,080 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,096 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,118 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,316 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,343 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,355 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,382 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,576 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,611 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,613 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,641 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,832 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,872 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,873 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:03,899 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:04,082 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:34:04,176 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:34:04,249 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:34:04,259 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:34:04,336 p=192986 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:04,439 p=192986 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:04,506 p=192986 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:04,517 p=192986 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:34:04,528 p=192986 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:34:04,529 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:04 +0000 (0:00:01.743)       0:01:02.003 ********** 
2025-07-29 14:34:04,564 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 14:34:04,579 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:34:04,582 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:34:04,597 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:34:04,622 p=192986 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Начало сборки Slurm] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:34:04,622 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:04 +0000 (0:00:00.093)       0:01:02.097 ********** 
2025-07-29 14:34:04,655 p=192986 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm01"
2025-07-29 14:34:04,674 p=192986 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm02"
2025-07-29 14:34:04,676 p=192986 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn01"
2025-07-29 14:34:04,691 p=192986 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn02"
2025-07-29 14:34:04,702 p=192986 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Очистка старой сборки] **************************************************************************************************************************************************************************************************************
2025-07-29 14:34:04,702 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:04 +0000 (0:00:00.080)       0:01:02.177 ********** 
2025-07-29 14:34:04,750 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:04,752 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:04,763 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:05,380 p=192986 u=master n=ansible | changed: [sm01]
2025-07-29 14:34:05,388 p=192986 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки] ***********************************************************************************************************************************************************************************
2025-07-29 14:34:05,388 p=192986 u=master n=ansible | Tuesday 29 July 2025  14:34:05 +0000 (0:00:00.685)       0:01:02.863 ********** 
2025-07-29 14:34:05,434 p=192986 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:05,437 p=192986 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:05,447 p=192986 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:12,481 p=192986 u=master n=ansible |  [ERROR]: User interrupted execution

2025-07-29 14:34:23,556 p=193940 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ********************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:23,566 p=193940 u=master n=ansible | TASK [Информация о развертывании] *************************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:23,567 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:23 +0000 (0:00:00.012)       0:00:00.012 ********** 
2025-07-29 14:34:23,620 p=193940 u=master n=ansible | ok: [localhost] => 
  msg: "\U0001F680 Установка Slurm HPC кластера\n\U0001F4CD Master:  sm01\n\U0001F4CD Login:   sm02\n\U0001F4CD Compute: cn01, cn02"
2025-07-29 14:34:23,627 p=193940 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *************************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:23,691 p=193940 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:34:23,691 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:23 +0000 (0:00:00.124)       0:00:00.137 ********** 
2025-07-29 14:34:23,727 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 14:34:23,745 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:34:23,747 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:34:23,761 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:34:23,796 p=193940 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:23,796 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:23 +0000 (0:00:00.104)       0:00:00.241 ********** 
2025-07-29 14:34:24,682 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:24,690 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:24,767 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:24,823 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:24,832 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:34:24,832 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:24 +0000 (0:00:01.036)       0:00:01.277 ********** 
2025-07-29 14:34:25,985 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:25,986 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:26,056 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:35,903 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:34:35,912 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:35,912 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:35 +0000 (0:00:11.080)       0:00:12.357 ********** 
2025-07-29 14:34:36,404 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:36,425 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:36,426 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:36,431 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:36,448 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:34:36,448 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:36 +0000 (0:00:00.536)       0:00:12.894 ********** 
2025-07-29 14:34:36,982 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:36,983 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:37,003 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:37,019 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:37,029 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:37,029 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:37 +0000 (0:00:00.580)       0:00:13.474 ********** 
2025-07-29 14:34:37,982 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:38,149 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:38,172 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:38,293 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:38,302 p=193940 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:34:38,302 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:38 +0000 (0:00:01.272)       0:00:14.747 ********** 
2025-07-29 14:34:40,086 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:34:40,156 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:34:40,163 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:34:40,168 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:34:40,177 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:34:40,178 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:40 +0000 (0:00:01.875)       0:00:16.623 ********** 
2025-07-29 14:34:40,214 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:40,229 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:40,241 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:40,556 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:40,565 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:34:40,565 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:40 +0000 (0:00:00.387)       0:00:17.010 ********** 
2025-07-29 14:34:40,987 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:40,991 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:40,993 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,000 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,238 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,290 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,344 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,347 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,488 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,549 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,604 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,611 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:34:41,743 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:34:41,811 p=193940 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:34:41,860 p=193940 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:34:41,876 p=193940 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:34:41,887 p=193940 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:34:41,887 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:41 +0000 (0:00:01.321)       0:00:18.332 ********** 
2025-07-29 14:34:41,929 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:42,292 p=193940 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:34:42,293 p=193940 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:34:42,294 p=193940 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:34:42,304 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:34:42,304 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:42 +0000 (0:00:00.417)       0:00:18.750 ********** 
2025-07-29 14:34:42,327 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:46,188 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:46,190 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:46,192 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:46,203 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:34:46,203 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:46 +0000 (0:00:03.898)       0:00:22.648 ********** 
2025-07-29 14:34:46,249 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:46,270 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:46,282 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:46,483 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:46,492 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:34:46,493 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:46 +0000 (0:00:00.289)       0:00:22.938 ********** 
2025-07-29 14:34:48,442 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:34:48,484 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:34:48,514 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:34:48,561 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:34:48,570 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:48,570 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:48 +0000 (0:00:02.077)       0:00:25.015 ********** 
2025-07-29 14:34:48,838 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:48,856 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:48,861 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:48,889 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:48,897 p=193940 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:34:48,898 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:48 +0000 (0:00:00.327)       0:00:25.343 ********** 
2025-07-29 14:34:48,938 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 14:34:48,953 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:34:48,956 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:34:48,972 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:34:48,980 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:48,980 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:48 +0000 (0:00:00.082)       0:00:25.425 ********** 
2025-07-29 14:34:50,005 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:50,060 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:50,062 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:50,143 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:50,152 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:50,152 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:50 +0000 (0:00:01.171)       0:00:26.597 ********** 
2025-07-29 14:34:50,415 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:50,437 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:50,448 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:50,469 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:50,477 p=193940 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:50,477 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:50 +0000 (0:00:00.325)       0:00:26.922 ********** 
2025-07-29 14:34:50,515 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:34:50,531 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:34:50,534 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:34:50,549 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:34:50,557 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:34:50,558 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:50 +0000 (0:00:00.080)       0:00:27.003 ********** 
2025-07-29 14:34:50,597 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:50,614 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:50,626 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:51,492 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:51,501 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:34:51,501 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:51 +0000 (0:00:00.943)       0:00:27.946 ********** 
2025-07-29 14:34:51,536 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:34:51,549 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:34:51,559 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:34:51,562 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:51,562 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:34:51,564 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:51,573 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:34:51,576 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:34:51,577 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:51,769 p=193940 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 14:34:52,016 p=193940 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 14:34:52,027 p=193940 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:34:52,027 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:52 +0000 (0:00:00.525)       0:00:28.472 ********** 
2025-07-29 14:34:52,065 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:34:52,075 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:34:52,080 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:34:52,083 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:52,083 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:34:52,084 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:52,094 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:34:52,097 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:34:52,098 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:52,423 p=193940 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 14:34:52,663 p=193940 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 14:34:52,675 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:34:52,675 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:52 +0000 (0:00:00.648)       0:00:29.120 ********** 
2025-07-29 14:34:52,777 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:34:52,778 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:34:52,780 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:34:52,783 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:34:52,786 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:34:52,789 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:34:52,791 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:52,796 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:34:52,799 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:34:52,802 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:34:52,804 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:34:52,807 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:34:52,810 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:34:52,812 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:52,819 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:34:52,822 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:34:52,824 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:34:52,827 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:34:52,830 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:34:52,832 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:34:52,833 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:53,007 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 14:34:53,252 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 14:34:53,494 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 14:34:53,735 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 14:34:53,980 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 14:34:54,221 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 14:34:54,233 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:34:54,234 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:54 +0000 (0:00:01.558)       0:00:30.679 ********** 
2025-07-29 14:34:54,273 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:54,291 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:54,303 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:54,718 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:54,727 p=193940 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:34:54,727 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:54 +0000 (0:00:00.493)       0:00:31.172 ********** 
2025-07-29 14:34:54,766 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:54,783 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:54,796 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:54,994 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:34:55,003 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:34:55,004 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:55 +0000 (0:00:00.276)       0:00:31.449 ********** 
2025-07-29 14:34:55,055 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:55,056 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:55,068 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:55,269 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:34:55,279 p=193940 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:34:55,279 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:55 +0000 (0:00:00.275)       0:00:31.725 ********** 
2025-07-29 14:34:55,318 p=193940 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 14:34:55,334 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:55,335 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:55,347 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:55,355 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:55,355 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:55 +0000 (0:00:00.075)       0:00:31.800 ********** 
2025-07-29 14:34:55,375 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:56,338 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:34:56,459 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:34:56,517 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:34:56,525 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:34:56,525 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:56 +0000 (0:00:01.170)       0:00:32.970 ********** 
2025-07-29 14:34:56,554 p=193940 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 14:34:56,562 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:56,823 p=193940 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:34:56,961 p=193940 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:34:56,963 p=193940 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:34:56,973 p=193940 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:34:56,973 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:56 +0000 (0:00:00.447)       0:00:33.418 ********** 
2025-07-29 14:34:57,003 p=193940 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 14:34:57,004 p=193940 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 14:34:57,013 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:34:57,409 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:34:57,471 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:34:57,507 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:34:57,663 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:34:57,717 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:34:57,773 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:34:57,785 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:34:57,785 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:57 +0000 (0:00:00.812)       0:00:34.230 ********** 
2025-07-29 14:34:57,822 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:57,838 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:57,850 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:58,739 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:58,747 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:34:58,748 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:58 +0000 (0:00:00.962)       0:00:35.193 ********** 
2025-07-29 14:34:58,835 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:34:58,852 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:34:58,865 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:34:59,729 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:34:59,737 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:34:59,738 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:34:59 +0000 (0:00:00.989)       0:00:36.183 ********** 
2025-07-29 14:35:00,015 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,030 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,043 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,070 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,266 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,294 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,295 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,342 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,517 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,552 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,553 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,602 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,773 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,804 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,823 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:00,865 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:01,022 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:01,059 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:01,071 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:01,149 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:01,270 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:01,318 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:01,339 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:01,407 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:01,417 p=193940 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:35:01,417 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:01 +0000 (0:00:01.679)       0:00:37.862 ********** 
2025-07-29 14:35:01,455 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 14:35:01,471 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:35:01,472 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:35:01,486 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:35:01,561 p=193940 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:01,561 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:01 +0000 (0:00:00.144)       0:00:38.006 ********** 
2025-07-29 14:35:02,952 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:02,962 p=193940 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:02,962 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:02 +0000 (0:00:01.401)       0:00:39.407 ********** 
2025-07-29 14:35:03,225 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:03,515 p=193940 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:35:03,579 p=193940 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:35:03,579 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:03 +0000 (0:00:00.616)       0:00:40.024 ********** 
2025-07-29 14:35:03,617 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 14:35:03,635 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:35:03,636 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:35:03,650 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:35:03,658 p=193940 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:03,658 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:03 +0000 (0:00:00.079)       0:00:40.103 ********** 
2025-07-29 14:35:04,383 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:05,792 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:05,884 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:06,041 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:06,050 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:35:06,050 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:06 +0000 (0:00:02.391)       0:00:42.495 ********** 
2025-07-29 14:35:07,096 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:07,124 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:07,181 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:07,286 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:07,295 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:07,295 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:07 +0000 (0:00:01.244)       0:00:43.740 ********** 
2025-07-29 14:35:07,665 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:07,686 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:07,688 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:07,717 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:07,726 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:35:07,726 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:07 +0000 (0:00:00.431)       0:00:44.171 ********** 
2025-07-29 14:35:08,088 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:08,089 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:08,096 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:08,136 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:08,145 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:08,145 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:08 +0000 (0:00:00.418)       0:00:44.590 ********** 
2025-07-29 14:35:09,169 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:09,171 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:09,171 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:09,259 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:09,268 p=193940 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:35:09,268 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:09 +0000 (0:00:01.122)       0:00:45.713 ********** 
2025-07-29 14:35:10,879 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:35:10,905 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:35:10,917 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:10,932 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:35:10,941 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:35:10,941 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:10 +0000 (0:00:01.673)       0:00:47.387 ********** 
2025-07-29 14:35:10,995 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:10,996 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:11,008 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:11,197 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:11,205 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:35:11,206 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:11 +0000 (0:00:00.264)       0:00:47.651 ********** 
2025-07-29 14:35:11,481 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,503 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,513 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,540 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,732 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,761 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,765 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,800 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:11,985 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:12,020 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:12,022 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:12,060 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:35:12,248 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:35:12,288 p=193940 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:35:12,289 p=193940 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:35:12,324 p=193940 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:35:12,335 p=193940 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:35:12,336 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:12 +0000 (0:00:01.130)       0:00:48.781 ********** 
2025-07-29 14:35:12,373 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:35:12,618 p=193940 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:35:12,630 p=193940 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:35:12,650 p=193940 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:35:12,658 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:35:12,659 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:12 +0000 (0:00:00.322)       0:00:49.104 ********** 
2025-07-29 14:35:12,698 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:35:13,307 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:13,317 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:13,335 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:13,344 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:35:13,344 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:13 +0000 (0:00:00.685)       0:00:49.789 ********** 
2025-07-29 14:35:13,399 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:13,400 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:13,412 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:13,610 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:13,619 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:35:13,619 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:13 +0000 (0:00:00.275)       0:00:50.064 ********** 
2025-07-29 14:35:15,528 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:35:15,577 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:15,581 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:35:15,640 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:35:15,650 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:15,651 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:15 +0000 (0:00:02.031)       0:00:52.096 ********** 
2025-07-29 14:35:15,922 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:15,934 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:15,975 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:16,024 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:16,032 p=193940 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:35:16,033 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:16 +0000 (0:00:00.382)       0:00:52.478 ********** 
2025-07-29 14:35:16,073 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 14:35:16,089 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:35:16,092 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:35:16,110 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:35:16,119 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:16,119 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:16 +0000 (0:00:00.086)       0:00:52.564 ********** 
2025-07-29 14:35:17,103 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:17,116 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:17,243 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:17,309 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:17,317 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:17,317 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:17 +0000 (0:00:01.198)       0:00:53.763 ********** 
2025-07-29 14:35:17,583 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:17,602 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:17,610 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:17,640 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:17,651 p=193940 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:17,651 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:17 +0000 (0:00:00.333)       0:00:54.097 ********** 
2025-07-29 14:35:17,715 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:35:17,751 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:35:17,752 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:35:17,769 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:35:17,778 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:35:17,778 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:17 +0000 (0:00:00.126)       0:00:54.223 ********** 
2025-07-29 14:35:17,818 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:17,836 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:17,848 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:18,821 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:18,921 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:35:18,921 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:18 +0000 (0:00:01.142)       0:00:55.366 ********** 
2025-07-29 14:35:18,962 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:35:18,969 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:35:18,975 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:35:18,981 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:18,982 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:35:18,983 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:18,993 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:35:18,996 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:35:18,997 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:19,203 p=193940 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 14:35:19,451 p=193940 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 14:35:19,463 p=193940 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:35:19,463 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:19 +0000 (0:00:00.542)       0:00:55.908 ********** 
2025-07-29 14:35:19,511 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:35:19,514 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:35:19,520 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:35:19,524 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:35:19,527 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:19,527 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:19,540 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:35:19,542 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:35:19,544 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:19,786 p=193940 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 14:35:20,027 p=193940 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 14:35:20,038 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:35:20,038 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:20 +0000 (0:00:00.574)       0:00:56.483 ********** 
2025-07-29 14:35:20,149 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:35:20,153 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:35:20,154 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:35:20,157 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:35:20,158 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:35:20,160 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:35:20,161 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:35:20,163 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:35:20,165 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:20,165 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:35:20,166 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:35:20,169 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:35:20,173 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:35:20,174 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:20,179 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:35:20,181 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:35:20,184 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:35:20,187 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:35:20,190 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:35:20,193 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:35:20,194 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:20,362 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 14:35:20,599 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 14:35:20,839 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 14:35:21,078 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 14:35:21,317 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 14:35:21,555 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 14:35:21,567 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:35:21,567 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:21 +0000 (0:00:01.529)       0:00:58.012 ********** 
2025-07-29 14:35:21,607 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:21,624 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:21,637 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:22,039 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:22,048 p=193940 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:35:22,049 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:22 +0000 (0:00:00.481)       0:00:58.494 ********** 
2025-07-29 14:35:22,104 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:22,104 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:22,117 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:22,313 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:22,322 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:35:22,322 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:22 +0000 (0:00:00.273)       0:00:58.767 ********** 
2025-07-29 14:35:22,375 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:22,376 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:22,389 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:22,585 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:22,594 p=193940 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:35:22,595 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:22 +0000 (0:00:00.272)       0:00:59.040 ********** 
2025-07-29 14:35:22,637 p=193940 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 14:35:22,653 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:22,654 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:22,666 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:22,674 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:22,675 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:22 +0000 (0:00:00.079)       0:00:59.120 ********** 
2025-07-29 14:35:22,694 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:35:23,616 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:35:23,787 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:35:23,879 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:35:23,889 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:35:23,889 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:23 +0000 (0:00:01.214)       0:01:00.334 ********** 
2025-07-29 14:35:23,913 p=193940 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 14:35:23,930 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:35:24,189 p=193940 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:35:24,192 p=193940 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:35:24,228 p=193940 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:35:24,240 p=193940 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:35:24,240 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:24 +0000 (0:00:00.351)       0:01:00.685 ********** 
2025-07-29 14:35:24,269 p=193940 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 14:35:24,271 p=193940 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 14:35:24,281 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:35:24,550 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:35:24,552 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:35:24,594 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:35:24,807 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:35:24,808 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:35:24,855 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:35:24,865 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:35:24,865 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:24 +0000 (0:00:00.624)       0:01:01.310 ********** 
2025-07-29 14:35:24,906 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:24,925 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:24,936 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:25,795 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:25,805 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:35:25,805 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:25 +0000 (0:00:00.939)       0:01:02.250 ********** 
2025-07-29 14:35:25,861 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:25,862 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:25,875 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:26,752 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:26,762 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:35:26,762 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:26 +0000 (0:00:00.957)       0:01:03.207 ********** 
2025-07-29 14:35:27,041 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,063 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,073 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,111 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,297 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,319 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,321 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,381 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,555 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,573 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,590 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,645 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,807 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,852 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,885 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:27,928 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:28,063 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:28,125 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:28,138 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:28,196 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:35:28,315 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:28,383 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:28,387 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:28,459 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:35:28,503 p=193940 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:35:28,503 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:28 +0000 (0:00:01.741)       0:01:04.949 ********** 
2025-07-29 14:35:28,548 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 14:35:28,564 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:35:28,565 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:35:28,582 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:35:28,615 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Начало сборки Slurm] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:35:28,616 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:28 +0000 (0:00:00.112)       0:01:05.061 ********** 
2025-07-29 14:35:28,654 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm01"
2025-07-29 14:35:28,674 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm02"
2025-07-29 14:35:28,676 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn01"
2025-07-29 14:35:28,691 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn02"
2025-07-29 14:35:28,700 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Очистка старой сборки] **************************************************************************************************************************************************************************************************************
2025-07-29 14:35:28,701 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:28 +0000 (0:00:00.084)       0:01:05.146 ********** 
2025-07-29 14:35:28,740 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:28,816 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:28,829 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:28,965 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:28,974 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки] ***********************************************************************************************************************************************************************************
2025-07-29 14:35:28,974 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:28 +0000 (0:00:00.273)       0:01:05.419 ********** 
2025-07-29 14:35:29,029 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:29,032 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:29,045 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:45,184 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:45,193 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание временной директории для сборки] *******************************************************************************************************************************************************************************************
2025-07-29 14:35:45,193 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:45 +0000 (0:00:16.219)       0:01:21.638 ********** 
2025-07-29 14:35:45,233 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:45,251 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:45,264 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:45,467 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:45,476 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка существования исходников] **************************************************************************************************************************************************************************************************
2025-07-29 14:35:45,476 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:45 +0000 (0:00:00.282)       0:01:21.921 ********** 
2025-07-29 14:35:45,515 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:45,532 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:45,545 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:45,729 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:35:45,744 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Скачивание исходников Slurm 25.05.1] ************************************************************************************************************************************************************************************************
2025-07-29 14:35:45,744 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:45 +0000 (0:00:00.267)       0:01:22.189 ********** 
2025-07-29 14:35:45,787 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:45,804 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:45,817 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:48,513 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:48,523 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Извлечение исходников Slurm] ********************************************************************************************************************************************************************************************************
2025-07-29 14:35:48,523 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:48 +0000 (0:00:02.779)       0:01:24.968 ********** 
2025-07-29 14:35:48,565 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:48,582 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:48,595 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:35:54,090 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:35:54,099 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой] *****************************************************************************************************************************************************************************************
2025-07-29 14:35:54,099 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:35:54 +0000 (0:00:05.575)       0:01:30.544 ********** 
2025-07-29 14:35:54,134 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:35:54,153 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:35:54,165 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:36:35,131 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:36:35,141 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...)] *********************************************************************************************************************************************************************************************
2025-07-29 14:36:35,142 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:36:35 +0000 (0:00:41.042)       0:02:11.587 ********** 
2025-07-29 14:36:35,180 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:36:35,197 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:36:35,208 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:42:00,127 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:00,149 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на master] **********************************************************************************************************************************************************************************************************
2025-07-29 14:42:00,149 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:00 +0000 (0:05:25.007)       0:07:36.594 ********** 
2025-07-29 14:42:00,212 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:42:00,213 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:42:00,223 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:42:00,415 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:00,426 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка development файлов (headers для Pyxis)] ***********************************************************************************************************************************************************************************
2025-07-29 14:42:00,426 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:00 +0000 (0:00:00.277)       0:07:36.871 ********** 
2025-07-29 14:42:00,474 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:42:00,492 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:42:00,504 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:42:00,683 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:00,693 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание директории Slurm на всех узлах] ********************************************************************************************************************************************************************************************
2025-07-29 14:42:00,693 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:00 +0000 (0:00:00.266)       0:07:37.138 ********** 
2025-07-29 14:42:00,968 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:01,889 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:42:01,926 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:42:02,106 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:42:02,115 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание полного архива Slurm в NFS] ************************************************************************************************************************************************************************************************
2025-07-29 14:42:02,115 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:02 +0000 (0:00:01.421)       0:07:38.560 ********** 
2025-07-29 14:42:02,153 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:42:02,173 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:42:02,191 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:42:03,069 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:03,078 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат создания архива] **********************************************************************************************************************************************************************************************************
2025-07-29 14:42:03,078 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:03 +0000 (0:00:00.963)       0:07:39.524 ********** 
2025-07-29 14:42:03,134 p=193940 u=master n=ansible | ok: [sm01] => 
  archive_creation.stdout_lines:
  - === СОЗДАНИЕ АРХИВА SLURM + HEADERS ===
  - Копируем binaries...
  - '✅ Headers включены в архив: 6 файлов'
  - === АРХИВ ГОТОВ ===
  - 'Binaries: 20 файлов'
  - 'Daemons: 6 файлов'
  - 'Headers: 6 файлов'
  - 'Libs: 6 файлов'
2025-07-29 14:42:03,158 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:42:03,160 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:42:03,171 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:42:03,180 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Ожидание готовности архива] *********************************************************************************************************************************************************************************************************
2025-07-29 14:42:03,180 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:03 +0000 (0:00:00.101)       0:07:39.625 ********** 
2025-07-29 14:42:03,209 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:42:03,617 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:42:03,627 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:42:03,689 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:42:03,698 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива] **********************************************************************************************************************************************************************************************
2025-07-29 14:42:03,699 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:03 +0000 (0:00:00.518)       0:07:40.144 ********** 
2025-07-29 14:42:03,718 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:42:22,807 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:42:23,008 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:42:23,508 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:42:23,520 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат установки на узлах] *******************************************************************************************************************************************************************************************************
2025-07-29 14:42:23,520 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:23 +0000 (0:00:19.821)       0:07:59.965 ********** 
2025-07-29 14:42:23,541 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:42:23,577 p=193940 u=master n=ansible | ok: [sm02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 14:42:23,580 p=193940 u=master n=ansible | ok: [cn01] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 14:42:23,596 p=193940 u=master n=ansible | ok: [cn02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-29 14:42:23,605 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm] ********************************************************************************************************************************************************************
2025-07-29 14:42:23,605 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:23 +0000 (0:00:00.085)       0:08:00.050 ********** 
2025-07-29 14:42:23,907 p=193940 u=master n=ansible | ok: [sm01] => (item=sinfo)
2025-07-29 14:42:23,927 p=193940 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-29 14:42:23,963 p=193940 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-29 14:42:23,970 p=193940 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-29 14:42:24,159 p=193940 u=master n=ansible | ok: [sm01] => (item=squeue)
2025-07-29 14:42:24,209 p=193940 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-29 14:42:24,239 p=193940 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-29 14:42:24,250 p=193940 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-29 14:42:24,411 p=193940 u=master n=ansible | ok: [sm01] => (item=scancel)
2025-07-29 14:42:24,511 p=193940 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-29 14:42:24,512 p=193940 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-29 14:42:24,539 p=193940 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-29 14:42:24,663 p=193940 u=master n=ansible | ok: [sm01] => (item=sbatch)
2025-07-29 14:42:24,766 p=193940 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-29 14:42:24,767 p=193940 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-29 14:42:24,820 p=193940 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-29 14:42:24,918 p=193940 u=master n=ansible | ok: [sm01] => (item=salloc)
2025-07-29 14:42:25,024 p=193940 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-29 14:42:25,039 p=193940 u=master n=ansible | ok: [cn01] => (item=salloc)
2025-07-29 14:42:25,073 p=193940 u=master n=ansible | ok: [cn02] => (item=salloc)
2025-07-29 14:42:25,173 p=193940 u=master n=ansible | ok: [sm01] => (item=srun)
2025-07-29 14:42:25,281 p=193940 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-29 14:42:25,314 p=193940 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-29 14:42:25,323 p=193940 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-29 14:42:25,427 p=193940 u=master n=ansible | ok: [sm01] => (item=sacct)
2025-07-29 14:42:25,537 p=193940 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-29 14:42:25,564 p=193940 u=master n=ansible | ok: [cn01] => (item=sacct)
2025-07-29 14:42:25,573 p=193940 u=master n=ansible | ok: [cn02] => (item=sacct)
2025-07-29 14:42:25,681 p=193940 u=master n=ansible | ok: [sm01] => (item=scontrol)
2025-07-29 14:42:25,795 p=193940 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-29 14:42:25,817 p=193940 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-29 14:42:25,829 p=193940 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-29 14:42:25,960 p=193940 u=master n=ansible | ok: [sm01] => (item=sprio)
2025-07-29 14:42:26,050 p=193940 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-29 14:42:26,066 p=193940 u=master n=ansible | ok: [cn01] => (item=sprio)
2025-07-29 14:42:26,084 p=193940 u=master n=ansible | ok: [cn02] => (item=sprio)
2025-07-29 14:42:26,213 p=193940 u=master n=ansible | ok: [sm01] => (item=smap)
2025-07-29 14:42:26,304 p=193940 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-29 14:42:26,314 p=193940 u=master n=ansible | ok: [cn01] => (item=smap)
2025-07-29 14:42:26,331 p=193940 u=master n=ansible | ok: [cn02] => (item=smap)
2025-07-29 14:42:26,465 p=193940 u=master n=ansible | ok: [sm01] => (item=sdiag)
2025-07-29 14:42:26,559 p=193940 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-29 14:42:26,561 p=193940 u=master n=ansible | ok: [cn01] => (item=sdiag)
2025-07-29 14:42:26,583 p=193940 u=master n=ansible | ok: [cn02] => (item=sdiag)
2025-07-29 14:42:26,718 p=193940 u=master n=ansible | ok: [sm01] => (item=sstat)
2025-07-29 14:42:26,808 p=193940 u=master n=ansible | ok: [cn01] => (item=sstat)
2025-07-29 14:42:26,810 p=193940 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-29 14:42:26,833 p=193940 u=master n=ansible | ok: [cn02] => (item=sstat)
2025-07-29 14:42:26,969 p=193940 u=master n=ansible | ok: [sm01] => (item=sreport)
2025-07-29 14:42:27,059 p=193940 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-29 14:42:27,064 p=193940 u=master n=ansible | ok: [cn01] => (item=sreport)
2025-07-29 14:42:27,083 p=193940 u=master n=ansible | ok: [cn02] => (item=sreport)
2025-07-29 14:42:27,219 p=193940 u=master n=ansible | ok: [sm01] => (item=sacctmgr)
2025-07-29 14:42:27,314 p=193940 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-29 14:42:27,319 p=193940 u=master n=ansible | ok: [cn01] => (item=sacctmgr)
2025-07-29 14:42:27,335 p=193940 u=master n=ansible | ok: [cn02] => (item=sacctmgr)
2025-07-29 14:42:27,470 p=193940 u=master n=ansible | ok: [sm01] => (item=sattach)
2025-07-29 14:42:27,568 p=193940 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-29 14:42:27,622 p=193940 u=master n=ansible | ok: [cn01] => (item=sattach)
2025-07-29 14:42:27,718 p=193940 u=master n=ansible | ok: [sm01] => (item=sbcast)
2025-07-29 14:42:27,747 p=193940 u=master n=ansible | ok: [cn02] => (item=sattach)
2025-07-29 14:42:27,868 p=193940 u=master n=ansible | ok: [cn01] => (item=sbcast)
2025-07-29 14:42:27,907 p=193940 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-29 14:42:27,967 p=193940 u=master n=ansible | ok: [sm01] => (item=sshare)
2025-07-29 14:42:27,998 p=193940 u=master n=ansible | ok: [cn02] => (item=sbcast)
2025-07-29 14:42:28,123 p=193940 u=master n=ansible | ok: [cn01] => (item=sshare)
2025-07-29 14:42:28,206 p=193940 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-29 14:42:28,219 p=193940 u=master n=ansible | ok: [sm01] => (item=sview)
2025-07-29 14:42:28,225 p=193940 u=master n=ansible | [WARNING]: Cannot set fs attributes on a non-existent symlink target. follow should be set to False to avoid this.

2025-07-29 14:42:28,256 p=193940 u=master n=ansible | ok: [cn02] => (item=sshare)
2025-07-29 14:42:28,368 p=193940 u=master n=ansible | ok: [cn01] => (item=sview)
2025-07-29 14:42:28,462 p=193940 u=master n=ansible | ok: [sm02] => (item=sview)
2025-07-29 14:42:28,503 p=193940 u=master n=ansible | ok: [cn02] => (item=sview)
2025-07-29 14:42:28,520 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для системных демонов Slurm] **************************************************************************************************************************************************************************
2025-07-29 14:42:28,520 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:28 +0000 (0:00:04.915)       0:08:04.965 ********** 
2025-07-29 14:42:28,795 p=193940 u=master n=ansible | ok: [sm01] => (item=slurmctld)
2025-07-29 14:42:28,813 p=193940 u=master n=ansible | ok: [sm02] => (item=slurmctld)
2025-07-29 14:42:28,822 p=193940 u=master n=ansible | ok: [cn01] => (item=slurmctld)
2025-07-29 14:42:28,844 p=193940 u=master n=ansible | ok: [cn02] => (item=slurmctld)
2025-07-29 14:42:29,045 p=193940 u=master n=ansible | ok: [sm01] => (item=slurmd)
2025-07-29 14:42:29,069 p=193940 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-29 14:42:29,081 p=193940 u=master n=ansible | ok: [sm02] => (item=slurmd)
2025-07-29 14:42:29,105 p=193940 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-29 14:42:29,298 p=193940 u=master n=ansible | ok: [sm01] => (item=slurmdbd)
2025-07-29 14:42:29,321 p=193940 u=master n=ansible | ok: [cn01] => (item=slurmdbd)
2025-07-29 14:42:29,331 p=193940 u=master n=ansible | ok: [sm02] => (item=slurmdbd)
2025-07-29 14:42:29,355 p=193940 u=master n=ansible | ok: [cn02] => (item=slurmdbd)
2025-07-29 14:42:29,551 p=193940 u=master n=ansible | ok: [sm01] => (item=slurmrestd)
2025-07-29 14:42:29,573 p=193940 u=master n=ansible | ok: [cn01] => (item=slurmrestd)
2025-07-29 14:42:29,589 p=193940 u=master n=ansible | ok: [sm02] => (item=slurmrestd)
2025-07-29 14:42:29,604 p=193940 u=master n=ansible | ok: [cn02] => (item=slurmrestd)
2025-07-29 14:42:29,802 p=193940 u=master n=ansible | ok: [sm01] => (item=slurmstepd)
2025-07-29 14:42:29,819 p=193940 u=master n=ansible | ok: [cn01] => (item=slurmstepd)
2025-07-29 14:42:29,853 p=193940 u=master n=ansible | ok: [cn02] => (item=slurmstepd)
2025-07-29 14:42:29,877 p=193940 u=master n=ansible | ok: [sm02] => (item=slurmstepd)
2025-07-29 14:42:29,890 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Обновление библиотечного кеша] ******************************************************************************************************************************************************************************************************
2025-07-29 14:42:29,890 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:29 +0000 (0:00:01.369)       0:08:06.335 ********** 
2025-07-29 14:42:30,255 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:42:30,359 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:42:30,399 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:30,779 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:42:30,789 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка версии Slurm] **************************************************************************************************************************************************************************************************************
2025-07-29 14:42:30,789 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:30 +0000 (0:00:00.899)       0:08:07.234 ********** 
2025-07-29 14:42:31,057 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:31,084 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:42:31,106 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:42:31,123 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:42:31,132 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка поддержки JWT] *************************************************************************************************************************************************************************************************************
2025-07-29 14:42:31,132 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:31 +0000 (0:00:00.342)       0:08:07.577 ********** 
2025-07-29 14:42:31,402 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:31,427 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:42:31,440 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:42:31,456 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:42:31,466 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка headers (КРИТИЧНО ДЛЯ PYXIS!)] *********************************************************************************************************************************************************************************************
2025-07-29 14:42:31,467 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:31 +0000 (0:00:00.334)       0:08:07.912 ********** 
2025-07-29 14:42:31,736 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:31,759 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:42:31,768 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:42:31,787 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:42:31,795 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результаты проверки] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:42:31,795 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:31 +0000 (0:00:00.328)       0:08:08.240 ********** 
2025-07-29 14:42:31,840 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm успешно установлен на sm01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 13:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:42:31,859 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm успешно установлен на sm02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 17:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:42:31,861 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "✅ Slurm успешно установлен на cn01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 17:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:42:31,876 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "✅ Slurm успешно установлен на cn02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 17:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-29 14:42:31,884 p=193940 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Сборка завершена успешно] ***********************************************************************************************************************************************************************************************************
2025-07-29 14:42:31,885 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:31 +0000 (0:00:00.089)       0:08:08.330 ********** 
2025-07-29 14:42:31,923 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm01"
2025-07-29 14:42:31,942 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm02"
2025-07-29 14:42:31,943 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn01"
2025-07-29 14:42:31,959 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn02"
2025-07-29 14:42:32,073 p=193940 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:42:32,074 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:32 +0000 (0:00:00.189)       0:08:08.519 ********** 
2025-07-29 14:42:33,232 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:33,240 p=193940 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:42:33,240 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:33 +0000 (0:00:01.166)       0:08:09.685 ********** 
2025-07-29 14:42:33,496 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:33,545 p=193940 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] ***************************************************************************************************************************************************************************************************************************************
2025-07-29 14:42:33,564 p=193940 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Начало настройки Slurm Master] ****************************************************************************************************************************************************************************************************
2025-07-29 14:42:33,565 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:33 +0000 (0:00:00.324)       0:08:10.010 ********** 
2025-07-29 14:42:33,622 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F3AF Настройка Slurm Master узла: sm01\n\U0001F4CD Роль: primary\n\U0001F310 IP: 10.20.90.240"
2025-07-29 14:42:33,632 p=193940 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка MariaDB для Slurm] ******************************************************************************************************************************************************************************************************
2025-07-29 14:42:33,632 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:33 +0000 (0:00:00.067)       0:08:10.077 ********** 
2025-07-29 14:42:33,692 p=193940 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/mariadb.yml for sm01
2025-07-29 14:42:33,700 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка работы свежей MariaDB] ********************************************************************************************************************************************************************************************************
2025-07-29 14:42:33,700 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:33 +0000 (0:00:00.068)       0:08:10.145 ********** 
2025-07-29 14:42:33,986 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:33,995 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Показать версию MariaDB] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:42:33,995 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:33 +0000 (0:00:00.294)       0:08:10.440 ********** 
2025-07-29 14:42:34,055 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB версия: 10.11.13-MariaDB-0ubuntu0.24.04.1"
2025-07-29 14:42:34,065 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание пользователя и базы Slurm (исправленная версия)] ******************************************************************************************************************************************************************************
2025-07-29 14:42:34,066 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:34 +0000 (0:00:00.070)       0:08:10.511 ********** 
2025-07-29 14:42:35,629 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:35,639 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Результат создания пользователя] *******************************************************************************************************************************************************************************************************
2025-07-29 14:42:35,639 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:35 +0000 (0:00:01.573)       0:08:12.084 ********** 
2025-07-29 14:42:35,695 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Создание пользователя: False"
2025-07-29 14:42:35,704 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Тест подключения пользователя Slurm] ***************************************************************************************************************************************************************************************************
2025-07-29 14:42:35,704 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:35 +0000 (0:00:00.064)       0:08:12.149 ********** 
2025-07-29 14:42:36,002 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:36,011 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка списка баз данных] ************************************************************************************************************************************************************************************************************
2025-07-29 14:42:36,012 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:36 +0000 (0:00:00.307)       0:08:12.457 ********** 
2025-07-29 14:42:36,316 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:36,325 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание конфига оптимизации для Slurm] ************************************************************************************************************************************************************************************************
2025-07-29 14:42:36,326 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:36 +0000 (0:00:00.313)       0:08:12.771 ********** 
2025-07-29 14:42:36,877 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:36,886 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек] ********************************************************************************************************************************************************************************************
2025-07-29 14:42:36,886 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:36 +0000 (0:00:00.560)       0:08:13.331 ********** 
2025-07-29 14:42:48,983 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:48,992 p=193940 u=master n=ansible | TASK [slurm_master : [MARIADB] Финальный результат] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:42:48,992 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:48 +0000 (0:00:12.105)       0:08:25.437 ********** 
2025-07-29 14:42:49,049 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB настройка завершена:\n\U0001F464 Пользователь: slurm\n\U0001F4CA База: slurm_acct_db\n✅ Подключение: False\n\n\U0001F4CB Доступные базы:\nDatabase\ninformation_schema\nslurm_acct_db\n\n\U0001F389 ГОТОВ ДЛЯ SLURM!"
2025-07-29 14:42:49,058 p=193940 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание конфигурации Slurm] ******************************************************************************************************************************************************************************************************
2025-07-29 14:42:49,058 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:49 +0000 (0:00:00.065)       0:08:25.503 ********** 
2025-07-29 14:42:49,088 p=193940 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/config.yml for sm01
2025-07-29 14:42:49,099 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание основного конфига slurm.conf] **************************************************************************************************************************************************************************************************
2025-07-29 14:42:49,100 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:49 +0000 (0:00:00.041)       0:08:25.545 ********** 
2025-07-29 14:42:49,924 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:49,936 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание конфига slurmdbd.conf] *********************************************************************************************************************************************************************************************************
2025-07-29 14:42:49,936 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:49 +0000 (0:00:00.836)       0:08:26.381 ********** 
2025-07-29 14:42:50,586 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:50,595 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание gres.conf для GPU] *************************************************************************************************************************************************************************************************************
2025-07-29 14:42:50,596 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:50 +0000 (0:00:00.659)       0:08:27.041 ********** 
2025-07-29 14:42:51,268 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:51,278 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание cgroup.conf] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:42:51,278 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:51 +0000 (0:00:00.682)       0:08:27.723 ********** 
2025-07-29 14:42:51,878 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:42:51,887 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание директории для конфигов на NFS] ************************************************************************************************************************************************************************************************
2025-07-29 14:42:51,887 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:51 +0000 (0:00:00.609)       0:08:28.333 ********** 
2025-07-29 14:42:52,154 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:52,162 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Копирование конфигов на NFS для распространения] ****************************************************************************************************************************************************************************************
2025-07-29 14:42:52,163 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:52 +0000 (0:00:00.275)       0:08:28.608 ********** 
2025-07-29 14:42:52,470 p=193940 u=master n=ansible | changed: [sm01] => (item=slurm.conf)
2025-07-29 14:42:52,751 p=193940 u=master n=ansible | changed: [sm01] => (item=cgroup.conf)
2025-07-29 14:42:53,162 p=193940 u=master n=ansible | changed: [sm01] => (item=gres.conf)
2025-07-29 14:42:53,175 p=193940 u=master n=ansible | TASK [slurm_master : [CONFIG] Конфигурация создана] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:42:53,175 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:53 +0000 (0:00:01.012)       0:08:29.620 ********** 
2025-07-29 14:42:53,199 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Конфигурация Slurm:\n✅ slurm.conf создан\n✅ gres.conf создан (AutoDetect=nvml)\n✅ cgroup.conf создан\n✅ slurmdbd.conf создан\n\U0001F4E4 Файлы скопированы в /sw/config/ для распространения"
2025-07-29 14:42:53,207 p=193940 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка systemd сервисов] *******************************************************************************************************************************************************************************************************
2025-07-29 14:42:53,207 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:53 +0000 (0:00:00.032)       0:08:29.652 ********** 
2025-07-29 14:42:53,235 p=193940 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/services.yml for sm01
2025-07-29 14:42:53,248 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmctld] **************************************************************************************************************************************************************************************************
2025-07-29 14:42:53,248 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:53 +0000 (0:00:00.040)       0:08:29.693 ********** 
2025-07-29 14:42:54,101 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:54,110 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmdbd] ***************************************************************************************************************************************************************************************************
2025-07-29 14:42:54,111 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:54 +0000 (0:00:00.862)       0:08:30.556 ********** 
2025-07-29 14:42:54,712 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:54,724 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Перезагрузка systemd daemon] **********************************************************************************************************************************************************************************************************
2025-07-29 14:42:54,724 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:54 +0000 (0:00:00.613)       0:08:31.169 ********** 
2025-07-29 14:42:55,515 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:55,525 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmdbd (сначала база)] *******************************************************************************************************************************************************************************************************
2025-07-29 14:42:55,525 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:55 +0000 (0:00:00.800)       0:08:31.970 ********** 
2025-07-29 14:42:56,027 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:56,037 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Пауза после запуска slurmdbd] *********************************************************************************************************************************************************************************************************
2025-07-29 14:42:56,037 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:56 +0000 (0:00:00.512)       0:08:32.482 ********** 
2025-07-29 14:42:56,086 p=193940 u=master n=ansible | Pausing for 3 seconds
2025-07-29 14:42:56,087 p=193940 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 14:42:59,093 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:59,104 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmctld (после базы)] ********************************************************************************************************************************************************************************************************
2025-07-29 14:42:59,104 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:59 +0000 (0:00:03.066)       0:08:35.549 ********** 
2025-07-29 14:42:59,593 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:42:59,605 p=193940 u=master n=ansible | TASK [slurm_master : [SERVICES] Сервисы запущены] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:42:59,605 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:59 +0000 (0:00:00.500)       0:08:36.050 ********** 
2025-07-29 14:42:59,628 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F39B️ Slurm сервисы:\n✅ slurmdbd запущен\n✅ slurmctld запущен\n\U0001F527 Проверьте: systemctl status slurmctld slurmdbd"
2025-07-29 14:42:59,678 p=193940 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Завершение настройки] *************************************************************************************************************************************************************************************************************
2025-07-29 14:42:59,679 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:59 +0000 (0:00:00.073)       0:08:36.124 ********** 
2025-07-29 14:42:59,739 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm Master настроен!\n\U0001F527 Кластер: hpc-cluster\n\U0001F39B️ Controller: sm01:6817\n\U0001F4BE Database: включена"
2025-07-29 14:42:59,764 p=193940 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmctld] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:42:59,764 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:42:59 +0000 (0:00:00.085)       0:08:36.210 ********** 
2025-07-29 14:43:01,076 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:43:01,085 p=193940 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmdbd] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:43:01,085 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:01 +0000 (0:00:01.320)       0:08:37.530 ********** 
2025-07-29 14:43:01,939 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:43:01,958 p=193940 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] **************************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:02,000 p=193940 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:43:02,000 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:01 +0000 (0:00:00.915)       0:08:38.445 ********** 
2025-07-29 14:43:02,025 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:43:02,039 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:43:02,047 p=193940 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:02,047 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:02 +0000 (0:00:00.047)       0:08:38.492 ********** 
2025-07-29 14:43:36,372 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:36,424 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:36,433 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:43:36,433 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:36 +0000 (0:00:34.386)       0:09:12.879 ********** 
2025-07-29 14:43:37,421 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:37,524 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:37,536 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:37,536 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:37 +0000 (0:00:01.102)       0:09:13.981 ********** 
2025-07-29 14:43:37,890 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:37,914 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:37,923 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:43:37,923 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:37 +0000 (0:00:00.387)       0:09:14.369 ********** 
2025-07-29 14:43:38,248 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:38,271 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:38,280 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:38,280 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:38 +0000 (0:00:00.356)       0:09:14.725 ********** 
2025-07-29 14:43:39,245 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:39,293 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:39,306 p=193940 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:43:39,306 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:39 +0000 (0:00:01.025)       0:09:15.751 ********** 
2025-07-29 14:43:40,882 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:43:40,928 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:43:40,937 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:43:40,938 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:40 +0000 (0:00:01.631)       0:09:17.383 ********** 
2025-07-29 14:43:40,959 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:40,971 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:40,980 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:43:40,980 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:40 +0000 (0:00:00.042)       0:09:17.425 ********** 
2025-07-29 14:43:41,255 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:43:41,279 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:43:41,516 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:43:41,528 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:43:41,767 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:43:41,777 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:43:42,024 p=193940 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:43:42,032 p=193940 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:43:42,043 p=193940 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:43:42,043 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:42 +0000 (0:00:01.062)       0:09:18.488 ********** 
2025-07-29 14:43:42,307 p=193940 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:43:42,324 p=193940 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:43:42,333 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:43:42,333 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:42 +0000 (0:00:00.289)       0:09:18.778 ********** 
2025-07-29 14:43:43,006 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:43,092 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:43,104 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:43:43,104 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:43 +0000 (0:00:00.771)       0:09:19.549 ********** 
2025-07-29 14:43:43,126 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:43,137 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:43,145 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:43:43,145 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:43 +0000 (0:00:00.041)       0:09:19.590 ********** 
2025-07-29 14:43:44,935 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:43:45,048 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:43:45,057 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:45,057 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:45 +0000 (0:00:01.911)       0:09:21.502 ********** 
2025-07-29 14:43:45,326 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:45,345 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:45,355 p=193940 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:43:45,355 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:45 +0000 (0:00:00.298)       0:09:21.800 ********** 
2025-07-29 14:43:45,390 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:43:45,404 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:43:45,413 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:45,413 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:45 +0000 (0:00:00.058)       0:09:21.858 ********** 
2025-07-29 14:43:46,411 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:46,458 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:46,469 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:46,469 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:46 +0000 (0:00:01.056)       0:09:22.915 ********** 
2025-07-29 14:43:46,733 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:46,748 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:46,759 p=193940 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:46,759 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:46 +0000 (0:00:00.289)       0:09:23.204 ********** 
2025-07-29 14:43:46,783 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:43:46,797 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:43:46,806 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:43:46,806 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:46 +0000 (0:00:00.046)       0:09:23.251 ********** 
2025-07-29 14:43:46,826 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:46,838 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:46,850 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:43:46,850 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:46 +0000 (0:00:00.043)       0:09:23.295 ********** 
2025-07-29 14:43:46,873 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:43:46,874 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:43:46,875 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:46,884 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:43:46,887 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:43:46,887 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:46,896 p=193940 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:43:46,896 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:46 +0000 (0:00:00.046)       0:09:23.341 ********** 
2025-07-29 14:43:46,917 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:43:46,918 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:43:46,919 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:46,928 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:43:46,932 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:43:46,933 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:46,941 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:43:46,942 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:46 +0000 (0:00:00.045)       0:09:23.387 ********** 
2025-07-29 14:43:47,066 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:43:47,068 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:43:47,070 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:43:47,073 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:43:47,075 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:43:47,078 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:43:47,079 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:47,105 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:43:47,108 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:43:47,111 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:43:47,113 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:43:47,116 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:43:47,119 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:43:47,120 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:47,129 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:43:47,129 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:47 +0000 (0:00:00.187)       0:09:23.574 ********** 
2025-07-29 14:43:47,152 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:47,162 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:47,171 p=193940 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:43:47,171 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:47 +0000 (0:00:00.041)       0:09:23.616 ********** 
2025-07-29 14:43:47,190 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:47,203 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:47,212 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:43:47,212 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:47 +0000 (0:00:00.040)       0:09:23.657 ********** 
2025-07-29 14:43:47,235 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:47,248 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:47,256 p=193940 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:43:47,257 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:47 +0000 (0:00:00.044)       0:09:23.702 ********** 
2025-07-29 14:43:47,276 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:47,288 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:47,297 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:47,297 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:47 +0000 (0:00:00.040)       0:09:23.742 ********** 
2025-07-29 14:43:48,258 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:48,323 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:48,334 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:43:48,335 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:48 +0000 (0:00:01.037)       0:09:24.780 ********** 
2025-07-29 14:43:48,613 p=193940 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:43:48,627 p=193940 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:43:48,638 p=193940 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:43:48,638 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:48 +0000 (0:00:00.303)       0:09:25.083 ********** 
2025-07-29 14:43:48,910 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:43:48,935 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:43:49,156 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:43:49,183 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:43:49,193 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:43:49,193 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:49 +0000 (0:00:00.555)       0:09:25.638 ********** 
2025-07-29 14:43:49,216 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:49,228 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:49,237 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:43:49,237 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:49 +0000 (0:00:00.044)       0:09:25.682 ********** 
2025-07-29 14:43:49,257 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:49,269 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:49,278 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:43:49,278 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:49 +0000 (0:00:00.040)       0:09:25.723 ********** 
2025-07-29 14:43:49,550 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:49,567 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:49,799 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:49,816 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,050 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,068 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,303 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,321 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,551 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:43:50,578 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:43:50,802 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,832 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:43:50,846 p=193940 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:43:50,846 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:50 +0000 (0:00:01.567)       0:09:27.291 ********** 
2025-07-29 14:43:50,870 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:43:50,884 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:43:50,907 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Начало настройки Slurm Compute узла] ********************************************************************************************************************************************************************************************
2025-07-29 14:43:50,907 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:50 +0000 (0:00:00.060)       0:09:27.352 ********** 
2025-07-29 14:43:50,969 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn01\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-29 14:43:50,986 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn02\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-29 14:43:50,995 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности Slurm binaries] ********************************************************************************************************************************************************************************************
2025-07-29 14:43:50,995 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:50 +0000 (0:00:00.088)       0:09:27.440 ********** 
2025-07-29 14:43:51,282 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:51,326 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:51,336 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование Slurm binaries из NFS] **********************************************************************************************************************************************************************************************
2025-07-29 14:43:51,336 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:51 +0000 (0:00:00.340)       0:09:27.781 ********** 
2025-07-29 14:43:51,358 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:51,367 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:51,379 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности мастер узла] ***********************************************************************************************************************************************************************************************
2025-07-29 14:43:51,379 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:51 +0000 (0:00:00.043)       0:09:27.824 ********** 
2025-07-29 14:43:51,677 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:51,817 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:51,826 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Предупреждение о мастер узле] ***************************************************************************************************************************************************************************************************
2025-07-29 14:43:51,827 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:51 +0000 (0:00:00.447)       0:09:28.272 ********** 
2025-07-29 14:43:51,871 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:43:51,887 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:43:51,896 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Ожидание конфигурационных файлов на NFS] ****************************************************************************************************************************************************************************************
2025-07-29 14:43:51,896 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:51 +0000 (0:00:00.069)       0:09:28.341 ********** 
2025-07-29 14:43:52,166 p=193940 u=master n=ansible | ok: [cn01] => (item=slurm.conf)
2025-07-29 14:43:52,189 p=193940 u=master n=ansible | ok: [cn02] => (item=slurm.conf)
2025-07-29 14:43:52,407 p=193940 u=master n=ansible | ok: [cn01] => (item=cgroup.conf)
2025-07-29 14:43:52,438 p=193940 u=master n=ansible | ok: [cn02] => (item=cgroup.conf)
2025-07-29 14:43:52,650 p=193940 u=master n=ansible | ok: [cn01] => (item=gres.conf)
2025-07-29 14:43:52,685 p=193940 u=master n=ansible | ok: [cn02] => (item=gres.conf)
2025-07-29 14:43:52,698 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование конфигурационных файлов из NFS] *************************************************************************************************************************************************************************************
2025-07-29 14:43:52,699 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:52 +0000 (0:00:00.802)       0:09:29.144 ********** 
2025-07-29 14:43:53,032 p=193940 u=master n=ansible | changed: [cn01] => (item=slurm.conf)
2025-07-29 14:43:53,049 p=193940 u=master n=ansible | changed: [cn02] => (item=slurm.conf)
2025-07-29 14:43:53,346 p=193940 u=master n=ansible | changed: [cn01] => (item=cgroup.conf)
2025-07-29 14:43:53,359 p=193940 u=master n=ansible | changed: [cn02] => (item=cgroup.conf)
2025-07-29 14:43:53,654 p=193940 u=master n=ansible | changed: [cn01] => (item=gres.conf)
2025-07-29 14:43:53,681 p=193940 u=master n=ansible | changed: [cn02] => (item=gres.conf)
2025-07-29 14:43:53,692 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на команды] ***************************************************************************************************************************************************************************************
2025-07-29 14:43:53,692 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:53 +0000 (0:00:00.993)       0:09:30.137 ********** 
2025-07-29 14:43:53,971 p=193940 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-29 14:43:53,996 p=193940 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-29 14:43:54,218 p=193940 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-29 14:43:54,250 p=193940 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-29 14:43:54,467 p=193940 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-29 14:43:54,499 p=193940 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-29 14:43:54,714 p=193940 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-29 14:43:54,756 p=193940 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-29 14:43:54,964 p=193940 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-29 14:43:55,012 p=193940 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-29 14:43:55,221 p=193940 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-29 14:43:55,268 p=193940 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-29 14:43:55,281 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на демоны] ****************************************************************************************************************************************************************************************
2025-07-29 14:43:55,281 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:55 +0000 (0:00:01.588)       0:09:31.726 ********** 
2025-07-29 14:43:55,556 p=193940 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-29 14:43:55,567 p=193940 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-29 14:43:55,577 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка наличия NVIDIA GPU] ****************************************************************************************************************************************************************************************************
2025-07-29 14:43:55,577 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:55 +0000 (0:00:00.296)       0:09:32.022 ********** 
2025-07-29 14:43:55,837 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:55,861 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:55,870 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Результат обнаружения GPU] ******************************************************************************************************************************************************************************************************
2025-07-29 14:43:55,871 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:55 +0000 (0:00:00.293)       0:09:32.316 ********** 
2025-07-29 14:43:55,929 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-29 14:43:55,949 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-29 14:43:55,961 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание systemd unit для slurmd] ***********************************************************************************************************************************************************************************************
2025-07-29 14:43:55,961 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:55 +0000 (0:00:00.090)       0:09:32.406 ********** 
2025-07-29 14:43:56,738 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:56,819 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:56,828 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Перезагрузка systemd daemon] ****************************************************************************************************************************************************************************************************
2025-07-29 14:43:56,828 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:56 +0000 (0:00:00.866)       0:09:33.273 ********** 
2025-07-29 14:43:57,590 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:57,615 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:57,624 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка cgroup v1/v2] **********************************************************************************************************************************************************************************************************
2025-07-29 14:43:57,624 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:57 +0000 (0:00:00.795)       0:09:34.069 ********** 
2025-07-29 14:43:57,891 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:57,914 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:57,924 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Информация о cgroup] ************************************************************************************************************************************************************************************************************
2025-07-29 14:43:57,924 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:57 +0000 (0:00:00.300)       0:09:34.369 ********** 
2025-07-29 14:43:57,979 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-29 14:43:57,989 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-29 14:43:57,999 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание скрипта проверки здоровья узла] ****************************************************************************************************************************************************************************************
2025-07-29 14:43:57,999 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:57 +0000 (0:00:00.074)       0:09:34.444 ********** 
2025-07-29 14:43:58,799 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:43:58,800 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:43:58,809 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Запуск и включение slurmd] ******************************************************************************************************************************************************************************************************
2025-07-29 14:43:58,809 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:58 +0000 (0:00:00.810)       0:09:35.254 ********** 
2025-07-29 14:43:59,389 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:43:59,412 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:43:59,421 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой] **********************************************************************************************************************************************************************************************************
2025-07-29 14:43:59,421 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:43:59 +0000 (0:00:00.611)       0:09:35.866 ********** 
2025-07-29 14:43:59,440 p=193940 u=master n=ansible | Pausing for 5 seconds
2025-07-29 14:43:59,441 p=193940 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 14:44:04,446 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:04,456 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка статуса slurmd] ********************************************************************************************************************************************************************************************************
2025-07-29 14:44:04,456 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:04 +0000 (0:00:05.035)       0:09:40.901 ********** 
2025-07-29 14:44:04,938 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:04,945 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:04,957 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка логов slurmd] **********************************************************************************************************************************************************************************************************
2025-07-29 14:44:04,957 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:04 +0000 (0:00:00.500)       0:09:41.402 ********** 
2025-07-29 14:44:05,241 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:05,280 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:05,289 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Тест подключения к мастеру] *****************************************************************************************************************************************************************************************************
2025-07-29 14:44:05,289 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:05 +0000 (0:00:00.332)       0:09:41.734 ********** 
2025-07-29 14:44:05,612 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:05,670 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:05,679 p=193940 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Финальный статус узла] **********************************************************************************************************************************************************************************************************
2025-07-29 14:44:05,679 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:05 +0000 (0:00:00.389)       0:09:42.124 ********** 
2025-07-29 14:44:05,706 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Slurm Compute узел cn01 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-29T17:43:59.377] error: MPI: Cannot create context for mpi/pmix_v5\n[2025-07-29T17:43:59.378] slurmd started on Tue, 29 Jul 2025 17:43:59 +0300\n[2025-07-29T17:43:59.378] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=1869 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-29 14:44:05,723 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Slurm Compute узел cn02 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-29T17:43:59.397] error: MPI: Cannot create context for mpi/pmix\n[2025-07-29T17:43:59.397] slurmd started on Tue, 29 Jul 2025 17:43:59 +0300\n[2025-07-29T17:43:59.397] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=16542 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-29 14:44:05,767 p=193940 u=master n=ansible | RUNNING HANDLER [slurm_compute : restart slurmd] **********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:05,767 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:05 +0000 (0:00:00.088)       0:09:42.213 ********** 
2025-07-29 14:44:06,605 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:44:06,613 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:44:06,643 p=193940 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ****************************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:06,674 p=193940 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:44:06,674 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:06 +0000 (0:00:00.906)       0:09:43.119 ********** 
2025-07-29 14:44:06,698 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:44:06,706 p=193940 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:06,707 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:06 +0000 (0:00:00.032)       0:09:43.152 ********** 
2025-07-29 14:44:08,354 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:08,364 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:08,364 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:08 +0000 (0:00:01.657)       0:09:44.809 ********** 
2025-07-29 14:44:09,395 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:09,405 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:09,405 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:09 +0000 (0:00:01.040)       0:09:45.850 ********** 
2025-07-29 14:44:09,779 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:09,787 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:44:09,788 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:09 +0000 (0:00:00.382)       0:09:46.233 ********** 
2025-07-29 14:44:10,125 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:10,137 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:10,137 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:10 +0000 (0:00:00.349)       0:09:46.582 ********** 
2025-07-29 14:44:11,157 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:11,166 p=193940 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:44:11,167 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:11 +0000 (0:00:01.029)       0:09:47.612 ********** 
2025-07-29 14:44:12,830 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:44:12,839 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:44:12,840 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:12 +0000 (0:00:01.672)       0:09:49.285 ********** 
2025-07-29 14:44:12,858 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:12,866 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:44:12,866 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:12 +0000 (0:00:00.026)       0:09:49.312 ********** 
2025-07-29 14:44:13,139 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:13,393 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:13,651 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:13,904 p=193940 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:44:13,915 p=193940 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:44:13,915 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:13 +0000 (0:00:01.048)       0:09:50.360 ********** 
2025-07-29 14:44:14,184 p=193940 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:44:14,196 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:44:14,196 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:14 +0000 (0:00:00.280)       0:09:50.641 ********** 
2025-07-29 14:44:14,823 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:14,832 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:44:14,833 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:14 +0000 (0:00:00.636)       0:09:51.278 ********** 
2025-07-29 14:44:14,851 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:14,859 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:14,860 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:14 +0000 (0:00:00.027)       0:09:51.305 ********** 
2025-07-29 14:44:16,791 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:44:16,800 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:16,800 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:16 +0000 (0:00:01.940)       0:09:53.245 ********** 
2025-07-29 14:44:17,067 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:17,077 p=193940 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:17,078 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:17 +0000 (0:00:00.277)       0:09:53.523 ********** 
2025-07-29 14:44:17,105 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:44:17,117 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:17,117 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:17 +0000 (0:00:00.039)       0:09:53.562 ********** 
2025-07-29 14:44:18,133 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:18,143 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,143 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:01.026)       0:09:54.588 ********** 
2025-07-29 14:44:18,427 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:18,438 p=193940 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,438 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.295)       0:09:54.883 ********** 
2025-07-29 14:44:18,462 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:44:18,471 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,471 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.032)       0:09:54.916 ********** 
2025-07-29 14:44:18,488 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,498 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,498 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.026)       0:09:54.943 ********** 
2025-07-29 14:44:18,517 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:44:18,518 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:44:18,520 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,532 p=193940 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,532 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.034)       0:09:54.977 ********** 
2025-07-29 14:44:18,551 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:44:18,553 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:44:18,554 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,564 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,564 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.031)       0:09:55.009 ********** 
2025-07-29 14:44:18,654 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:44:18,655 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:44:18,658 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:44:18,661 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:44:18,665 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:44:18,667 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:44:18,669 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,678 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,678 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.114)       0:09:55.123 ********** 
2025-07-29 14:44:18,697 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,706 p=193940 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,706 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.027)       0:09:55.151 ********** 
2025-07-29 14:44:18,724 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,732 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,732 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.026)       0:09:55.177 ********** 
2025-07-29 14:44:18,750 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,758 p=193940 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,758 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.026)       0:09:55.204 ********** 
2025-07-29 14:44:18,776 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:18,788 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:18,788 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:18 +0000 (0:00:00.029)       0:09:55.233 ********** 
2025-07-29 14:44:19,838 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:19,847 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:44:19,847 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:19 +0000 (0:00:01.059)       0:09:56.293 ********** 
2025-07-29 14:44:20,126 p=193940 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:44:20,137 p=193940 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:44:20,137 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:20 +0000 (0:00:00.289)       0:09:56.582 ********** 
2025-07-29 14:44:20,412 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:44:20,673 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:44:20,684 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:20,684 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:20 +0000 (0:00:00.546)       0:09:57.129 ********** 
2025-07-29 14:44:20,702 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:20,711 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:44:20,711 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:20 +0000 (0:00:00.027)       0:09:57.156 ********** 
2025-07-29 14:44:20,729 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:20,775 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:44:20,775 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:20 +0000 (0:00:00.064)       0:09:57.220 ********** 
2025-07-29 14:44:21,059 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:44:21,314 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:44:21,570 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:44:21,821 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:44:22,078 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:44:22,334 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:44:22,347 p=193940 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:44:22,347 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:22 +0000 (0:00:01.572)       0:09:58.792 ********** 
2025-07-29 14:44:22,371 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:44:22,397 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Начало настройки Slurm Login узла] **************************************************************************************************************************************************************************************************
2025-07-29 14:44:22,398 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:22 +0000 (0:00:00.050)       0:09:58.843 ********** 
2025-07-29 14:44:22,424 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F511 Настройка Slurm Login узла: sm02\n\U0001F517 Master: sm01\n\U0001F465 Пользовательский доступ к кластеру"
2025-07-29 14:44:22,436 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Установка пакетов для пользователей] ************************************************************************************************************************************************************************************************
2025-07-29 14:44:22,436 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:22 +0000 (0:00:00.038)       0:09:58.881 ********** 
2025-07-29 14:44:24,596 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:24,605 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание директории Slurm] **********************************************************************************************************************************************************************************************************
2025-07-29 14:44:24,605 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:24 +0000 (0:00:02.169)       0:10:01.050 ********** 
2025-07-29 14:44:24,879 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:24,889 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование Slurm клиентских команд из NFS] *****************************************************************************************************************************************************************************************
2025-07-29 14:44:24,889 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:24 +0000 (0:00:00.283)       0:10:01.334 ********** 
2025-07-29 14:44:25,179 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:44:25,188 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результат установки клиентов] *******************************************************************************************************************************************************************************************************
2025-07-29 14:44:25,189 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:25 +0000 (0:00:00.299)       0:10:01.634 ********** 
2025-07-29 14:44:25,212 p=193940 u=master n=ansible | ok: [sm02] => 
  client_install.stdout_lines:
  - Установлено 20 команд
2025-07-29 14:44:25,221 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд] *************************************************************************************************************************************************************************************
2025-07-29 14:44:25,222 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:25 +0000 (0:00:00.033)       0:10:01.667 ********** 
2025-07-29 14:44:25,497 p=193940 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-29 14:44:25,750 p=193940 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-29 14:44:26,005 p=193940 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-29 14:44:26,263 p=193940 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-29 14:44:26,516 p=193940 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-29 14:44:26,765 p=193940 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-29 14:44:27,024 p=193940 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-29 14:44:27,283 p=193940 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-29 14:44:27,535 p=193940 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-29 14:44:27,807 p=193940 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-29 14:44:28,335 p=193940 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-29 14:44:28,595 p=193940 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-29 14:44:28,854 p=193940 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-29 14:44:29,120 p=193940 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-29 14:44:29,390 p=193940 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-29 14:44:29,654 p=193940 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-29 14:44:29,913 p=193940 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-29 14:44:29,933 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Обновление библиотечного кеша] ******************************************************************************************************************************************************************************************************
2025-07-29 14:44:29,933 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:29 +0000 (0:00:04.711)       0:10:06.378 ********** 
2025-07-29 14:44:30,252 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:44:30,262 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Ожидание конфигурационных файлов на NFS] ********************************************************************************************************************************************************************************************
2025-07-29 14:44:30,262 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:30 +0000 (0:00:00.329)       0:10:06.707 ********** 
2025-07-29 14:44:30,538 p=193940 u=master n=ansible | ok: [sm02] => (item=slurm.conf)
2025-07-29 14:44:30,812 p=193940 u=master n=ansible | ok: [sm02] => (item=gres.conf)
2025-07-29 14:44:31,071 p=193940 u=master n=ansible | ok: [sm02] => (item=cgroup.conf)
2025-07-29 14:44:31,082 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование конфигурационных файлов из NFS] *****************************************************************************************************************************************************************************************
2025-07-29 14:44:31,082 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:31 +0000 (0:00:00.820)       0:10:07.527 ********** 
2025-07-29 14:44:31,466 p=193940 u=master n=ansible | changed: [sm02] => (item=slurm.conf)
2025-07-29 14:44:31,792 p=193940 u=master n=ansible | changed: [sm02] => (item=gres.conf)
2025-07-29 14:44:32,123 p=193940 u=master n=ansible | changed: [sm02] => (item=cgroup.conf)
2025-07-29 14:44:32,134 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание пользовательских директорий] ***********************************************************************************************************************************************************************************************
2025-07-29 14:44:32,134 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:32 +0000 (0:00:01.051)       0:10:08.579 ********** 
2025-07-29 14:44:32,436 p=193940 u=master n=ansible | ok: [sm02] => (item=/home/users)
2025-07-29 14:44:32,684 p=193940 u=master n=ansible | ok: [sm02] => (item=/scratch)
2025-07-29 14:44:32,933 p=193940 u=master n=ansible | ok: [sm02] => (item=/projects)
2025-07-29 14:44:32,944 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание профиля Slurm для пользователей] *******************************************************************************************************************************************************************************************
2025-07-29 14:44:32,945 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:32 +0000 (0:00:00.810)       0:10:09.390 ********** 
2025-07-29 14:44:33,596 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:33,609 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Bash completion для Slurm команд] ***************************************************************************************************************************************************************************************************
2025-07-29 14:44:33,609 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:33 +0000 (0:00:00.664)       0:10:10.054 ********** 
2025-07-29 14:44:34,229 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:34,238 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Настройка SSH для пользователей] ****************************************************************************************************************************************************************************************************
2025-07-29 14:44:34,239 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:34 +0000 (0:00:00.629)       0:10:10.684 ********** 
2025-07-29 14:44:34,512 p=193940 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?MaxSessions', 'line': 'MaxSessions 10'})
2025-07-29 14:44:34,777 p=193940 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?PrintMotd', 'line': 'PrintMotd yes'})
2025-07-29 14:44:35,024 p=193940 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?Banner', 'line': 'Banner /etc/ssh/banner'})
2025-07-29 14:44:35,035 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание SSH banner] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:44:35,035 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:35 +0000 (0:00:00.796)       0:10:11.480 ********** 
2025-07-29 14:44:35,694 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:35,704 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Тест Slurm клиентских команд] *******************************************************************************************************************************************************************************************************
2025-07-29 14:44:35,704 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:35 +0000 (0:00:00.668)       0:10:12.149 ********** 
2025-07-29 14:44:35,993 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:36,002 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результаты тестирования] ************************************************************************************************************************************************************************************************************
2025-07-29 14:44:36,002 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:36 +0000 (0:00:00.297)       0:10:12.447 ********** 
2025-07-29 14:44:36,026 p=193940 u=master n=ansible | ok: [sm02] => 
  slurm_test.stdout_lines:
  - === ТЕСТ SLURM КОМАНД ===
  - 'sinfo version: slurm 25.05.1'
  - 'Cluster ping:'
  - Slurmctld(primary) at sm01 is UP
  - 'Cluster info:'
  - PARTITION AVAIL  TIMELIMIT   NODES(A/I/O/T) NODELIST
  - compute*     up   infinite          0/0/2/2 cn[01-02]
2025-07-29 14:44:36,037 p=193940 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Завершение настройки Login узла] ****************************************************************************************************************************************************************************************************
2025-07-29 14:44:36,038 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:36 +0000 (0:00:00.035)       0:10:12.483 ********** 
2025-07-29 14:44:36,090 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm Login узел sm02 настроен!\n\n\U0001F465 Пользователи могут:\n- Подключаться по SSH\n- Запускать задачи: sbatch, srun, salloc\n- Просматривать кластер: sinfo, squeue\n- Управлять задачами: scancel, scontrol\n\n\U0001F4C1 Доступные директории:\n/home/users, /scratch, /projects\n\n\U0001F527 Команды Slurm установлены в /usr/bin/\n\U0001F4CB Конфигурация синхронизирована с sm01\n\U0001F3AF Алиасы и автодополнение настроены\n\n\U0001F680 Login узел готов к работе!"
2025-07-29 14:44:36,126 p=193940 u=master n=ansible | PLAY [ЭТАП 6: Установка контейнеров] **********************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:36,187 p=193940 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:44:36,187 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:36 +0000 (0:00:00.149)       0:10:12.632 ********** 
2025-07-29 14:44:36,227 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-29 14:44:36,245 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-29 14:44:36,247 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-29 14:44:36,260 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-29 14:44:36,268 p=193940 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:36,269 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:36 +0000 (0:00:00.081)       0:10:12.714 ********** 
2025-07-29 14:44:37,029 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:37,035 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:37,055 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:37,066 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:37,075 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:37,075 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:37 +0000 (0:00:00.806)       0:10:13.520 ********** 
2025-07-29 14:44:38,139 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:38,175 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:38,184 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:48,019 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:44:48,029 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] ***************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:48,029 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:48 +0000 (0:00:10.953)       0:10:24.474 ********** 
2025-07-29 14:44:48,389 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:48,419 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:48,439 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:48,450 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:48,459 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:44:48,459 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:48 +0000 (0:00:00.430)       0:10:24.904 ********** 
2025-07-29 14:44:48,788 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:48,808 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:48,824 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:48,857 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:48,866 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:48,866 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:48 +0000 (0:00:00.406)       0:10:25.311 ********** 
2025-07-29 14:44:49,875 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:49,892 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:49,919 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:50,007 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:50,016 p=193940 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *************************************************************************************************************************************************************************************************************
2025-07-29 14:44:50,016 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:50 +0000 (0:00:01.150)       0:10:26.461 ********** 
2025-07-29 14:44:51,570 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:44:51,621 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:44:51,628 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:44:51,638 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:44:51,647 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **********************************************************************************************************************************************************************************************************
2025-07-29 14:44:51,647 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:51 +0000 (0:00:01.630)       0:10:28.092 ********** 
2025-07-29 14:44:51,685 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:51,702 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:44:51,715 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:44:51,900 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:51,909 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] ******************************************************************************************************************************************************************************************************
2025-07-29 14:44:51,909 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:51 +0000 (0:00:00.261)       0:10:28.354 ********** 
2025-07-29 14:44:52,184 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,204 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,230 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,238 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,442 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,459 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,490 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,553 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,696 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,712 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,749 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,807 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-29 14:44:52,945 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:44:52,966 p=193940 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:44:53,004 p=193940 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:44:53,061 p=193940 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-29 14:44:53,071 p=193940 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] **************************************************************************************************************************************************************************************************************
2025-07-29 14:44:53,072 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:53 +0000 (0:00:01.162)       0:10:29.517 ********** 
2025-07-29 14:44:53,114 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:44:53,352 p=193940 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-29 14:44:53,382 p=193940 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-29 14:44:53,395 p=193940 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-29 14:44:53,404 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] ******************************************************************************************************************************************************************************************************
2025-07-29 14:44:53,404 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:53 +0000 (0:00:00.332)       0:10:29.849 ********** 
2025-07-29 14:44:53,425 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:44:54,020 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:54,183 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:54,231 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:54,241 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ************************************************************************************************************************************************************************************************
2025-07-29 14:44:54,241 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:54 +0000 (0:00:00.836)       0:10:30.686 ********** 
2025-07-29 14:44:54,282 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:54,300 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:44:54,312 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:44:54,511 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:54,523 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:54,523 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:54 +0000 (0:00:00.282)       0:10:30.968 ********** 
2025-07-29 14:44:56,404 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:44:56,452 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:44:56,477 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:44:56,556 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:44:56,565 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:56,565 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:56 +0000 (0:00:02.042)       0:10:33.010 ********** 
2025-07-29 14:44:56,857 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:56,858 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:56,890 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:56,894 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:56,903 p=193940 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:56,903 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:56 +0000 (0:00:00.337)       0:10:33.348 ********** 
2025-07-29 14:44:56,944 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-29 14:44:56,963 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-29 14:44:56,964 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-29 14:44:56,982 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-29 14:44:56,991 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] ******************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:56,991 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:56 +0000 (0:00:00.087)       0:10:33.436 ********** 
2025-07-29 14:44:58,013 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:58,029 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:58,039 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:58,084 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:58,096 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] *******************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:58,096 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:58 +0000 (0:00:01.104)       0:10:34.541 ********** 
2025-07-29 14:44:58,363 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:58,390 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:44:58,395 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:44:58,417 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:44:58,425 p=193940 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *********************************************************************************************************************************************************************************************************************************
2025-07-29 14:44:58,425 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:58 +0000 (0:00:00.329)       0:10:34.870 ********** 
2025-07-29 14:44:58,469 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:44:58,489 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:44:58,490 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:44:58,504 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-29 14:44:58,513 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:44:58,513 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:58 +0000 (0:00:00.087)       0:10:34.958 ********** 
2025-07-29 14:44:58,550 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:58,570 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:44:58,583 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:44:59,450 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:44:59,460 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *********************************************************************************************************************************************************************************************************
2025-07-29 14:44:59,461 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:59 +0000 (0:00:00.947)       0:10:35.906 ********** 
2025-07-29 14:44:59,511 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:44:59,514 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:44:59,519 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:44:59,521 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:44:59,525 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:44:59,526 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:44:59,541 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:44:59,543 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:44:59,544 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:44:59,729 p=193940 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-29 14:44:59,974 p=193940 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-29 14:44:59,987 p=193940 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:44:59,988 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:44:59 +0000 (0:00:00.527)       0:10:36.433 ********** 
2025-07-29 14:45:00,079 p=193940 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-29 14:45:00,090 p=193940 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-29 14:45:00,099 p=193940 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-29 14:45:00,104 p=193940 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-29 14:45:00,107 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:00,109 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:00,121 p=193940 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-29 14:45:00,124 p=193940 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-29 14:45:00,125 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:00,251 p=193940 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-29 14:45:00,490 p=193940 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-29 14:45:00,500 p=193940 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] **************************************************************************************************************************************************************************************************
2025-07-29 14:45:00,500 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:00 +0000 (0:00:00.512)       0:10:36.945 ********** 
2025-07-29 14:45:00,605 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:45:00,607 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:45:00,611 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:45:00,616 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:45:00,618 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:45:00,622 p=193940 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:45:00,625 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:45:00,626 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:00,628 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:45:00,631 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:45:00,633 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:45:00,636 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:45:00,639 p=193940 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:45:00,640 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:00,647 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:45:00,650 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:45:00,653 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:45:00,656 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-29 14:45:00,659 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-29 14:45:00,662 p=193940 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-29 14:45:00,663 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:00,837 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-29 14:45:01,078 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-29 14:45:01,325 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-29 14:45:01,564 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-29 14:45:01,802 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-29 14:45:02,043 p=193940 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-29 14:45:02,056 p=193940 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:45:02,056 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:02 +0000 (0:00:01.556)       0:10:38.501 ********** 
2025-07-29 14:45:02,092 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:02,111 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:02,124 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:02,541 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:02,550 p=193940 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ****************************************************************************************************************************************************************************************************
2025-07-29 14:45:02,550 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:02 +0000 (0:00:00.493)       0:10:38.995 ********** 
2025-07-29 14:45:02,603 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:02,603 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:02,615 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:02,815 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:45:02,823 p=193940 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] ******************************************************************************************************************************************************************************************************************
2025-07-29 14:45:02,824 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:02 +0000 (0:00:00.273)       0:10:39.269 ********** 
2025-07-29 14:45:02,864 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:02,881 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:02,893 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:03,084 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:45:03,093 p=193940 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:45:03,093 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:03 +0000 (0:00:00.269)       0:10:39.538 ********** 
2025-07-29 14:45:03,135 p=193940 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-29 14:45:03,151 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:03,152 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:03,163 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:03,172 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:45:03,172 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:03 +0000 (0:00:00.079)       0:10:39.617 ********** 
2025-07-29 14:45:03,192 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:45:04,211 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:45:04,217 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:45:04,235 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:45:04,246 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] **************************************************************************************************************************************************************************************************************
2025-07-29 14:45:04,246 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:04 +0000 (0:00:01.074)       0:10:40.691 ********** 
2025-07-29 14:45:04,278 p=193940 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-29 14:45:04,290 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:45:04,544 p=193940 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-29 14:45:04,559 p=193940 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-29 14:45:04,581 p=193940 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-29 14:45:04,591 p=193940 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ********************************************************************************************************************************************************************************************
2025-07-29 14:45:04,591 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:04 +0000 (0:00:00.345)       0:10:41.036 ********** 
2025-07-29 14:45:04,616 p=193940 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-29 14:45:04,626 p=193940 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-29 14:45:04,637 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:45:04,890 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:45:04,911 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:45:04,933 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-29 14:45:05,144 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:45:05,173 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:45:05,185 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-29 14:45:05,196 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ****************************************************************************************************************************************************************************************************************************
2025-07-29 14:45:05,197 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:05 +0000 (0:00:00.605)       0:10:41.642 ********** 
2025-07-29 14:45:05,240 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:05,268 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:05,283 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:06,407 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:06,418 p=193940 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] ******************************************************************************************************************************************************************************************
2025-07-29 14:45:06,418 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:06 +0000 (0:00:01.221)       0:10:42.863 ********** 
2025-07-29 14:45:06,460 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:06,478 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:45:06,490 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:45:07,347 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:07,357 p=193940 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ************************************************************************************************************************************************************************************************************
2025-07-29 14:45:07,357 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:07 +0000 (0:00:00.939)       0:10:43.802 ********** 
2025-07-29 14:45:07,634 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,663 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,692 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,703 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,890 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,916 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,949 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:07,968 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,148 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,167 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,207 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,221 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,403 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,485 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,493 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,612 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:08,657 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:45:08,746 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:45:08,749 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:45:08,866 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-29 14:45:08,911 p=193940 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:09,000 p=193940 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:09,012 p=193940 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:09,121 p=193940 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-29 14:45:09,132 p=193940 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:45:09,132 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:09 +0000 (0:00:01.775)       0:10:45.577 ********** 
2025-07-29 14:45:09,175 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-29 14:45:09,194 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-29 14:45:09,197 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-29 14:45:09,212 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-29 14:45:09,246 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Исправление Pyxis + добавление enroot+caps] *******************************************************************************************************************************************************************************************
2025-07-29 14:45:09,246 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:09 +0000 (0:00:00.114)       0:10:45.691 ********** 
2025-07-29 14:45:09,286 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:45:09,306 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:45:09,309 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:45:09,320 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: Исправляем Pyxis + добавляем enroot+caps для compute узлов
2025-07-29 14:45:09,332 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Задание переменных] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:45:09,332 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:09 +0000 (0:00:00.085)       0:10:45.777 ********** 
2025-07-29 14:45:09,399 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:09,417 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:45:09,436 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:45:09,449 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:45:09,458 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Установка libslurm-dev (для headers)] *************************************************************************************************************************************************************************************************
2025-07-29 14:45:09,458 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:09 +0000 (0:00:00.126)       0:10:45.903 ********** 
2025-07-29 14:45:11,387 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:45:11,480 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:14,467 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:45:50,735 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:45:50,744 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Проверка установки Enroot] ************************************************************************************************************************************************************************************************************
2025-07-29 14:45:50,744 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:50 +0000 (0:00:41.285)       0:11:27.189 ********** 
2025-07-29 14:45:51,070 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:45:51,073 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:51,104 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:45:51,110 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:45:51,121 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Установка Enroot] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:45:51,122 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:51 +0000 (0:00:00.377)       0:11:27.567 ********** 
2025-07-29 14:45:51,387 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:45:51,418 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:45:51,424 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:45:51,444 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:45:51,454 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Установка enroot+caps на compute узлах (принудительно)] *******************************************************************************************************************************************************************************
2025-07-29 14:45:51,454 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:51 +0000 (0:00:00.332)       0:11:27.899 ********** 
2025-07-29 14:45:51,477 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:45:51,494 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:54,459 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:45:56,911 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:45:56,922 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Результат установки enroot+caps] ******************************************************************************************************************************************************************************************************
2025-07-29 14:45:56,923 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:56 +0000 (0:00:05.468)       0:11:33.368 ********** 
2025-07-29 14:45:56,947 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:45:56,974 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:45:57,016 p=193940 u=master n=ansible | ok: [cn01] => 
  enroot_caps_install.stdout_lines:
  - === УСТАНОВКА ENROOT+CAPS ===
  - (Reading database ... 94172 files and directories currently installed.)
  - Preparing to unpack enroot+caps_3.5.0-1_amd64.deb ...
  - Unpacking enroot+caps (3.5.0-1) over (3.5.0-1) ...
  - Setting up enroot+caps (3.5.0-1) ...
  - '✅ Capabilities установлены:'
  - /usr/bin/enroot-aufs2ovlfs cap_sys_admin,cap_mknod=ep
  - ✅ enroot+caps установлен на cn01
2025-07-29 14:45:57,035 p=193940 u=master n=ansible | ok: [cn02] => 
  enroot_caps_install.stdout_lines:
  - === УСТАНОВКА ENROOT+CAPS ===
  - Selecting previously unselected package enroot+caps.
  - (Reading database ... 94169 files and directories currently installed.)
  - Preparing to unpack enroot+caps_3.5.0-1_amd64.deb ...
  - Unpacking enroot+caps (3.5.0-1) ...
  - Setting up enroot+caps (3.5.0-1) ...
  - '✅ Capabilities установлены:'
  - /usr/bin/enroot-aufs2ovlfs cap_sys_admin,cap_mknod=ep
  - ✅ enroot+caps установлен на cn02
2025-07-29 14:45:57,044 p=193940 u=master n=ansible | TASK [containers : [PYXIS] Очистка старых файлов] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:45:57,044 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:57 +0000 (0:00:00.121)       0:11:33.489 ********** 
2025-07-29 14:45:57,320 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:45:57,337 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:45:57,365 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:45:57,372 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:45:57,383 p=193940 u=master n=ansible | TASK [containers : [PYXIS] Создание build директории] *****************************************************************************************************************************************************************************************************************
2025-07-29 14:45:57,383 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:57 +0000 (0:00:00.339)       0:11:33.829 ********** 
2025-07-29 14:45:57,661 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:45:57,691 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:45:57,700 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:45:57,730 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:45:57,740 p=193940 u=master n=ansible | TASK [containers : [PYXIS] Скачивание исходников] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:45:57,740 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:57 +0000 (0:00:00.356)       0:11:34.185 ********** 
2025-07-29 14:45:58,885 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:45:58,891 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:45:58,892 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:45:58,930 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:45:58,939 p=193940 u=master n=ansible | TASK [containers : [PYXIS] Извлечение исходников] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:45:58,939 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:58 +0000 (0:00:01.198)       0:11:35.384 ********** 
2025-07-29 14:45:59,685 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:45:59,971 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:45:59,974 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:45:59,975 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:45:59,984 p=193940 u=master n=ansible | TASK [containers : [PYXIS] ИСПРАВЛЕННАЯ компиляция] *******************************************************************************************************************************************************************************************************************
2025-07-29 14:45:59,984 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:45:59 +0000 (0:00:01.044)       0:11:36.429 ********** 
2025-07-29 14:46:01,479 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:46:01,599 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:46:01,889 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:46:03,646 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:46:03,655 p=193940 u=master n=ansible | TASK [containers : [CONFIG] Создание ПРАВИЛЬНОГО plugstack.conf] ******************************************************************************************************************************************************************************************************
2025-07-29 14:46:03,656 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:03 +0000 (0:00:03.671)       0:11:40.101 ********** 
2025-07-29 14:46:04,331 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:46:04,644 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:46:04,645 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:46:04,645 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:46:04,655 p=193940 u=master n=ansible | TASK [containers : [ENROOT] Создание директорий Enroot] ***************************************************************************************************************************************************************************************************************
2025-07-29 14:46:04,656 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:04 +0000 (0:00:01.000)       0:11:41.101 ********** 
2025-07-29 14:46:04,928 p=193940 u=master n=ansible | ok: [sm01] => (item=/var/lib/enroot)
2025-07-29 14:46:04,959 p=193940 u=master n=ansible | ok: [sm02] => (item=/var/lib/enroot)
2025-07-29 14:46:04,980 p=193940 u=master n=ansible | ok: [cn01] => (item=/var/lib/enroot)
2025-07-29 14:46:05,088 p=193940 u=master n=ansible | ok: [cn02] => (item=/var/lib/enroot)
2025-07-29 14:46:05,181 p=193940 u=master n=ansible | ok: [sm01] => (item=/var/cache/enroot)
2025-07-29 14:46:05,221 p=193940 u=master n=ansible | ok: [sm02] => (item=/var/cache/enroot)
2025-07-29 14:46:05,236 p=193940 u=master n=ansible | ok: [cn01] => (item=/var/cache/enroot)
2025-07-29 14:46:05,342 p=193940 u=master n=ansible | ok: [cn02] => (item=/var/cache/enroot)
2025-07-29 14:46:05,432 p=193940 u=master n=ansible | ok: [sm01] => (item=/run/enroot)
2025-07-29 14:46:05,470 p=193940 u=master n=ansible | ok: [sm02] => (item=/run/enroot)
2025-07-29 14:46:05,495 p=193940 u=master n=ansible | changed: [cn01] => (item=/run/enroot)
2025-07-29 14:46:05,600 p=193940 u=master n=ansible | changed: [cn02] => (item=/run/enroot)
2025-07-29 14:46:05,688 p=193940 u=master n=ansible | ok: [sm01] => (item=/etc/enroot)
2025-07-29 14:46:05,722 p=193940 u=master n=ansible | ok: [sm02] => (item=/etc/enroot)
2025-07-29 14:46:05,751 p=193940 u=master n=ansible | ok: [cn01] => (item=/etc/enroot)
2025-07-29 14:46:05,854 p=193940 u=master n=ansible | ok: [cn02] => (item=/etc/enroot)
2025-07-29 14:46:05,864 p=193940 u=master n=ansible | TASK [containers : [ENROOT] Создание директорий Enroot с правильными правами] *****************************************************************************************************************************************************************************************
2025-07-29 14:46:05,864 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:05 +0000 (0:00:01.208)       0:11:42.309 ********** 
2025-07-29 14:46:06,164 p=193940 u=master n=ansible | changed: [sm02]
2025-07-29 14:46:06,170 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:46:06,178 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:46:06,196 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:46:06,206 p=193940 u=master n=ansible | TASK [containers : [ENROOT] Продакшн конфигурация Enroot] *************************************************************************************************************************************************************************************************************
2025-07-29 14:46:06,207 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:06 +0000 (0:00:00.342)       0:11:42.652 ********** 
2025-07-29 14:46:06,821 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:46:06,974 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:46:07,080 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:46:07,087 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:46:07,095 p=193940 u=master n=ansible | TASK [containers : [VERIFY] Проверка исправлений] *********************************************************************************************************************************************************************************************************************
2025-07-29 14:46:07,096 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:07 +0000 (0:00:00.888)       0:11:43.541 ********** 
2025-07-29 14:46:07,368 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:46:07,456 p=193940 u=master n=ansible | ok: [sm02]
2025-07-29 14:46:07,466 p=193940 u=master n=ansible | ok: [cn01]
2025-07-29 14:46:07,495 p=193940 u=master n=ansible | ok: [cn02]
2025-07-29 14:46:07,504 p=193940 u=master n=ansible | TASK [containers : [CONTAINERS] Результат исправления] ****************************************************************************************************************************************************************************************************************
2025-07-29 14:46:07,504 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:07 +0000 (0:00:00.408)       0:11:43.949 ********** 
2025-07-29 14:46:07,545 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:46 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:46:07,567 p=193940 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:46 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:46:07,569 p=193940 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:46 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n✅ Enroot+caps check:\n/usr/bin/enroot-aufs2ovlfs cap_sys_admin,cap_mknod=ep\n\n\U0001F3AF На compute узле также установлен enroot+caps\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:46:07,585 p=193940 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Исправления завершены:\n=== ПРОВЕРКА ИСПРАВЛЕНИЙ ===\n✅ Pyxis plugin: -rw-r--r-- 1 root root 60512 Jul 29 17:46 /usr/local/lib/slurm/spank_pyxis.so\n✅ plugstack.conf:\n# Slurm SPANK Plugin Stack Configuration\nrequired /usr/local/lib/slurm/spank_pyxis.so\n✅ Enroot+caps check:\n/usr/bin/enroot-aufs2ovlfs cap_sys_admin,cap_mknod=ep\n\n\U0001F3AF На compute узле также установлен enroot+caps\n\nТеперь перезапустите slurmd:\nsudo systemctl restart slurmd"
2025-07-29 14:46:07,664 p=193940 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:46:07,664 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:07 +0000 (0:00:00.159)       0:11:44.109 ********** 
2025-07-29 14:46:09,619 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:46:09,627 p=193940 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *************************************************************************************************************************************************************************************************************************
2025-07-29 14:46:09,628 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:09 +0000 (0:00:01.963)       0:11:46.073 ********** 
2025-07-29 14:46:09,902 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:46:09,952 p=193940 u=master n=ansible | PLAY [ЭТАП 7: Перезапуск сервисов] ************************************************************************************************************************************************************************************************************************************
2025-07-29 14:46:10,003 p=193940 u=master n=ansible | TASK [Перезапуск slurmd] **********************************************************************************************************************************************************************************************************************************************
2025-07-29 14:46:10,003 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:46:10 +0000 (0:00:00.375)       0:11:46.448 ********** 
2025-07-29 14:46:10,040 p=193940 u=master n=ansible | skipping: [sm01]
2025-07-29 14:46:10,054 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:46:11,079 p=193940 u=master n=ansible | changed: [cn01]
2025-07-29 14:47:23,697 p=193940 u=master n=ansible | changed: [cn02]
2025-07-29 14:47:23,707 p=193940 u=master n=ansible | TASK [Перезапуск slurmctld] *******************************************************************************************************************************************************************************************************************************************
2025-07-29 14:47:23,708 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:47:23 +0000 (0:01:13.704)       0:13:00.153 ********** 
2025-07-29 14:47:23,747 p=193940 u=master n=ansible | skipping: [sm02]
2025-07-29 14:47:23,764 p=193940 u=master n=ansible | skipping: [cn01]
2025-07-29 14:47:23,776 p=193940 u=master n=ansible | skipping: [cn02]
2025-07-29 14:47:26,887 p=193940 u=master n=ansible | changed: [sm01]
2025-07-29 14:47:26,896 p=193940 u=master n=ansible | TASK [Пауза] **********************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:47:26,897 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:47:26 +0000 (0:00:03.188)       0:13:03.342 ********** 
2025-07-29 14:47:26,916 p=193940 u=master n=ansible | Pausing for 5 seconds
2025-07-29 14:47:26,917 p=193940 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-29 14:47:31,922 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:47:32,057 p=193940 u=master n=ansible | PLAY [ЭТАП 8: Тестирование] *******************************************************************************************************************************************************************************************************************************************
2025-07-29 14:47:32,076 p=193940 u=master n=ansible | TASK [Тест кластера] **************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:47:32,077 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:47:32 +0000 (0:00:05.180)       0:13:08.522 ********** 
2025-07-29 14:51:46,192 p=193940 u=master n=ansible | ok: [sm01]
2025-07-29 14:51:46,201 p=193940 u=master n=ansible | TASK [Результат] ******************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:51:46,201 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:51:46 +0000 (0:04:14.124)       0:17:22.646 ********** 
2025-07-29 14:51:46,225 p=193940 u=master n=ansible | ok: [sm01] => 
  msg: "=== ТЕСТ КЛАСТЕРА ===\nSlurmctld(primary) at sm01 is UP\nPARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST\ncompute*     up   infinite      2  inval cn[01-02]\ncn01\nКонтейнеры настраиваются...\n\n\U0001F389 КЛАСТЕР УСТАНОВЛЕН!\n\nКоманды для тестирования:\n- sinfo\n- srun hostname\n- srun --container-image=docker://hello-world"
2025-07-29 14:51:46,250 p=193940 u=master n=ansible | PLAY RECAP ************************************************************************************************************************************************************************************************************************************************************
2025-07-29 14:51:46,250 p=193940 u=master n=ansible | cn01                       : ok=137  changed=26   unreachable=0    failed=0    skipped=63   rescued=0    ignored=0   
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | cn02                       : ok=136  changed=26   unreachable=0    failed=0    skipped=63   rescued=0    ignored=0   
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | localhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | sm01                       : ok=162  changed=54   unreachable=0    failed=0    skipped=21   rescued=0    ignored=0   
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | sm02                       : ok=130  changed=23   unreachable=0    failed=0    skipped=64   rescued=0    ignored=0   
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | Playbook run took 0 days, 0 hours, 17 minutes, 22 seconds
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | Tuesday 29 July 2025  14:51:46 +0000 (0:00:00.050)       0:17:22.696 ********** 
2025-07-29 14:51:46,251 p=193940 u=master n=ansible | =============================================================================== 
2025-07-29 14:51:46,252 p=193940 u=master n=ansible | slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 325.01s
2025-07-29 14:51:46,252 p=193940 u=master n=ansible | Тест кластера ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 254.12s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | Перезапуск slurmd --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 73.70s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | containers : [CONTAINERS] Установка libslurm-dev (для headers) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 41.29s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 41.04s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | common : [COMMON] Обновление apt cache ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 34.39s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 19.82s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 16.22s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 12.11s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | common : [COMMON] Установка базовых пакетов ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 11.08s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | common : [COMMON] Установка базовых пакетов ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 10.95s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | slurm_build : [SLURM_BUILD] Извлечение исходников Slurm -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.58s
2025-07-29 14:51:46,253 p=193940 u=master n=ansible | containers : [CONTAINERS] Установка enroot+caps на compute узлах (принудительно) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.47s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | Пауза ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.18s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.04s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm -------------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.92s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.71s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | common : [COMMON] Создание MUNGE ключа на остальных узлах ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.90s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | containers : [PYXIS] ИСПРАВЛЕННАЯ компиляция ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.67s
2025-07-29 14:51:46,254 p=193940 u=master n=ansible | Перезапуск slurmctld ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.19s
2025-07-29 14:54:58,906 p=197170 u=master n=ansible | cn01 | CHANGED | rc=0 >>
drwxrwxrwt 2 root   root     40 Jul 29 17:54 /run/enroot
drwxrwxrwt 3 master master 4096 Jul 29 17:45 /tmp/enroot-data
drwxrwxrwt 2 root   root   4096 Jul 29 17:54 /var/lib/enroot-cache

2025-07-29 14:54:59,149 p=197170 u=master n=ansible | cn02 | CHANGED | rc=0 >>
drwxrwxrwt 2 root root   40 Jul 29 17:54 /run/enroot
drwxrwxrwt 2 root root 4096 Jul 29 17:54 /tmp/enroot-data
drwxrwxrwt 2 root root 4096 Jul 29 17:54 /var/lib/enroot-cache

2025-07-29 15:32:35,369 p=197496 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ************************************************************************************************************************************************
2025-07-29 15:32:35,370 p=197496 u=master n=ansible | skipping: no hosts matched
2025-07-29 15:32:35,372 p=197496 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *****************************************************************************************************************************************************
2025-07-29 15:32:35,391 p=197496 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *************************************************************************************************************************************
2025-07-29 15:32:35,409 p=197496 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] *******************************************************************************************************************************************************
2025-07-29 15:32:35,409 p=197496 u=master n=ansible | skipping: no hosts matched
2025-07-29 15:32:35,412 p=197496 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] ******************************************************************************************************************************************************
2025-07-29 15:32:35,430 p=197496 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ********************************************************************************************************************************************************
2025-07-29 15:32:35,430 p=197496 u=master n=ansible | skipping: no hosts matched
2025-07-29 15:32:35,431 p=197496 u=master n=ansible | PLAY [ЭТАП 6: Отключение AppArmor] ****************************************************************************************************************************************************
2025-07-29 15:32:35,436 p=197496 u=master n=ansible | PLAY [ЭТАП 7: Установка контейнеров] **************************************************************************************************************************************************
2025-07-29 15:32:35,451 p=197496 u=master n=ansible | PLAY [ЭТАП 8: Перезапуск сервисов] ****************************************************************************************************************************************************
2025-07-29 15:32:35,453 p=197496 u=master n=ansible | PLAY [ЭТАП 9: Тестирование] ***********************************************************************************************************************************************************
2025-07-29 15:32:35,454 p=197496 u=master n=ansible | skipping: no hosts matched
2025-07-29 15:32:35,454 p=197496 u=master n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************
2025-07-29 15:32:35,454 p=197496 u=master n=ansible | Playbook run took 0 days, 0 hours, 0 minutes, 0 seconds
2025-07-29 15:32:35,454 p=197496 u=master n=ansible | Tuesday 29 July 2025  15:32:35 +0000 (0:00:00.086)       0:00:00.086 ********** 
2025-07-29 15:32:35,454 p=197496 u=master n=ansible | =============================================================================== 
2025-07-29 15:32:35,454 p=197496 u=master n=ansible |  [ERROR]: No matching task "ЭТАП 6: Отключение AppArmor" found. Note: --start-at-task can only follow static includes.

2025-07-29 15:33:33,982 p=197575 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:33:33,983 p=197575 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:33:35,151 p=197575 u=master n=ansible | cn02 | SUCCESS | rc=0 >>


2025-07-29 15:33:35,177 p=197575 u=master n=ansible | cn01 | SUCCESS | rc=0 >>


2025-07-29 15:33:35,196 p=197575 u=master n=ansible | cn01 | SKIPPED
2025-07-29 15:33:35,202 p=197575 u=master n=ansible | cn02 | SKIPPED
2025-07-29 15:33:35,620 p=197575 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:33:35,621 p=197575 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:33:57,560 p=197641 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:33:57,562 p=197641 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:33:58,002 p=197641 u=master n=ansible | cn01 | SUCCESS | rc=0 >>


2025-07-29 15:33:58,006 p=197641 u=master n=ansible | cn02 | SUCCESS | rc=0 >>


2025-07-29 15:33:58,024 p=197641 u=master n=ansible | cn01 | SKIPPED
2025-07-29 15:33:58,030 p=197641 u=master n=ansible | cn02 | SKIPPED
2025-07-29 15:33:58,444 p=197641 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:33:58,444 p=197641 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:34:34,534 p=197749 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:34:34,536 p=197749 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:34:34,975 p=197749 u=master n=ansible | cn02 | SUCCESS | rc=0 >>


2025-07-29 15:34:34,975 p=197749 u=master n=ansible | cn01 | SUCCESS | rc=0 >>


2025-07-29 15:34:34,994 p=197749 u=master n=ansible | cn01 | SKIPPED
2025-07-29 15:34:35,000 p=197749 u=master n=ansible | cn02 | SKIPPED
2025-07-29 15:34:35,417 p=197749 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:34:35,434 p=197749 u=master n=ansible | cn02 | CHANGED => {
    "changed": true,
    "msg": "1 replacements made",
    "rc": 0
}
2025-07-29 15:35:02,900 p=197832 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:35:02,902 p=197832 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:35:03,383 p=197832 u=master n=ansible | cn02 | SUCCESS | rc=0 >>


2025-07-29 15:35:03,385 p=197832 u=master n=ansible | cn01 | SUCCESS | rc=0 >>


2025-07-29 15:35:03,403 p=197832 u=master n=ansible | cn01 | SKIPPED
2025-07-29 15:35:03,409 p=197832 u=master n=ansible | cn02 | SKIPPED
2025-07-29 15:35:03,842 p=197832 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:35:03,843 p=197832 u=master n=ansible | cn02 | CHANGED => {
    "changed": true,
    "msg": "1 replacements made",
    "rc": 0
}
2025-07-29 15:35:37,959 p=197892 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:35:37,961 p=197892 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "include_args": {
        "name": "grub_apparmor"
    }
}
2025-07-29 15:35:38,404 p=197892 u=master n=ansible | cn01 | SUCCESS | rc=0 >>


2025-07-29 15:35:38,486 p=197892 u=master n=ansible | cn02 | SUCCESS | rc=1 >>
non-zero return code

2025-07-29 15:35:38,504 p=197892 u=master n=ansible | cn01 | SKIPPED
2025-07-29 15:35:38,935 p=197892 u=master n=ansible | cn02 | CHANGED => {
    "backup_file": "/etc/default/grub.1702.2025-07-29@18:35:38~",
    "changed": true,
    "msg": "1 replacements made",
    "rc": 0
}
2025-07-29 15:35:39,215 p=197892 u=master n=ansible | cn01 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:35:39,220 p=197892 u=master n=ansible | cn02 | SUCCESS => {
    "changed": false,
    "msg": "",
    "rc": 0
}
2025-07-29 15:35:41,495 p=197892 u=master n=ansible | cn02 | CHANGED | rc=0 >>
Sourcing file `/etc/default/grub'
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-6.8.0-64-generic
Found initrd image: /boot/initrd.img-6.8.0-64-generic
Warning: os-prober will not be executed to detect other bootable partitions.
Systems on them will not be added to the GRUB boot configuration.
Check GRUB_DISABLE_OS_PROBER documentation entry.
Adding boot menu entry for UEFI Firmware Settings ...
done

2025-07-29 15:39:13,681 p=197892 u=master n=ansible | cn02 | CHANGED => {
    "changed": true,
    "elapsed": 210,
    "rebooted": true
}
2025-07-29 15:44:02,028 p=198086 u=master n=ansible | cn02 | CHANGED | rc=0 >>
drwxrwxrwt 2 root root   40 Jul 29 18:44 /run/enroot
drwxrwxrwt 2 root root 4096 Jul 29 18:44 /tmp/enroot-data
drwxrwxrwt 2 root root 4096 Jul 29 18:44 /var/lib/enroot-cache

2025-07-29 15:44:04,726 p=198086 u=master n=ansible | cn01 | CHANGED | rc=0 >>
drwxrwxrwt 2 root root   40 Jul 29 18:44 /run/enroot
drwxrwxrwt 2 root root 4096 Jul 29 18:44 /tmp/enroot-data
drwxrwxrwt 2 root root 4096 Jul 29 18:44 /var/lib/enroot-cache

2025-07-30 09:40:35,328 p=206329 u=master n=ansible |  [ERROR]: User interrupted execution

2025-07-30 09:40:41,344 p=206404 u=master n=ansible | cn02 | CHANGED | rc=0 >>
drwxrwxrwt 2 root root   40 Jul 30 12:40 /run/enroot
drwxrwxrwt 2 root root 4096 Jul 29 18:44 /tmp/enroot-data
drwxrwxrwt 2 root root 4096 Jul 30 12:40 /var/lib/enroot-cache

2025-07-30 09:40:41,483 p=206404 u=master n=ansible | cn01 | CHANGED | rc=0 >>
drwxrwxrwt 2 root root   40 Jul 30 12:40 /run/enroot
drwxrwxrwt 2 root root 4096 Jul 29 18:44 /tmp/enroot-data
drwxrwxrwt 2 root root 4096 Jul 30 12:40 /var/lib/enroot-cache

2025-07-30 09:40:48,530 p=206473 u=master n=ansible | Starting galaxy role install process
2025-07-30 09:40:48,944 p=206473 u=master n=ansible | - downloading role 'enroot', owned by nvidia
2025-07-30 09:40:49,833 p=206473 u=master n=ansible | [WARNING]: - nvidia.enroot was NOT installed successfully: - the specified version (>=1.0.0) of nvidia.enroot was not found in the list of available versions ([{'id': 102141, 'name':
'v0.1.0', 'version': '0.1.0', 'created': '2019-08-20T21:38:42.519689Z', 'modified': '2019-08-20T21:38:42.519716Z', 'commit_date': '2019-08-20T17:33:25-04:00', 'commit_sha':
'7eae4a3f53babed94ea384da533a47a1f3918253', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.1.0.tar.gz'}, {'id': 109411, 'name': 'v0.1.1', 'version':
'0.1.1', 'created': '2019-11-16T00:02:58.283771Z', 'modified': '2019-11-16T00:02:58.283817Z', 'commit_date': '2019-09-05T17:02:40-04:00', 'commit_sha':
'44de4f304d4b6b1c6d8bb5ac0c74ba72a6d9a54c', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.1.1.tar.gz'}, {'id': 109410, 'name': 'v0.1.2', 'version':
'0.1.2', 'created': '2019-11-16T00:02:58.020692Z', 'modified': '2019-11-16T00:02:58.020731Z', 'commit_date': '2019-09-05T19:17:10-04:00', 'commit_sha':
'71ecf8d87b1af3af19451c8f00ea37f2f82a4b8d', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.1.2.tar.gz'}, {'id': 129576, 'name': 'v0.2.0', 'version':
'0.2.0', 'created': '2020-06-17T15:47:02.621353Z', 'modified': '2020-06-17T15:47:02.621379Z', 'commit_date': '2020-06-17T11:43:45-04:00', 'commit_sha':
'0e264784e328c141e7e2f654316a30db57110b34', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.2.0.tar.gz'}, {'id': 133007, 'name': 'v0.3.0', 'version':
'0.3.0', 'created': '2020-08-06T19:40:57.892307Z', 'modified': '2020-08-06T19:40:57.892332Z', 'commit_date': '2020-08-06T15:39:17-04:00', 'commit_sha':
'33ce7307d27d6f231983d7e803ae4e52f3dddd41', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.3.0.tar.gz'}, {'id': 143193, 'name': 'v0.3.1', 'version':
'0.3.1', 'created': '2020-12-10T17:10:55.659967Z', 'modified': '2020-12-10T17:10:55.660009Z', 'commit_date': '2020-12-10T12:08:35-05:00', 'commit_sha':
'21b72a2e9d0db77843b4ceff67b8e4d870e1b7b0', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.3.1.tar.gz'}, {'id': 143495, 'name': 'v0.3.2', 'version':
'0.3.2', 'created': '2020-12-16T21:09:44.172551Z', 'modified': '2020-12-16T21:09:44.172579Z', 'commit_date': '2020-12-16T16:08:31-05:00', 'commit_sha':
'bf0b54378a7c4449fc8287676b7d8bb6353465f3', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.3.2.tar.gz'}, {'id': 150017, 'name': 'v0.4.0', 'version':
'0.4.0', 'created': '2021-03-19T14:39:27.902414Z', 'modified': '2021-03-19T14:39:27.902453Z', 'commit_date': '2021-03-18T13:32:49-04:00', 'commit_sha':
'5920a1dc441ae44d5943ab54e5a5117b2a22dffb', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.4.0.tar.gz'}, {'id': 163387, 'name': 'v0.5.0', 'version':
'0.5.0', 'created': '2021-08-31T17:58:54.300608Z', 'modified': '2021-08-31T17:58:54.300971Z', 'commit_date': '2021-08-31T13:52:56-04:00', 'commit_sha':
'187cb67316c1a65ab3c5d803973ad19155d887c8', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.5.0.tar.gz'}]).

2025-07-30 09:40:49,834 p=206473 u=master n=ansible | ERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.
2025-07-30 09:42:08,011 p=206519 u=master n=ansible | Starting galaxy role install process
2025-07-30 09:42:08,285 p=206519 u=master n=ansible | - downloading role 'enroot', owned by nvidia
2025-07-30 09:42:08,932 p=206519 u=master n=ansible | [WARNING]: - nvidia.enroot was NOT installed successfully: - the specified version (0.5.0) of nvidia.enroot was not found in the list of available versions ([{'id': 102141, 'name':
'v0.1.0', 'version': '0.1.0', 'created': '2019-08-20T21:38:42.519689Z', 'modified': '2019-08-20T21:38:42.519716Z', 'commit_date': '2019-08-20T17:33:25-04:00', 'commit_sha':
'7eae4a3f53babed94ea384da533a47a1f3918253', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.1.0.tar.gz'}, {'id': 109411, 'name': 'v0.1.1', 'version':
'0.1.1', 'created': '2019-11-16T00:02:58.283771Z', 'modified': '2019-11-16T00:02:58.283817Z', 'commit_date': '2019-09-05T17:02:40-04:00', 'commit_sha':
'44de4f304d4b6b1c6d8bb5ac0c74ba72a6d9a54c', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.1.1.tar.gz'}, {'id': 109410, 'name': 'v0.1.2', 'version':
'0.1.2', 'created': '2019-11-16T00:02:58.020692Z', 'modified': '2019-11-16T00:02:58.020731Z', 'commit_date': '2019-09-05T19:17:10-04:00', 'commit_sha':
'71ecf8d87b1af3af19451c8f00ea37f2f82a4b8d', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.1.2.tar.gz'}, {'id': 129576, 'name': 'v0.2.0', 'version':
'0.2.0', 'created': '2020-06-17T15:47:02.621353Z', 'modified': '2020-06-17T15:47:02.621379Z', 'commit_date': '2020-06-17T11:43:45-04:00', 'commit_sha':
'0e264784e328c141e7e2f654316a30db57110b34', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.2.0.tar.gz'}, {'id': 133007, 'name': 'v0.3.0', 'version':
'0.3.0', 'created': '2020-08-06T19:40:57.892307Z', 'modified': '2020-08-06T19:40:57.892332Z', 'commit_date': '2020-08-06T15:39:17-04:00', 'commit_sha':
'33ce7307d27d6f231983d7e803ae4e52f3dddd41', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.3.0.tar.gz'}, {'id': 143193, 'name': 'v0.3.1', 'version':
'0.3.1', 'created': '2020-12-10T17:10:55.659967Z', 'modified': '2020-12-10T17:10:55.660009Z', 'commit_date': '2020-12-10T12:08:35-05:00', 'commit_sha':
'21b72a2e9d0db77843b4ceff67b8e4d870e1b7b0', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.3.1.tar.gz'}, {'id': 143495, 'name': 'v0.3.2', 'version':
'0.3.2', 'created': '2020-12-16T21:09:44.172551Z', 'modified': '2020-12-16T21:09:44.172579Z', 'commit_date': '2020-12-16T16:08:31-05:00', 'commit_sha':
'bf0b54378a7c4449fc8287676b7d8bb6353465f3', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.3.2.tar.gz'}, {'id': 150017, 'name': 'v0.4.0', 'version':
'0.4.0', 'created': '2021-03-19T14:39:27.902414Z', 'modified': '2021-03-19T14:39:27.902453Z', 'commit_date': '2021-03-18T13:32:49-04:00', 'commit_sha':
'5920a1dc441ae44d5943ab54e5a5117b2a22dffb', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.4.0.tar.gz'}, {'id': 163387, 'name': 'v0.5.0', 'version':
'0.5.0', 'created': '2021-08-31T17:58:54.300608Z', 'modified': '2021-08-31T17:58:54.300971Z', 'commit_date': '2021-08-31T13:52:56-04:00', 'commit_sha':
'187cb67316c1a65ab3c5d803973ad19155d887c8', 'download_url': 'https://github.com/NVIDIA/ansible-role-enroot/archive/v0.5.0.tar.gz'}]).

2025-07-30 09:42:08,933 p=206519 u=master n=ansible | ERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.
2025-07-30 09:43:33,683 p=206612 u=master n=ansible | Starting galaxy role install process
2025-07-30 09:43:33,989 p=206612 u=master n=ansible | - downloading role 'enroot', owned by nvidia
2025-07-30 09:43:34,939 p=206612 u=master n=ansible | - downloading role from https://github.com/NVIDIA/ansible-role-enroot/archive/v0.5.0.tar.gz
2025-07-30 09:43:35,886 p=206612 u=master n=ansible | - extracting nvidia.enroot to /home/master/22Jul/slurm-hpc-cluster/roles/nvidia.enroot
2025-07-30 09:43:35,892 p=206612 u=master n=ansible | - nvidia.enroot (v0.5.0) was installed successfully
2025-07-30 09:43:35,892 p=206612 u=master n=ansible | Starting galaxy collection install process
2025-07-30 09:43:36,796 p=206612 u=master n=ansible | Nothing to do. All requested collections are already installed. If you want to reinstall them, consider using `--force`.
2025-07-30 09:49:13,117 p=206881 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ************************************************************************************************************************************************
2025-07-30 09:49:13,127 p=206881 u=master n=ansible | TASK [Информация о развертывании] *****************************************************************************************************************************************************
2025-07-30 09:49:13,127 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:13 +0000 (0:00:00.012)       0:00:00.012 ******** 
2025-07-30 09:49:13,188 p=206881 u=master n=ansible | ok: [localhost] => 
  msg: "\U0001F680 Установка Slurm HPC кластера\n\U0001F4CD Master:  sm01\n\U0001F4CD Login:   sm02\n\U0001F4CD Compute: cn01, cn02"
2025-07-30 09:49:13,196 p=206881 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *****************************************************************************************************************************************************
2025-07-30 09:49:13,210 p=206881 u=master n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************
2025-07-30 09:49:13,210 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:13 +0000 (0:00:00.082)       0:00:00.094 ******** 
2025-07-30 09:49:15,665 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:15,710 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:16,072 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:16,087 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:16,127 p=206881 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ********************************************************************************************************************************
2025-07-30 09:49:16,128 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:16 +0000 (0:00:02.917)       0:00:03.012 ******** 
2025-07-30 09:49:16,158 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-30 09:49:16,173 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-30 09:49:16,175 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-30 09:49:16,190 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-30 09:49:16,198 p=206881 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *****************************************************************************************************************************************
2025-07-30 09:49:16,198 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:16 +0000 (0:00:00.070)       0:00:03.083 ******** 
2025-07-30 09:49:21,696 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:49:26,401 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:49:27,390 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:30,376 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:49:30,383 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ************************************************************************************************************************************
2025-07-30 09:49:30,383 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:30 +0000 (0:00:14.184)       0:00:17.268 ******** 
2025-07-30 09:49:31,506 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:31,513 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:31,596 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:31,602 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:31,609 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] *******************************************************************************************************************************************
2025-07-30 09:49:31,609 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:31 +0000 (0:00:01.226)       0:00:18.494 ******** 
2025-07-30 09:49:32,149 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:32,208 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:32,215 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:32,293 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:32,303 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] **********************************************************************************************************************************
2025-07-30 09:49:32,303 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:32 +0000 (0:00:00.693)       0:00:19.188 ******** 
2025-07-30 09:49:32,835 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:32,846 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:32,886 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:32,990 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:32,998 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] **********************************************************************************************************************************************
2025-07-30 09:49:32,998 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:32 +0000 (0:00:00.695)       0:00:19.883 ******** 
2025-07-30 09:49:34,008 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:34,046 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:34,082 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:34,111 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:34,119 p=206881 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *****************************************************************************************************************************
2025-07-30 09:49:34,119 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:34 +0000 (0:00:01.120)       0:00:21.003 ******** 
2025-07-30 09:49:36,023 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:49:36,130 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:49:36,141 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:49:36,301 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:36,309 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **************************************************************************************************************************
2025-07-30 09:49:36,309 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:36 +0000 (0:00:02.190)       0:00:23.193 ******** 
2025-07-30 09:49:36,360 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:36,362 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:36,371 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:36,705 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:36,712 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] **********************************************************************************************************************
2025-07-30 09:49:36,713 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:36 +0000 (0:00:00.403)       0:00:23.597 ******** 
2025-07-30 09:49:37,122 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,124 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,126 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,136 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,376 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,377 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,389 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,391 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,629 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,634 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,642 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,646 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:49:37,882 p=206881 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:49:37,892 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:49:37,901 p=206881 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:49:37,907 p=206881 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:49:37,915 p=206881 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] ******************************************************************************************************************************
2025-07-30 09:49:37,916 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:37 +0000 (0:00:01.202)       0:00:24.800 ******** 
2025-07-30 09:49:37,948 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:49:38,322 p=206881 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-30 09:49:38,323 p=206881 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-30 09:49:38,323 p=206881 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-30 09:49:38,331 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] **********************************************************************************************************************
2025-07-30 09:49:38,331 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:38 +0000 (0:00:00.415)       0:00:25.216 ******** 
2025-07-30 09:49:38,363 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:49:39,292 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:39,293 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:39,363 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:39,370 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ****************************************************************************************************************
2025-07-30 09:49:39,370 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:39 +0000 (0:00:01.038)       0:00:26.255 ******** 
2025-07-30 09:49:39,419 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:39,420 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:39,433 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:39,648 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:39,656 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *************************************************************************************************************************************
2025-07-30 09:49:39,656 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:39 +0000 (0:00:00.285)       0:00:26.541 ******** 
2025-07-30 09:49:41,542 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:49:41,688 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:41,758 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:49:41,762 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:49:41,770 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ****************************************************************************************************************************************
2025-07-30 09:49:41,770 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:41 +0000 (0:00:02.114)       0:00:28.655 ******** 
2025-07-30 09:49:42,056 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:42,069 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:42,104 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:42,396 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:42,405 p=206881 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *************************************************************************************************************************************
2025-07-30 09:49:42,406 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:42 +0000 (0:00:00.635)       0:00:29.290 ******** 
2025-07-30 09:49:42,440 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-30 09:49:42,455 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-30 09:49:42,458 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-30 09:49:42,475 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-30 09:49:42,481 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] **********************************************************************************************************************************************
2025-07-30 09:49:42,482 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:42 +0000 (0:00:00.075)       0:00:29.366 ******** 
2025-07-30 09:49:43,527 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:43,538 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:43,578 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:43,588 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:43,595 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] ***********************************************************************************************************************************************
2025-07-30 09:49:43,595 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:43 +0000 (0:00:01.113)       0:00:30.480 ******** 
2025-07-30 09:49:43,865 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:43,882 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:44,027 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:44,334 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:44,345 p=206881 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *************************************************************************************************************************************************
2025-07-30 09:49:44,345 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:44 +0000 (0:00:00.750)       0:00:31.230 ******** 
2025-07-30 09:49:44,380 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:49:44,396 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:49:44,398 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:49:44,413 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:49:44,420 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] *******************************************************************************************************************************
2025-07-30 09:49:44,420 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:44 +0000 (0:00:00.074)       0:00:31.305 ******** 
2025-07-30 09:49:44,470 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:44,471 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:44,483 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:45,460 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:45,468 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *************************************************************************************************************************
2025-07-30 09:49:45,468 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:45 +0000 (0:00:01.047)       0:00:32.352 ******** 
2025-07-30 09:49:45,510 p=206881 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-30 09:49:45,511 p=206881 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-30 09:49:45,516 p=206881 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-30 09:49:45,522 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:45,525 p=206881 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-30 09:49:45,526 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:45,536 p=206881 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-30 09:49:45,539 p=206881 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-30 09:49:45,540 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:45,742 p=206881 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-30 09:49:45,998 p=206881 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-30 09:49:46,010 p=206881 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *************************************************************************************************************************************
2025-07-30 09:49:46,011 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:46 +0000 (0:00:00.542)       0:00:32.895 ******** 
2025-07-30 09:49:46,051 p=206881 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-30 09:49:46,052 p=206881 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-30 09:49:46,061 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:46,066 p=206881 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-30 09:49:46,070 p=206881 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-30 09:49:46,071 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:46,075 p=206881 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-30 09:49:46,078 p=206881 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-30 09:49:46,078 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:46,723 p=206881 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-30 09:49:47,057 p=206881 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-30 09:49:47,066 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] ******************************************************************************************************************
2025-07-30 09:49:47,066 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:47 +0000 (0:00:01.055)       0:00:33.951 ******** 
2025-07-30 09:49:47,182 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:49:47,184 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:49:47,187 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:49:47,188 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:49:47,190 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:49:47,191 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:49:47,192 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:49:47,193 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:49:47,194 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:49:47,196 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:49:47,197 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:49:47,198 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:49:47,199 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:49:47,200 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:49:47,201 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:47,203 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:49:47,203 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:49:47,204 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:49:47,206 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:49:47,206 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:47,207 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:47,459 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-30 09:49:47,898 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-30 09:49:48,394 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-30 09:49:48,754 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-30 09:49:49,309 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-30 09:49:49,912 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-30 09:49:49,923 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ********************************************************************************************************************************
2025-07-30 09:49:49,923 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:49 +0000 (0:00:02.857)       0:00:36.808 ******** 
2025-07-30 09:49:49,983 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:49,984 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:49,997 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:50,427 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:50,435 p=206881 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ********************************************************************************************************************
2025-07-30 09:49:50,435 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:50 +0000 (0:00:00.511)       0:00:37.320 ******** 
2025-07-30 09:49:50,486 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:50,487 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:50,497 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:50,713 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:50,726 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] **********************************************************************************************************************************
2025-07-30 09:49:50,727 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:50 +0000 (0:00:00.291)       0:00:37.611 ******** 
2025-07-30 09:49:50,775 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:50,796 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:50,808 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:51,003 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:51,010 p=206881 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] ***********************************************************************************************************************************
2025-07-30 09:49:51,010 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:51 +0000 (0:00:00.283)       0:00:37.895 ******** 
2025-07-30 09:49:51,045 p=206881 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-30 09:49:51,062 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:51,063 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:51,076 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:51,083 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *****************************************************************************************************************************************
2025-07-30 09:49:51,084 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:51 +0000 (0:00:00.073)       0:00:37.968 ******** 
2025-07-30 09:49:51,117 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:49:52,095 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:49:52,144 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:49:52,183 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:49:52,191 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] ******************************************************************************************************************************
2025-07-30 09:49:52,191 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:52 +0000 (0:00:01.107)       0:00:39.076 ******** 
2025-07-30 09:49:52,213 p=206881 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-30 09:49:52,229 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:49:52,480 p=206881 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-30 09:49:52,499 p=206881 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-30 09:49:52,513 p=206881 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-30 09:49:52,522 p=206881 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ************************************************************************************************************
2025-07-30 09:49:52,522 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:52 +0000 (0:00:00.331)       0:00:39.407 ******** 
2025-07-30 09:49:52,547 p=206881 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-30 09:49:52,548 p=206881 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-30 09:49:52,557 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:49:52,951 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:49:52,954 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:49:52,955 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:49:53,202 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:49:53,204 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:49:53,209 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:49:53,217 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ********************************************************************************************************************************************
2025-07-30 09:49:53,217 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:53 +0000 (0:00:00.695)       0:00:40.102 ******** 
2025-07-30 09:49:53,264 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:53,267 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:53,277 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:54,194 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:54,202 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] **********************************************************************************************************
2025-07-30 09:49:54,202 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:54 +0000 (0:00:00.984)       0:00:41.087 ******** 
2025-07-30 09:49:54,251 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:49:54,252 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:49:54,262 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:49:55,160 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:49:55,167 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ****************************************************************************************************************************
2025-07-30 09:49:55,167 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:55 +0000 (0:00:00.964)       0:00:42.052 ******** 
2025-07-30 09:49:55,457 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,461 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,476 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,500 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,717 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,725 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,755 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,905 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,979 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:55,984 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,035 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,224 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,233 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,244 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,293 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,485 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:49:56,489 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,503 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:49:56,550 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:49:56,752 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:49:56,757 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,769 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:56,814 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:57,006 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:49:57,015 p=206881 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ********************************************************************************************************************************
2025-07-30 09:49:57,016 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:57 +0000 (0:00:01.848)       0:00:43.900 ******** 
2025-07-30 09:49:57,052 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-30 09:49:57,068 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-30 09:49:57,071 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-30 09:49:57,085 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-30 09:49:57,174 p=206881 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *****************************************************************************************************************************************
2025-07-30 09:49:57,174 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:57 +0000 (0:00:00.158)       0:00:44.058 ******** 
2025-07-30 09:49:58,832 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:58,839 p=206881 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *****************************************************************************************************************************************
2025-07-30 09:49:58,839 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:58 +0000 (0:00:01.665)       0:00:45.724 ******** 
2025-07-30 09:49:59,111 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:49:59,149 p=206881 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *************************************************************************************************************************************
2025-07-30 09:49:59,203 p=206881 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ********************************************************************************************************************************
2025-07-30 09:49:59,203 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:59 +0000 (0:00:00.363)       0:00:46.088 ******** 
2025-07-30 09:49:59,243 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm01"
2025-07-30 09:49:59,259 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-30 09:49:59,261 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-30 09:49:59,275 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-30 09:49:59,282 p=206881 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *****************************************************************************************************************************************
2025-07-30 09:49:59,283 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:49:59 +0000 (0:00:00.079)       0:00:46.167 ******** 
2025-07-30 09:49:59,993 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:01,765 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:01,943 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:02,411 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:02,418 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ************************************************************************************************************************************
2025-07-30 09:50:02,418 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:02 +0000 (0:00:03.135)       0:00:49.303 ******** 
2025-07-30 09:50:03,417 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:03,500 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:03,533 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:03,545 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:03,552 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] *******************************************************************************************************************************************
2025-07-30 09:50:03,552 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:03 +0000 (0:00:01.133)       0:00:50.437 ******** 
2025-07-30 09:50:03,925 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:03,944 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:03,960 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:03,971 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:03,978 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] **********************************************************************************************************************************
2025-07-30 09:50:03,978 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:03 +0000 (0:00:00.425)       0:00:50.863 ******** 
2025-07-30 09:50:04,329 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:04,333 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:04,336 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:04,373 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:04,380 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] **********************************************************************************************************************************************
2025-07-30 09:50:04,380 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:04 +0000 (0:00:00.402)       0:00:51.265 ******** 
2025-07-30 09:50:05,365 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:05,414 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:05,461 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:05,475 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:05,482 p=206881 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *****************************************************************************************************************************
2025-07-30 09:50:05,482 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:05 +0000 (0:00:01.102)       0:00:52.367 ******** 
2025-07-30 09:50:07,085 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:50:07,090 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:07,118 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:50:07,201 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:50:07,208 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **************************************************************************************************************************
2025-07-30 09:50:07,208 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:07 +0000 (0:00:01.726)       0:00:54.093 ******** 
2025-07-30 09:50:07,256 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:07,257 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:07,268 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:07,470 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:07,478 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] **********************************************************************************************************************
2025-07-30 09:50:07,478 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:07 +0000 (0:00:00.269)       0:00:54.363 ******** 
2025-07-30 09:50:07,769 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:07,773 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:07,795 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:07,820 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,032 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,046 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,064 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,088 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,292 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,300 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,329 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,351 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:50:08,550 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:50:08,573 p=206881 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:50:08,592 p=206881 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:50:08,623 p=206881 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:50:08,633 p=206881 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] ******************************************************************************************************************************
2025-07-30 09:50:08,633 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:08 +0000 (0:00:01.155)       0:00:55.518 ******** 
2025-07-30 09:50:08,667 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:50:08,917 p=206881 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-30 09:50:08,927 p=206881 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-30 09:50:08,945 p=206881 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-30 09:50:08,952 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] **********************************************************************************************************************
2025-07-30 09:50:08,952 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:08 +0000 (0:00:00.318)       0:00:55.837 ******** 
2025-07-30 09:50:08,984 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:50:09,909 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:10,018 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:10,019 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:10,030 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ****************************************************************************************************************
2025-07-30 09:50:10,030 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:10 +0000 (0:00:01.077)       0:00:56.914 ******** 
2025-07-30 09:50:10,081 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:10,082 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:10,092 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:10,305 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:10,313 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *************************************************************************************************************************************
2025-07-30 09:50:10,313 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:10 +0000 (0:00:00.283)       0:00:57.197 ******** 
2025-07-30 09:50:12,167 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:50:12,316 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:50:12,322 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:50:12,326 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:12,333 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ****************************************************************************************************************************************
2025-07-30 09:50:12,334 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:12 +0000 (0:00:02.020)       0:00:59.218 ******** 
2025-07-30 09:50:12,598 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:12,629 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:12,633 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:12,650 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:12,658 p=206881 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *************************************************************************************************************************************
2025-07-30 09:50:12,658 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:12 +0000 (0:00:00.324)       0:00:59.543 ******** 
2025-07-30 09:50:12,691 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: MUNGE работает корректно на sm01
2025-07-30 09:50:12,707 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-30 09:50:12,709 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-30 09:50:12,726 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-30 09:50:12,733 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] **********************************************************************************************************************************************
2025-07-30 09:50:12,733 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:12 +0000 (0:00:00.074)       0:00:59.617 ******** 
2025-07-30 09:50:13,744 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:13,754 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:13,798 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:13,876 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:13,883 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] ***********************************************************************************************************************************************
2025-07-30 09:50:13,883 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:13 +0000 (0:00:01.150)       0:01:00.768 ******** 
2025-07-30 09:50:14,148 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:14,170 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:14,188 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:14,207 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:14,215 p=206881 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *************************************************************************************************************************************************
2025-07-30 09:50:14,215 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:14 +0000 (0:00:00.331)       0:01:01.099 ******** 
2025-07-30 09:50:14,248 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:50:14,263 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:50:14,266 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:50:14,282 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:50:14,289 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] *******************************************************************************************************************************
2025-07-30 09:50:14,289 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:14 +0000 (0:00:00.074)       0:01:01.174 ******** 
2025-07-30 09:50:14,339 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:14,341 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:14,351 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:15,238 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:15,245 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *************************************************************************************************************************
2025-07-30 09:50:15,246 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:15 +0000 (0:00:00.956)       0:01:02.130 ******** 
2025-07-30 09:50:15,293 p=206881 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-30 09:50:15,295 p=206881 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-30 09:50:15,302 p=206881 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-30 09:50:15,307 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:15,309 p=206881 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-30 09:50:15,311 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:15,321 p=206881 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-30 09:50:15,324 p=206881 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-30 09:50:15,325 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:15,515 p=206881 u=master n=ansible | ok: [sm01] => (item=/home)
2025-07-30 09:50:15,765 p=206881 u=master n=ansible | ok: [sm01] => (item=/sw)
2025-07-30 09:50:15,774 p=206881 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *************************************************************************************************************************************
2025-07-30 09:50:15,774 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:15 +0000 (0:00:00.528)       0:01:02.659 ******** 
2025-07-30 09:50:15,814 p=206881 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-30 09:50:15,815 p=206881 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-30 09:50:15,822 p=206881 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-30 09:50:15,828 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:15,829 p=206881 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-30 09:50:15,830 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:15,850 p=206881 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-30 09:50:15,855 p=206881 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-30 09:50:15,856 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:16,055 p=206881 u=master n=ansible | changed: [sm01] => (item=/home)
2025-07-30 09:50:16,295 p=206881 u=master n=ansible | changed: [sm01] => (item=/sw)
2025-07-30 09:50:16,304 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] ******************************************************************************************************************
2025-07-30 09:50:16,304 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:16 +0000 (0:00:00.530)       0:01:03.189 ******** 
2025-07-30 09:50:16,439 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:50:16,443 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:50:16,445 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:50:16,451 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:50:16,453 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:50:16,456 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:50:16,457 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:16,465 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:50:16,468 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:50:16,471 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:50:16,473 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:50:16,477 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:50:16,479 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:50:16,480 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:16,510 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:50:16,515 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:50:16,520 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:50:16,524 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:50:16,529 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:50:16,533 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:50:16,534 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:16,705 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.212'})
2025-07-30 09:50:16,944 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.204'})
2025-07-30 09:50:17,184 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/home', 'client_ip': '10.20.90.215'})
2025-07-30 09:50:17,426 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'})
2025-07-30 09:50:17,668 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'})
2025-07-30 09:50:17,913 p=206881 u=master n=ansible | changed: [sm01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'})
2025-07-30 09:50:17,928 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ********************************************************************************************************************************
2025-07-30 09:50:17,928 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:17 +0000 (0:00:01.623)       0:01:04.812 ******** 
2025-07-30 09:50:18,026 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:18,029 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:18,039 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:18,438 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:18,446 p=206881 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ********************************************************************************************************************
2025-07-30 09:50:18,446 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:18 +0000 (0:00:00.518)       0:01:05.331 ******** 
2025-07-30 09:50:18,494 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:18,496 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:18,508 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:18,714 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:18,721 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] **********************************************************************************************************************************
2025-07-30 09:50:18,721 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:18 +0000 (0:00:00.275)       0:01:05.606 ******** 
2025-07-30 09:50:18,767 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:18,770 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:18,781 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:18,986 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:18,997 p=206881 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] ***********************************************************************************************************************************
2025-07-30 09:50:18,997 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:18 +0000 (0:00:00.275)       0:01:05.881 ******** 
2025-07-30 09:50:19,033 p=206881 u=master n=ansible | ok: [sm01] => 
  nfs_exports_check.stdout_lines:
  - "/home         \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/home         \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.212(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.204(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
  - "/sw           \t10.20.90.215(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)"
2025-07-30 09:50:19,046 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:19,047 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:19,060 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:19,067 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *****************************************************************************************************************************************
2025-07-30 09:50:19,068 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:19 +0000 (0:00:00.070)       0:01:05.952 ******** 
2025-07-30 09:50:19,101 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:50:20,065 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:50:20,088 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:50:20,167 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:50:20,175 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] ******************************************************************************************************************************
2025-07-30 09:50:20,175 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:20 +0000 (0:00:01.107)       0:01:07.060 ******** 
2025-07-30 09:50:20,200 p=206881 u=master n=ansible | skipping: [sm01] => (item=/sw) 
2025-07-30 09:50:20,209 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:50:20,469 p=206881 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-30 09:50:20,479 p=206881 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-30 09:50:20,496 p=206881 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-30 09:50:20,509 p=206881 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ************************************************************************************************************
2025-07-30 09:50:20,509 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:20 +0000 (0:00:00.333)       0:01:07.393 ******** 
2025-07-30 09:50:20,536 p=206881 u=master n=ansible | skipping: [sm01] => (item={'path': '/home', 'src': '/home'}) 
2025-07-30 09:50:20,537 p=206881 u=master n=ansible | skipping: [sm01] => (item={'path': '/sw', 'src': '/sw'}) 
2025-07-30 09:50:20,546 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:50:20,804 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:50:20,816 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:50:20,833 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:50:21,057 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:50:21,072 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:50:21,088 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:50:21,097 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ********************************************************************************************************************************************
2025-07-30 09:50:21,097 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:21 +0000 (0:00:00.588)       0:01:07.982 ******** 
2025-07-30 09:50:21,144 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:21,146 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:21,157 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:22,054 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:22,062 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] **********************************************************************************************************
2025-07-30 09:50:22,062 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:22 +0000 (0:00:00.964)       0:01:08.946 ******** 
2025-07-30 09:50:22,110 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:22,111 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:22,121 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:23,003 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:23,014 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ****************************************************************************************************************************
2025-07-30 09:50:23,014 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:23 +0000 (0:00:00.952)       0:01:09.898 ******** 
2025-07-30 09:50:23,297 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,309 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,323 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,343 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,558 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,571 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,585 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,608 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,820 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,828 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,848 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:23,873 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,079 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,083 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,106 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,128 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,334 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:50:24,361 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:50:24,383 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:50:24,494 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:50:24,591 p=206881 u=master n=ansible | ok: [sm01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,618 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,643 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,774 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:50:24,783 p=206881 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ********************************************************************************************************************************
2025-07-30 09:50:24,783 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:24 +0000 (0:00:01.769)       0:01:11.668 ******** 
2025-07-30 09:50:24,815 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: ✅ Узел sm01 готов для установки Slurm
2025-07-30 09:50:24,830 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-30 09:50:24,833 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-30 09:50:24,847 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-30 09:50:24,874 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Начало сборки Slurm] ********************************************************************************************************************************
2025-07-30 09:50:24,874 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:24 +0000 (0:00:00.091)       0:01:11.759 ******** 
2025-07-30 09:50:24,908 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm01"
2025-07-30 09:50:24,923 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на sm02"
2025-07-30 09:50:24,926 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn01"
2025-07-30 09:50:24,940 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Сборка Slurm 25.05.1 с JWT поддержкой на cn02"
2025-07-30 09:50:24,948 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Очистка старой сборки] ******************************************************************************************************************************
2025-07-30 09:50:24,948 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:24 +0000 (0:00:00.073)       0:01:11.833 ******** 
2025-07-30 09:50:24,993 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:24,996 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:25,006 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:27,260 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:27,268 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки] ***************************************************************************************************
2025-07-30 09:50:27,268 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:27 +0000 (0:00:02.320)       0:01:14.153 ******** 
2025-07-30 09:50:27,323 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:27,324 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:27,337 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:40,265 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:40,273 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание временной директории для сборки] ***********************************************************************************************************
2025-07-30 09:50:40,273 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:40 +0000 (0:00:13.004)       0:01:27.157 ******** 
2025-07-30 09:50:40,321 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:40,322 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:40,333 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:40,538 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:40,546 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка существования исходников] ******************************************************************************************************************
2025-07-30 09:50:40,546 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:40 +0000 (0:00:00.273)       0:01:27.431 ******** 
2025-07-30 09:50:40,597 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:40,598 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:40,608 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:40,801 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:50:40,811 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Скачивание исходников Slurm 25.05.1] ****************************************************************************************************************
2025-07-30 09:50:40,812 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:40 +0000 (0:00:00.265)       0:01:27.696 ******** 
2025-07-30 09:50:40,851 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:40,868 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:40,880 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:43,671 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:43,680 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Извлечение исходников Slurm] ************************************************************************************************************************
2025-07-30 09:50:43,680 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:43 +0000 (0:00:02.868)       0:01:30.565 ******** 
2025-07-30 09:50:43,731 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:43,732 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:43,741 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:50:49,177 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:50:49,185 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой] *********************************************************************************************************
2025-07-30 09:50:49,185 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:50:49 +0000 (0:00:05.504)       0:01:36.069 ******** 
2025-07-30 09:50:49,231 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:50:49,233 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:50:49,243 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:51:23,967 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:51:23,976 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...)] *************************************************************************************************************
2025-07-30 09:51:23,976 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:51:23 +0000 (0:00:34.791)       0:02:10.860 ******** 
2025-07-30 09:51:24,029 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:51:24,030 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:51:24,044 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:56:22,970 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:56:22,990 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на master] **************************************************************************************************************************
2025-07-30 09:56:22,990 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:22 +0000 (0:04:59.014)       0:07:09.875 ******** 
2025-07-30 09:56:23,048 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:56:23,049 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:56:23,059 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:56:23,258 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:56:23,267 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка development файлов (headers для Pyxis)] ***************************************************************************************************
2025-07-30 09:56:23,267 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:23 +0000 (0:00:00.276)       0:07:10.152 ******** 
2025-07-30 09:56:23,302 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:56:23,317 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:56:23,330 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:56:23,531 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:56:23,542 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание директории Slurm на всех узлах] ************************************************************************************************************
2025-07-30 09:56:23,542 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:23 +0000 (0:00:00.275)       0:07:10.427 ******** 
2025-07-30 09:56:23,819 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:56:24,767 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:56:24,769 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:56:24,879 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:56:24,888 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание полного архива Slurm в NFS] ****************************************************************************************************************
2025-07-30 09:56:24,888 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:24 +0000 (0:00:01.346)       0:07:11.773 ******** 
2025-07-30 09:56:24,941 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:56:24,942 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:56:24,953 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:56:26,411 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:56:26,418 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат создания архива] **************************************************************************************************************************
2025-07-30 09:56:26,419 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:26 +0000 (0:00:01.530)       0:07:13.303 ******** 
2025-07-30 09:56:26,455 p=206881 u=master n=ansible | ok: [sm01] => 
  archive_creation.stdout_lines:
  - === СОЗДАНИЕ АРХИВА SLURM + HEADERS ===
  - Копируем binaries...
  - '✅ Headers включены в архив: 6 файлов'
  - === АРХИВ ГОТОВ ===
  - 'Binaries: 20 файлов'
  - 'Daemons: 6 файлов'
  - 'Headers: 6 файлов'
  - 'Libs: 6 файлов'
2025-07-30 09:56:26,470 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:56:26,471 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:56:26,482 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:56:26,495 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Ожидание готовности архива] *************************************************************************************************************************
2025-07-30 09:56:26,496 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:26 +0000 (0:00:00.077)       0:07:13.380 ******** 
2025-07-30 09:56:26,518 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:56:26,990 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:56:26,999 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:56:27,000 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:56:27,008 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива] **************************************************************************************************************
2025-07-30 09:56:27,008 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:27 +0000 (0:00:00.512)       0:07:13.893 ******** 
2025-07-30 09:56:27,030 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:56:49,268 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:56:49,533 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:56:49,912 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:56:49,920 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результат установки на узлах] ***********************************************************************************************************************
2025-07-30 09:56:49,920 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:49 +0000 (0:00:22.911)       0:07:36.805 ******** 
2025-07-30 09:56:49,963 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:56:49,980 p=206881 u=master n=ansible | ok: [sm02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-30 09:56:49,981 p=206881 u=master n=ansible | ok: [cn01] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-30 09:56:49,997 p=206881 u=master n=ansible | ok: [cn02] => 
  slurm_install_nodes.stdout_lines:
  - === УСТАНОВКА SLURM ИЗ АРХИВА ===
  - '✅ Headers установлены: 6 файлов'
  - === УСТАНОВКА ЗАВЕРШЕНА ===
2025-07-30 09:56:50,008 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm] ************************************************************************************
2025-07-30 09:56:50,008 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:50 +0000 (0:00:00.087)       0:07:36.893 ******** 
2025-07-30 09:56:50,283 p=206881 u=master n=ansible | ok: [sm01] => (item=sinfo)
2025-07-30 09:56:50,351 p=206881 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-30 09:56:50,398 p=206881 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-30 09:56:50,532 p=206881 u=master n=ansible | ok: [sm01] => (item=squeue)
2025-07-30 09:56:50,656 p=206881 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-30 09:56:50,703 p=206881 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-30 09:56:50,735 p=206881 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-30 09:56:50,853 p=206881 u=master n=ansible | ok: [sm01] => (item=scancel)
2025-07-30 09:56:50,969 p=206881 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-30 09:56:50,979 p=206881 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-30 09:56:50,984 p=206881 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-30 09:56:51,169 p=206881 u=master n=ansible | ok: [sm01] => (item=sbatch)
2025-07-30 09:56:51,244 p=206881 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-30 09:56:51,255 p=206881 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-30 09:56:51,256 p=206881 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-30 09:56:51,422 p=206881 u=master n=ansible | ok: [sm01] => (item=salloc)
2025-07-30 09:56:51,499 p=206881 u=master n=ansible | ok: [cn02] => (item=salloc)
2025-07-30 09:56:51,501 p=206881 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-30 09:56:51,520 p=206881 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-30 09:56:51,696 p=206881 u=master n=ansible | ok: [sm01] => (item=srun)
2025-07-30 09:56:51,746 p=206881 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-30 09:56:51,770 p=206881 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-30 09:56:51,787 p=206881 u=master n=ansible | ok: [cn01] => (item=salloc)
2025-07-30 09:56:51,958 p=206881 u=master n=ansible | ok: [sm01] => (item=sacct)
2025-07-30 09:56:51,996 p=206881 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-30 09:56:52,034 p=206881 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-30 09:56:52,035 p=206881 u=master n=ansible | ok: [cn02] => (item=sacct)
2025-07-30 09:56:52,214 p=206881 u=master n=ansible | ok: [sm01] => (item=scontrol)
2025-07-30 09:56:52,249 p=206881 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-30 09:56:52,287 p=206881 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-30 09:56:52,288 p=206881 u=master n=ansible | ok: [cn01] => (item=sacct)
2025-07-30 09:56:52,469 p=206881 u=master n=ansible | ok: [sm01] => (item=sprio)
2025-07-30 09:56:52,505 p=206881 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-30 09:56:52,544 p=206881 u=master n=ansible | ok: [cn02] => (item=sprio)
2025-07-30 09:56:52,545 p=206881 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-30 09:56:52,751 p=206881 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-30 09:56:52,752 p=206881 u=master n=ansible | ok: [sm01] => (item=smap)
2025-07-30 09:56:52,805 p=206881 u=master n=ansible | ok: [cn02] => (item=smap)
2025-07-30 09:56:52,840 p=206881 u=master n=ansible | ok: [cn01] => (item=sprio)
2025-07-30 09:56:52,998 p=206881 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-30 09:56:53,001 p=206881 u=master n=ansible | ok: [sm01] => (item=sdiag)
2025-07-30 09:56:53,062 p=206881 u=master n=ansible | ok: [cn02] => (item=sdiag)
2025-07-30 09:56:53,098 p=206881 u=master n=ansible | ok: [cn01] => (item=smap)
2025-07-30 09:56:53,248 p=206881 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-30 09:56:53,252 p=206881 u=master n=ansible | ok: [sm01] => (item=sstat)
2025-07-30 09:56:53,332 p=206881 u=master n=ansible | ok: [cn02] => (item=sstat)
2025-07-30 09:56:53,359 p=206881 u=master n=ansible | ok: [cn01] => (item=sdiag)
2025-07-30 09:56:53,502 p=206881 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-30 09:56:53,508 p=206881 u=master n=ansible | ok: [sm01] => (item=sreport)
2025-07-30 09:56:53,594 p=206881 u=master n=ansible | ok: [cn02] => (item=sreport)
2025-07-30 09:56:53,637 p=206881 u=master n=ansible | ok: [cn01] => (item=sstat)
2025-07-30 09:56:53,756 p=206881 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-30 09:56:53,761 p=206881 u=master n=ansible | ok: [sm01] => (item=sacctmgr)
2025-07-30 09:56:53,862 p=206881 u=master n=ansible | ok: [cn02] => (item=sacctmgr)
2025-07-30 09:56:53,901 p=206881 u=master n=ansible | ok: [cn01] => (item=sreport)
2025-07-30 09:56:54,010 p=206881 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-30 09:56:54,011 p=206881 u=master n=ansible | ok: [sm01] => (item=sattach)
2025-07-30 09:56:54,124 p=206881 u=master n=ansible | ok: [cn02] => (item=sattach)
2025-07-30 09:56:54,171 p=206881 u=master n=ansible | ok: [cn01] => (item=sacctmgr)
2025-07-30 09:56:54,262 p=206881 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-30 09:56:54,272 p=206881 u=master n=ansible | ok: [sm01] => (item=sbcast)
2025-07-30 09:56:54,408 p=206881 u=master n=ansible | ok: [cn02] => (item=sbcast)
2025-07-30 09:56:54,444 p=206881 u=master n=ansible | ok: [cn01] => (item=sattach)
2025-07-30 09:56:54,510 p=206881 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-30 09:56:54,532 p=206881 u=master n=ansible | ok: [sm01] => (item=sshare)
2025-07-30 09:56:54,694 p=206881 u=master n=ansible | ok: [cn02] => (item=sshare)
2025-07-30 09:56:54,716 p=206881 u=master n=ansible | ok: [cn01] => (item=sbcast)
2025-07-30 09:56:54,758 p=206881 u=master n=ansible | ok: [sm02] => (item=sview)
2025-07-30 09:56:54,764 p=206881 u=master n=ansible | [WARNING]: Cannot set fs attributes on a non-existent symlink target. follow should be set to False to avoid this.

2025-07-30 09:56:54,795 p=206881 u=master n=ansible | ok: [sm01] => (item=sview)
2025-07-30 09:56:54,969 p=206881 u=master n=ansible | ok: [cn02] => (item=sview)
2025-07-30 09:56:54,976 p=206881 u=master n=ansible | ok: [cn01] => (item=sshare)
2025-07-30 09:56:55,235 p=206881 u=master n=ansible | ok: [cn01] => (item=sview)
2025-07-30 09:56:55,249 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Создание символических ссылок для системных демонов Slurm] ******************************************************************************************
2025-07-30 09:56:55,249 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:55 +0000 (0:00:05.241)       0:07:42.134 ******** 
2025-07-30 09:56:55,532 p=206881 u=master n=ansible | ok: [sm01] => (item=slurmctld)
2025-07-30 09:56:55,543 p=206881 u=master n=ansible | ok: [sm02] => (item=slurmctld)
2025-07-30 09:56:55,557 p=206881 u=master n=ansible | ok: [cn01] => (item=slurmctld)
2025-07-30 09:56:55,590 p=206881 u=master n=ansible | ok: [cn02] => (item=slurmctld)
2025-07-30 09:56:55,788 p=206881 u=master n=ansible | ok: [sm01] => (item=slurmd)
2025-07-30 09:56:55,810 p=206881 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-30 09:56:55,853 p=206881 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-30 09:56:55,904 p=206881 u=master n=ansible | ok: [sm02] => (item=slurmd)
2025-07-30 09:56:56,045 p=206881 u=master n=ansible | ok: [sm01] => (item=slurmdbd)
2025-07-30 09:56:56,060 p=206881 u=master n=ansible | ok: [cn01] => (item=slurmdbd)
2025-07-30 09:56:56,111 p=206881 u=master n=ansible | ok: [cn02] => (item=slurmdbd)
2025-07-30 09:56:56,155 p=206881 u=master n=ansible | ok: [sm02] => (item=slurmdbd)
2025-07-30 09:56:56,348 p=206881 u=master n=ansible | ok: [cn01] => (item=slurmrestd)
2025-07-30 09:56:56,369 p=206881 u=master n=ansible | ok: [cn02] => (item=slurmrestd)
2025-07-30 09:56:56,404 p=206881 u=master n=ansible | ok: [sm01] => (item=slurmrestd)
2025-07-30 09:56:56,448 p=206881 u=master n=ansible | ok: [sm02] => (item=slurmrestd)
2025-07-30 09:56:56,607 p=206881 u=master n=ansible | ok: [cn01] => (item=slurmstepd)
2025-07-30 09:56:56,658 p=206881 u=master n=ansible | ok: [cn02] => (item=slurmstepd)
2025-07-30 09:56:56,680 p=206881 u=master n=ansible | ok: [sm01] => (item=slurmstepd)
2025-07-30 09:56:56,710 p=206881 u=master n=ansible | ok: [sm02] => (item=slurmstepd)
2025-07-30 09:56:56,719 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Обновление библиотечного кеша] **********************************************************************************************************************
2025-07-30 09:56:56,720 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:56 +0000 (0:00:01.470)       0:07:43.604 ******** 
2025-07-30 09:56:57,041 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:56:57,096 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:56:57,241 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:56:57,341 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:56:57,349 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка версии Slurm] ******************************************************************************************************************************
2025-07-30 09:56:57,349 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:57 +0000 (0:00:00.629)       0:07:44.233 ******** 
2025-07-30 09:56:57,620 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:56:57,672 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:56:57,674 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:56:57,688 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:56:57,695 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка поддержки JWT] *****************************************************************************************************************************
2025-07-30 09:56:57,696 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:57 +0000 (0:00:00.346)       0:07:44.580 ******** 
2025-07-30 09:56:57,967 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:56:57,983 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:56:57,995 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:56:58,018 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:56:58,025 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Проверка headers (КРИТИЧНО ДЛЯ PYXIS!)] *************************************************************************************************************
2025-07-30 09:56:58,025 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:58 +0000 (0:00:00.329)       0:07:44.910 ******** 
2025-07-30 09:56:58,320 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:56:58,323 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:56:58,343 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:56:58,367 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:56:58,375 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Результаты проверки] ********************************************************************************************************************************
2025-07-30 09:56:58,375 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:58 +0000 (0:00:00.349)       0:07:45.259 ******** 
2025-07-30 09:56:58,409 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm успешно установлен на sm01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 29 13:42 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-30 09:56:58,431 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm успешно установлен на sm02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 30 12:56 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-30 09:56:58,432 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "✅ Slurm успешно установлен на cn01\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 30 12:56 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-30 09:56:58,449 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "✅ Slurm успешно установлен на cn02\n\U0001F4CB Версия: slurm 25.05.1\n\U0001F510 JWT поддержка: JWT support check\n\U0001F4C1 Headers: ✅ Headers найдены: 6 файлов\n✅ spank.h: -rw-r--r-- 1 root root 18369 Jul 30 12:56 /opt/slurm/include/slurm/spank.h\n\U0001F4CD Путь установки: /opt/slurm\n\U0001F517 Команды доступны в /usr/bin/, демоны в /usr/sbin/"
2025-07-30 09:56:58,456 p=206881 u=master n=ansible | TASK [slurm_build : [SLURM_BUILD] Сборка завершена успешно] ***************************************************************************************************************************
2025-07-30 09:56:58,457 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:58 +0000 (0:00:00.081)       0:07:45.341 ******** 
2025-07-30 09:56:58,491 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm01"
2025-07-30 09:56:58,507 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на sm02"
2025-07-30 09:56:58,509 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn01"
2025-07-30 09:56:58,523 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F389 Slurm 25.05.1 с headers готов к установке контейнеров на cn02"
2025-07-30 09:56:58,583 p=206881 u=master n=ansible | RUNNING HANDLER [common : restart nfs-server] *****************************************************************************************************************************************
2025-07-30 09:56:58,584 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:56:58 +0000 (0:00:00.127)       0:07:45.468 ******** 
2025-07-30 09:57:05,116 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:05,123 p=206881 u=master n=ansible | RUNNING HANDLER [common : reload nfs-exports] *****************************************************************************************************************************************
2025-07-30 09:57:05,123 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:05 +0000 (0:00:06.539)       0:07:52.008 ******** 
2025-07-30 09:57:05,390 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:05,427 p=206881 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] *******************************************************************************************************************************************************
2025-07-30 09:57:05,444 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Начало настройки Slurm Master] ********************************************************************************************************************
2025-07-30 09:57:05,444 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:05 +0000 (0:00:00.321)       0:07:52.329 ******** 
2025-07-30 09:57:05,502 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F3AF Настройка Slurm Master узла: sm01\n\U0001F4CD Роль: primary\n\U0001F310 IP: 10.20.90.240"
2025-07-30 09:57:05,512 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка MariaDB для Slurm] **********************************************************************************************************************
2025-07-30 09:57:05,513 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:05 +0000 (0:00:00.068)       0:07:52.397 ******** 
2025-07-30 09:57:05,573 p=206881 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/mariadb.yml for sm01
2025-07-30 09:57:05,581 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка работы свежей MariaDB] ************************************************************************************************************************
2025-07-30 09:57:05,581 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:05 +0000 (0:00:00.068)       0:07:52.466 ******** 
2025-07-30 09:57:05,905 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:05,913 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Показать версию MariaDB] *******************************************************************************************************************************
2025-07-30 09:57:05,913 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:05 +0000 (0:00:00.331)       0:07:52.798 ******** 
2025-07-30 09:57:05,965 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB версия: 10.11.13-MariaDB-0ubuntu0.24.04.1"
2025-07-30 09:57:05,972 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание пользователя и базы Slurm (исправленная версия)] **********************************************************************************************
2025-07-30 09:57:05,972 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:05 +0000 (0:00:00.059)       0:07:52.857 ******** 
2025-07-30 09:57:09,284 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:09,292 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Результат создания пользователя] ***********************************************************************************************************************
2025-07-30 09:57:09,292 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:09 +0000 (0:00:03.319)       0:07:56.177 ******** 
2025-07-30 09:57:09,344 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Создание пользователя: False"
2025-07-30 09:57:09,351 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Тест подключения пользователя Slurm] *******************************************************************************************************************
2025-07-30 09:57:09,351 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:09 +0000 (0:00:00.058)       0:07:56.236 ******** 
2025-07-30 09:57:09,652 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:09,659 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Проверка списка баз данных] ****************************************************************************************************************************
2025-07-30 09:57:09,659 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:09 +0000 (0:00:00.308)       0:07:56.544 ******** 
2025-07-30 09:57:09,970 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:09,977 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Создание конфига оптимизации для Slurm] ****************************************************************************************************************
2025-07-30 09:57:09,978 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:09 +0000 (0:00:00.318)       0:07:56.862 ******** 
2025-07-30 09:57:10,553 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:10,561 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек] ************************************************************************************************************
2025-07-30 09:57:10,561 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:10 +0000 (0:00:00.583)       0:07:57.446 ******** 
2025-07-30 09:57:22,932 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:22,941 p=206881 u=master n=ansible | TASK [slurm_master : [MARIADB] Финальный результат] ***********************************************************************************************************************************
2025-07-30 09:57:22,941 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:22 +0000 (0:00:12.380)       0:08:09.826 ******** 
2025-07-30 09:57:23,002 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F42C MariaDB настройка завершена:\n\U0001F464 Пользователь: slurm\n\U0001F4CA База: slurm_acct_db\n✅ Подключение: False\n\n\U0001F4CB Доступные базы:\nDatabase\ninformation_schema\nslurm_acct_db\n\n\U0001F389 ГОТОВ ДЛЯ SLURM!"
2025-07-30 09:57:23,014 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание конфигурации Slurm] **********************************************************************************************************************
2025-07-30 09:57:23,014 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:23 +0000 (0:00:00.072)       0:08:09.898 ******** 
2025-07-30 09:57:23,042 p=206881 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/config.yml for sm01
2025-07-30 09:57:23,054 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание основного конфига slurm.conf] ******************************************************************************************************************
2025-07-30 09:57:23,054 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:23 +0000 (0:00:00.040)       0:08:09.939 ******** 
2025-07-30 09:57:23,986 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:23,994 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание конфига slurmdbd.conf] *************************************************************************************************************************
2025-07-30 09:57:23,995 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:23 +0000 (0:00:00.940)       0:08:10.879 ******** 
2025-07-30 09:57:24,630 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:24,637 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание gres.conf для GPU] *****************************************************************************************************************************
2025-07-30 09:57:24,637 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:24 +0000 (0:00:00.642)       0:08:11.522 ******** 
2025-07-30 09:57:25,302 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:25,310 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание cgroup.conf] ***********************************************************************************************************************************
2025-07-30 09:57:25,310 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:25 +0000 (0:00:00.672)       0:08:12.195 ******** 
2025-07-30 09:57:25,935 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:25,942 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Создание директории для конфигов на NFS] ****************************************************************************************************************
2025-07-30 09:57:25,942 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:25 +0000 (0:00:00.632)       0:08:12.827 ******** 
2025-07-30 09:57:26,209 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:26,217 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Копирование конфигов на NFS для распространения] ********************************************************************************************************
2025-07-30 09:57:26,217 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:26 +0000 (0:00:00.274)       0:08:13.102 ******** 
2025-07-30 09:57:26,568 p=206881 u=master n=ansible | changed: [sm01] => (item=slurm.conf)
2025-07-30 09:57:26,858 p=206881 u=master n=ansible | changed: [sm01] => (item=cgroup.conf)
2025-07-30 09:57:27,155 p=206881 u=master n=ansible | changed: [sm01] => (item=gres.conf)
2025-07-30 09:57:27,163 p=206881 u=master n=ansible | TASK [slurm_master : [CONFIG] Конфигурация создана] ***********************************************************************************************************************************
2025-07-30 09:57:27,164 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:27 +0000 (0:00:00.946)       0:08:14.048 ******** 
2025-07-30 09:57:27,185 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F4DD Конфигурация Slurm:\n✅ slurm.conf создан\n✅ gres.conf создан (AutoDetect=nvml)\n✅ cgroup.conf создан\n✅ slurmdbd.conf создан\n\U0001F4E4 Файлы скопированы в /sw/config/ для распространения"
2025-07-30 09:57:27,192 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Настройка systemd сервисов] ***********************************************************************************************************************
2025-07-30 09:57:27,192 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:27 +0000 (0:00:00.028)       0:08:14.077 ******** 
2025-07-30 09:57:27,218 p=206881 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/slurm_master/tasks/services.yml for sm01
2025-07-30 09:57:27,233 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmctld] ******************************************************************************************************************
2025-07-30 09:57:27,234 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:27 +0000 (0:00:00.041)       0:08:14.118 ******** 
2025-07-30 09:57:27,832 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:27,840 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Создание systemd unit для slurmdbd] *******************************************************************************************************************
2025-07-30 09:57:27,840 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:27 +0000 (0:00:00.606)       0:08:14.725 ******** 
2025-07-30 09:57:28,435 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:28,442 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Перезагрузка systemd daemon] **************************************************************************************************************************
2025-07-30 09:57:28,443 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:28 +0000 (0:00:00.602)       0:08:15.327 ******** 
2025-07-30 09:57:29,248 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:29,256 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmdbd (сначала база)] ***********************************************************************************************************************
2025-07-30 09:57:29,257 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:29 +0000 (0:00:00.813)       0:08:16.141 ******** 
2025-07-30 09:57:29,766 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:29,774 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Пауза после запуска slurmdbd] *************************************************************************************************************************
2025-07-30 09:57:29,775 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:29 +0000 (0:00:00.517)       0:08:16.659 ******** 
2025-07-30 09:57:29,825 p=206881 u=master n=ansible | Pausing for 3 seconds
2025-07-30 09:57:29,825 p=206881 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-30 09:57:32,831 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:32,839 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Запуск slurmctld (после базы)] ************************************************************************************************************************
2025-07-30 09:57:32,839 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:32 +0000 (0:00:03.064)       0:08:19.724 ******** 
2025-07-30 09:57:33,318 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:57:33,326 p=206881 u=master n=ansible | TASK [slurm_master : [SERVICES] Сервисы запущены] *************************************************************************************************************************************
2025-07-30 09:57:33,326 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:33 +0000 (0:00:00.487)       0:08:20.211 ******** 
2025-07-30 09:57:33,348 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "\U0001F39B️ Slurm сервисы:\n✅ slurmdbd запущен\n✅ slurmctld запущен\n\U0001F527 Проверьте: systemctl status slurmctld slurmdbd"
2025-07-30 09:57:33,356 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание директорий для prolog/epilog] ************************************************************************************************************
2025-07-30 09:57:33,356 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:33 +0000 (0:00:00.029)       0:08:20.241 ******** 
2025-07-30 09:57:33,628 p=206881 u=master n=ansible | changed: [sm01] => (item=/etc/slurm/prolog.d)
2025-07-30 09:57:33,877 p=206881 u=master n=ansible | changed: [sm01] => (item=/etc/slurm/epilog.d)
2025-07-30 09:57:33,886 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание Enroot prolog скрипта] *******************************************************************************************************************
2025-07-30 09:57:33,886 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:33 +0000 (0:00:00.530)       0:08:20.771 ******** 
2025-07-30 09:57:34,467 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:34,475 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание Enroot epilog скрипта] *******************************************************************************************************************
2025-07-30 09:57:34,475 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:34 +0000 (0:00:00.588)       0:08:21.359 ******** 
2025-07-30 09:57:35,058 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:35,065 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Создание базовых enroot директорий] ***************************************************************************************************************
2025-07-30 09:57:35,066 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:35 +0000 (0:00:00.590)       0:08:21.950 ******** 
2025-07-30 09:57:35,335 p=206881 u=master n=ansible | changed: [sm01] => (item=/run/enroot)
2025-07-30 09:57:35,586 p=206881 u=master n=ansible | changed: [sm01] => (item=/tmp/enroot-data)
2025-07-30 09:57:35,840 p=206881 u=master n=ansible | changed: [sm01] => (item=/var/lib/enroot-cache)
2025-07-30 09:57:35,853 p=206881 u=master n=ansible | TASK [slurm_master : [SLURM-MASTER] Завершение настройки] *****************************************************************************************************************************
2025-07-30 09:57:35,853 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:35 +0000 (0:00:00.787)       0:08:22.737 ******** 
2025-07-30 09:57:35,908 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "✅ Slurm Master настроен!\n\U0001F527 Кластер: hpc-cluster\n\U0001F39B️ Controller: sm01:6817\n\U0001F4BE Database: включена"
2025-07-30 09:57:35,928 p=206881 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmctld] ************************************************************************************************************************************
2025-07-30 09:57:35,928 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:35 +0000 (0:00:00.075)       0:08:22.813 ******** 
2025-07-30 09:57:36,974 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:36,982 p=206881 u=master n=ansible | RUNNING HANDLER [slurm_master : restart slurmdbd] *************************************************************************************************************************************
2025-07-30 09:57:36,982 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:36 +0000 (0:00:01.053)       0:08:23.867 ******** 
2025-07-30 09:57:37,841 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:57:37,858 p=206881 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] ******************************************************************************************************************************************************
2025-07-30 09:57:37,897 p=206881 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ********************************************************************************************************************************
2025-07-30 09:57:37,897 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:37 +0000 (0:00:00.914)       0:08:24.782 ******** 
2025-07-30 09:57:37,924 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn01"
2025-07-30 09:57:37,935 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F527 Настройка базовых компонентов на cn02"
2025-07-30 09:57:37,943 p=206881 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *****************************************************************************************************************************************
2025-07-30 09:57:37,943 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:37 +0000 (0:00:00.046)       0:08:24.828 ******** 
2025-07-30 09:57:45,508 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:45,704 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:45,713 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ************************************************************************************************************************************
2025-07-30 09:57:45,713 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:45 +0000 (0:00:07.769)       0:08:32.597 ******** 
2025-07-30 09:57:46,756 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:46,844 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:46,852 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] *******************************************************************************************************************************************
2025-07-30 09:57:46,852 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:46 +0000 (0:00:01.139)       0:08:33.737 ******** 
2025-07-30 09:57:47,219 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:47,239 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:47,249 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] **********************************************************************************************************************************
2025-07-30 09:57:47,249 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:47 +0000 (0:00:00.397)       0:08:34.134 ******** 
2025-07-30 09:57:47,572 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:47,639 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:47,647 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] **********************************************************************************************************************************************
2025-07-30 09:57:47,647 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:47 +0000 (0:00:00.397)       0:08:34.532 ******** 
2025-07-30 09:57:48,652 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:48,666 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:48,673 p=206881 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *****************************************************************************************************************************
2025-07-30 09:57:48,674 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:48 +0000 (0:00:01.026)       0:08:35.558 ******** 
2025-07-30 09:57:50,153 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:57:50,215 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:57:50,223 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **************************************************************************************************************************
2025-07-30 09:57:50,223 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:50 +0000 (0:00:01.549)       0:08:37.108 ******** 
2025-07-30 09:57:50,243 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:50,253 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:50,260 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] **********************************************************************************************************************
2025-07-30 09:57:50,261 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:50 +0000 (0:00:00.037)       0:08:37.145 ******** 
2025-07-30 09:57:50,533 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:57:50,547 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:57:50,783 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:57:50,798 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:57:51,034 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:57:51,047 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:57:51,283 p=206881 u=master n=ansible | changed: [cn01] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:57:51,296 p=206881 u=master n=ansible | changed: [cn02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:57:51,308 p=206881 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] ******************************************************************************************************************************
2025-07-30 09:57:51,308 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:51 +0000 (0:00:01.047)       0:08:38.192 ******** 
2025-07-30 09:57:51,571 p=206881 u=master n=ansible | ok: [cn01 -> sm01]
2025-07-30 09:57:51,596 p=206881 u=master n=ansible | ok: [cn02 -> sm01]
2025-07-30 09:57:51,604 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] **********************************************************************************************************************
2025-07-30 09:57:51,604 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:51 +0000 (0:00:00.296)       0:08:38.489 ******** 
2025-07-30 09:57:52,260 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:52,267 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:52,274 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ****************************************************************************************************************
2025-07-30 09:57:52,274 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:52 +0000 (0:00:00.670)       0:08:39.159 ******** 
2025-07-30 09:57:52,294 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:52,305 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:52,312 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *************************************************************************************************************************************
2025-07-30 09:57:52,312 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:52 +0000 (0:00:00.037)       0:08:39.196 ******** 
2025-07-30 09:57:54,095 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:57:54,196 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:57:54,204 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ****************************************************************************************************************************************
2025-07-30 09:57:54,204 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:54 +0000 (0:00:01.892)       0:08:41.089 ******** 
2025-07-30 09:57:54,469 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:54,483 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:54,491 p=206881 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *************************************************************************************************************************************
2025-07-30 09:57:54,491 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:54 +0000 (0:00:00.286)       0:08:41.375 ******** 
2025-07-30 09:57:54,517 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: MUNGE работает корректно на cn01
2025-07-30 09:57:54,534 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: MUNGE работает корректно на cn02
2025-07-30 09:57:54,541 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] **********************************************************************************************************************************************
2025-07-30 09:57:54,541 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:54 +0000 (0:00:00.050)       0:08:41.426 ******** 
2025-07-30 09:57:55,543 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:55,563 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:55,570 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] ***********************************************************************************************************************************************
2025-07-30 09:57:55,570 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:55 +0000 (0:00:01.028)       0:08:42.455 ******** 
2025-07-30 09:57:55,835 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:55,854 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:55,862 p=206881 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *************************************************************************************************************************************************
2025-07-30 09:57:55,862 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:55 +0000 (0:00:00.291)       0:08:42.746 ******** 
2025-07-30 09:57:55,886 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:57:55,899 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:57:55,907 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] *******************************************************************************************************************************
2025-07-30 09:57:55,907 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:55 +0000 (0:00:00.045)       0:08:42.792 ******** 
2025-07-30 09:57:55,928 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:55,937 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:55,944 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *************************************************************************************************************************
2025-07-30 09:57:55,945 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:55 +0000 (0:00:00.037)       0:08:42.829 ******** 
2025-07-30 09:57:55,965 p=206881 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-30 09:57:55,966 p=206881 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-30 09:57:55,967 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:55,975 p=206881 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-30 09:57:55,978 p=206881 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-30 09:57:55,979 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:55,986 p=206881 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *************************************************************************************************************************************
2025-07-30 09:57:55,986 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:55 +0000 (0:00:00.041)       0:08:42.871 ******** 
2025-07-30 09:57:56,010 p=206881 u=master n=ansible | skipping: [cn01] => (item=/home) 
2025-07-30 09:57:56,014 p=206881 u=master n=ansible | skipping: [cn01] => (item=/sw) 
2025-07-30 09:57:56,017 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:56,030 p=206881 u=master n=ansible | skipping: [cn02] => (item=/home) 
2025-07-30 09:57:56,033 p=206881 u=master n=ansible | skipping: [cn02] => (item=/sw) 
2025-07-30 09:57:56,034 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:56,042 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] ******************************************************************************************************************
2025-07-30 09:57:56,042 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:56 +0000 (0:00:00.055)       0:08:42.927 ******** 
2025-07-30 09:57:56,120 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:57:56,121 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:57:56,124 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:57:56,127 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:57:56,129 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:57:56,132 p=206881 u=master n=ansible | skipping: [cn01] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:57:56,133 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:56,137 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:57:56,140 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:57:56,143 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:57:56,145 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:57:56,148 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:57:56,151 p=206881 u=master n=ansible | skipping: [cn02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:57:56,152 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:56,160 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ********************************************************************************************************************************
2025-07-30 09:57:56,160 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:56 +0000 (0:00:00.117)       0:08:43.044 ******** 
2025-07-30 09:57:56,180 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:56,192 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:56,200 p=206881 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ********************************************************************************************************************
2025-07-30 09:57:56,200 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:56 +0000 (0:00:00.040)       0:08:43.085 ******** 
2025-07-30 09:57:56,220 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:56,231 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:56,238 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] **********************************************************************************************************************************
2025-07-30 09:57:56,239 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:56 +0000 (0:00:00.038)       0:08:43.123 ******** 
2025-07-30 09:57:56,258 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:56,267 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:56,274 p=206881 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] ***********************************************************************************************************************************
2025-07-30 09:57:56,275 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:56 +0000 (0:00:00.035)       0:08:43.159 ******** 
2025-07-30 09:57:56,294 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:56,304 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:56,311 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *****************************************************************************************************************************************
2025-07-30 09:57:56,312 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:56 +0000 (0:00:00.037)       0:08:43.196 ******** 
2025-07-30 09:57:57,317 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:57:57,353 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:57:57,360 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] ******************************************************************************************************************************
2025-07-30 09:57:57,360 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:57 +0000 (0:00:01.048)       0:08:44.245 ******** 
2025-07-30 09:57:57,634 p=206881 u=master n=ansible | ok: [cn01] => (item=/sw)
2025-07-30 09:57:57,652 p=206881 u=master n=ansible | ok: [cn02] => (item=/sw)
2025-07-30 09:57:57,661 p=206881 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ************************************************************************************************************
2025-07-30 09:57:57,661 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:57 +0000 (0:00:00.300)       0:08:44.546 ******** 
2025-07-30 09:57:57,937 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:57:57,948 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:57:58,184 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:57:58,199 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:57:58,208 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ********************************************************************************************************************************************
2025-07-30 09:57:58,208 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:58 +0000 (0:00:00.546)       0:08:45.093 ******** 
2025-07-30 09:57:58,228 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:58,238 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:58,245 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] **********************************************************************************************************
2025-07-30 09:57:58,245 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:58 +0000 (0:00:00.036)       0:08:45.130 ******** 
2025-07-30 09:57:58,264 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:57:58,275 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:57:58,282 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ****************************************************************************************************************************
2025-07-30 09:57:58,282 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:58 +0000 (0:00:00.037)       0:08:45.167 ******** 
2025-07-30 09:57:58,553 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:58,567 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:58,801 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:58,819 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,051 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,067 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,298 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,316 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,546 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:57:59,567 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:57:59,795 p=206881 u=master n=ansible | ok: [cn01] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,824 p=206881 u=master n=ansible | ok: [cn02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:57:59,836 p=206881 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ********************************************************************************************************************************
2025-07-30 09:57:59,837 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:59 +0000 (0:00:01.554)       0:08:46.721 ******** 
2025-07-30 09:57:59,862 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: ✅ Узел cn01 готов для установки Slurm
2025-07-30 09:57:59,873 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: ✅ Узел cn02 готов для установки Slurm
2025-07-30 09:57:59,890 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Начало настройки Slurm Compute узла] ************************************************************************************************************
2025-07-30 09:57:59,890 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:59 +0000 (0:00:00.053)       0:08:46.774 ******** 
2025-07-30 09:57:59,950 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn01\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-30 09:57:59,971 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Настройка Slurm Compute узла: cn02\n\U0001F517 Master: sm01 (10.20.90.240)\n\U0001F5A5️  GPU: 8x h100"
2025-07-30 09:57:59,979 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности Slurm binaries] ************************************************************************************************************
2025-07-30 09:57:59,979 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:57:59 +0000 (0:00:00.089)       0:08:46.863 ******** 
2025-07-30 09:58:00,258 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:00,266 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:00,274 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование Slurm binaries из NFS] **************************************************************************************************************
2025-07-30 09:58:00,274 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:00 +0000 (0:00:00.295)       0:08:47.159 ******** 
2025-07-30 09:58:00,294 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:58:00,308 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:58:00,315 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка доступности мастер узла] ***************************************************************************************************************
2025-07-30 09:58:00,316 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:00 +0000 (0:00:00.041)       0:08:47.200 ******** 
2025-07-30 09:58:00,643 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:00,644 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:00,655 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Предупреждение о мастер узле] *******************************************************************************************************************
2025-07-30 09:58:00,655 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:00 +0000 (0:00:00.339)       0:08:47.540 ******** 
2025-07-30 09:58:00,700 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:58:00,715 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:58:00,723 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Ожидание конфигурационных файлов на NFS] ********************************************************************************************************
2025-07-30 09:58:00,723 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:00 +0000 (0:00:00.067)       0:08:47.607 ******** 
2025-07-30 09:58:00,989 p=206881 u=master n=ansible | ok: [cn01] => (item=slurm.conf)
2025-07-30 09:58:01,006 p=206881 u=master n=ansible | ok: [cn02] => (item=slurm.conf)
2025-07-30 09:58:01,229 p=206881 u=master n=ansible | ok: [cn01] => (item=cgroup.conf)
2025-07-30 09:58:01,250 p=206881 u=master n=ansible | ok: [cn02] => (item=cgroup.conf)
2025-07-30 09:58:01,473 p=206881 u=master n=ansible | ok: [cn01] => (item=gres.conf)
2025-07-30 09:58:01,498 p=206881 u=master n=ansible | ok: [cn02] => (item=gres.conf)
2025-07-30 09:58:01,507 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Копирование конфигурационных файлов из NFS] *****************************************************************************************************
2025-07-30 09:58:01,507 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:01 +0000 (0:00:00.784)       0:08:48.392 ******** 
2025-07-30 09:58:01,843 p=206881 u=master n=ansible | changed: [cn01] => (item=slurm.conf)
2025-07-30 09:58:01,855 p=206881 u=master n=ansible | changed: [cn02] => (item=slurm.conf)
2025-07-30 09:58:02,151 p=206881 u=master n=ansible | changed: [cn01] => (item=cgroup.conf)
2025-07-30 09:58:02,163 p=206881 u=master n=ansible | changed: [cn02] => (item=cgroup.conf)
2025-07-30 09:58:02,459 p=206881 u=master n=ansible | changed: [cn01] => (item=gres.conf)
2025-07-30 09:58:02,471 p=206881 u=master n=ansible | changed: [cn02] => (item=gres.conf)
2025-07-30 09:58:02,480 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на команды] *******************************************************************************************************
2025-07-30 09:58:02,480 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:02 +0000 (0:00:00.973)       0:08:49.365 ******** 
2025-07-30 09:58:02,751 p=206881 u=master n=ansible | ok: [cn01] => (item=sinfo)
2025-07-30 09:58:02,765 p=206881 u=master n=ansible | ok: [cn02] => (item=sinfo)
2025-07-30 09:58:02,997 p=206881 u=master n=ansible | ok: [cn01] => (item=squeue)
2025-07-30 09:58:03,014 p=206881 u=master n=ansible | ok: [cn02] => (item=squeue)
2025-07-30 09:58:03,243 p=206881 u=master n=ansible | ok: [cn01] => (item=sbatch)
2025-07-30 09:58:03,262 p=206881 u=master n=ansible | ok: [cn02] => (item=sbatch)
2025-07-30 09:58:03,489 p=206881 u=master n=ansible | ok: [cn01] => (item=srun)
2025-07-30 09:58:03,513 p=206881 u=master n=ansible | ok: [cn02] => (item=srun)
2025-07-30 09:58:03,737 p=206881 u=master n=ansible | ok: [cn01] => (item=scancel)
2025-07-30 09:58:03,763 p=206881 u=master n=ansible | ok: [cn02] => (item=scancel)
2025-07-30 09:58:03,986 p=206881 u=master n=ansible | ok: [cn01] => (item=scontrol)
2025-07-30 09:58:04,013 p=206881 u=master n=ansible | ok: [cn02] => (item=scontrol)
2025-07-30 09:58:04,023 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание символических ссылок на демоны] ********************************************************************************************************
2025-07-30 09:58:04,023 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:04 +0000 (0:00:01.542)       0:08:50.907 ******** 
2025-07-30 09:58:04,298 p=206881 u=master n=ansible | ok: [cn01] => (item=slurmd)
2025-07-30 09:58:04,314 p=206881 u=master n=ansible | ok: [cn02] => (item=slurmd)
2025-07-30 09:58:04,437 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка наличия NVIDIA GPU] ********************************************************************************************************************
2025-07-30 09:58:04,437 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:04 +0000 (0:00:00.414)       0:08:51.322 ******** 
2025-07-30 09:58:04,701 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:04,722 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:04,730 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Результат обнаружения GPU] **********************************************************************************************************************
2025-07-30 09:58:04,730 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:04 +0000 (0:00:00.293)       0:08:51.615 ******** 
2025-07-30 09:58:04,787 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-30 09:58:04,809 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "⚠️  GPU не обнаружены или nvidia-smi недоступен\n\U0001F4DD Будет использоваться конфигурация по умолчанию"
2025-07-30 09:58:04,816 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание systemd unit для slurmd] ***************************************************************************************************************
2025-07-30 09:58:04,817 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:04 +0000 (0:00:00.086)       0:08:51.701 ******** 
2025-07-30 09:58:05,421 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:05,422 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:05,431 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Перезагрузка systemd daemon] ********************************************************************************************************************
2025-07-30 09:58:05,431 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:05 +0000 (0:00:00.614)       0:08:52.316 ******** 
2025-07-30 09:58:06,202 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:06,226 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:06,233 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка cgroup v1/v2] **************************************************************************************************************************
2025-07-30 09:58:06,234 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:06 +0000 (0:00:00.802)       0:08:53.118 ******** 
2025-07-30 09:58:06,500 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:06,513 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:06,521 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Информация о cgroup] ****************************************************************************************************************************
2025-07-30 09:58:06,521 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:06 +0000 (0:00:00.287)       0:08:53.406 ******** 
2025-07-30 09:58:06,578 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-30 09:58:06,591 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F5C2️  Cgroup версия: cgroup_v2\n\U0001F4C1 Точка монтирования: /sys/fs/cgroup"
2025-07-30 09:58:06,598 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Создание скрипта проверки здоровья узла] ********************************************************************************************************
2025-07-30 09:58:06,598 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:06 +0000 (0:00:00.077)       0:08:53.483 ******** 
2025-07-30 09:58:07,282 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:07,329 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:07,336 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Запуск и включение slurmd] **********************************************************************************************************************
2025-07-30 09:58:07,336 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:07 +0000 (0:00:00.737)       0:08:54.221 ******** 
2025-07-30 09:58:07,858 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:58:07,883 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:58:07,892 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой] **************************************************************************************************************************
2025-07-30 09:58:07,892 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:07 +0000 (0:00:00.555)       0:08:54.776 ******** 
2025-07-30 09:58:07,912 p=206881 u=master n=ansible | Pausing for 5 seconds
2025-07-30 09:58:07,913 p=206881 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-30 09:58:12,921 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:12,931 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка статуса slurmd] ************************************************************************************************************************
2025-07-30 09:58:12,931 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:12 +0000 (0:00:05.039)       0:08:59.816 ******** 
2025-07-30 09:58:13,404 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:13,419 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:13,427 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Проверка логов slurmd] **************************************************************************************************************************
2025-07-30 09:58:13,428 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:13 +0000 (0:00:00.496)       0:09:00.312 ******** 
2025-07-30 09:58:13,703 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:13,741 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:13,749 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Тест подключения к мастеру] *********************************************************************************************************************
2025-07-30 09:58:13,749 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:13 +0000 (0:00:00.321)       0:09:00.634 ******** 
2025-07-30 09:58:14,097 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:14,139 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:14,150 p=206881 u=master n=ansible | TASK [slurm_compute : [SLURM-COMPUTE] Финальный статус узла] **************************************************************************************************************************
2025-07-30 09:58:14,151 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:14 +0000 (0:00:00.401)       0:09:01.035 ******** 
2025-07-30 09:58:14,179 p=206881 u=master n=ansible | ok: [cn01] => 
  msg: "\U0001F3AF Slurm Compute узел cn01 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-30T12:58:07.856] error: MPI: Cannot create context for mpi/pmix_v5\n[2025-07-30T12:58:07.857] slurmd started on Wed, 30 Jul 2025 12:58:07 +0300\n[2025-07-30T12:58:07.857] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=65693 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-30 09:58:14,192 p=206881 u=master n=ansible | ok: [cn02] => 
  msg: "\U0001F3AF Slurm Compute узел cn02 настроен!\n\n\U0001F4CA Статус сервиса:\n✅ slurmd активен\n[2025-07-30T12:58:07.866] error: MPI: Cannot create context for mpi/pmix\n[2025-07-30T12:58:07.866] slurmd started on Wed, 30 Jul 2025 12:58:07 +0300\n[2025-07-30T12:58:07.867] CPUs=4 Boards=1 Sockets=4 Cores=1 Threads=1 Memory=11723 TmpDisk=50085 Uptime=65953 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)\n\n\U0001F310 Подключение к мастеру:\n✅ Подключение к мастеру работает\n\n\U0001F527 Следующие шаги:\n1. Проверьте: systemctl status slurmd\n2. На мастере: sinfo (узел должен стать idle)\n3. Тест задачи: srun -N1 hostname"
2025-07-30 09:58:14,228 p=206881 u=master n=ansible | RUNNING HANDLER [slurm_compute : restart slurmd] **************************************************************************************************************************************
2025-07-30 09:58:14,228 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:14 +0000 (0:00:00.077)       0:09:01.112 ******** 
2025-07-30 09:58:15,030 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:58:15,054 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:58:15,080 p=206881 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ********************************************************************************************************************************************************
2025-07-30 09:58:15,107 p=206881 u=master n=ansible | TASK [common : [COMMON] Начало выполнения роли common] ********************************************************************************************************************************
2025-07-30 09:58:15,107 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:15 +0000 (0:00:00.879)       0:09:01.992 ******** 
2025-07-30 09:58:15,134 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F527 Настройка базовых компонентов на sm02"
2025-07-30 09:58:15,142 p=206881 u=master n=ansible | TASK [common : [COMMON] Обновление apt cache] *****************************************************************************************************************************************
2025-07-30 09:58:15,142 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:15 +0000 (0:00:00.034)       0:09:02.027 ******** 
2025-07-30 09:58:16,782 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:16,790 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка базовых пакетов] ************************************************************************************************************************************
2025-07-30 09:58:16,790 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:16 +0000 (0:00:01.647)       0:09:03.674 ******** 
2025-07-30 09:58:17,798 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:17,806 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка timezone] *******************************************************************************************************************************************
2025-07-30 09:58:17,806 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:17 +0000 (0:00:01.016)       0:09:04.691 ******** 
2025-07-30 09:58:18,167 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:18,175 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание пользователя slurm] **********************************************************************************************************************************
2025-07-30 09:58:18,175 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:18 +0000 (0:00:00.368)       0:09:05.060 ******** 
2025-07-30 09:58:18,503 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:18,514 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MUNGE] **********************************************************************************************************************************************
2025-07-30 09:58:18,515 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:18 +0000 (0:00:00.339)       0:09:05.399 ******** 
2025-07-30 09:58:19,489 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:19,544 p=206881 u=master n=ansible | TASK [common : [COMMON] Остановка MUNGE перед настройкой] *****************************************************************************************************************************
2025-07-30 09:58:19,544 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:19 +0000 (0:00:01.029)       0:09:06.429 ******** 
2025-07-30 09:58:21,201 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:58:21,209 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на master узле] **************************************************************************************************************************
2025-07-30 09:58:21,209 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:21 +0000 (0:00:01.664)       0:09:08.093 ******** 
2025-07-30 09:58:21,229 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:21,236 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа MUNGE директорий] **********************************************************************************************************************
2025-07-30 09:58:21,236 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:21 +0000 (0:00:00.027)       0:09:08.121 ******** 
2025-07-30 09:58:21,511 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:58:21,763 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:58:22,007 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0700'})
2025-07-30 09:58:22,253 p=206881 u=master n=ansible | changed: [sm02] => (item={'path': '/run/munge', 'owner': 'munge', 'group': 'munge', 'mode': '0755'})
2025-07-30 09:58:22,263 p=206881 u=master n=ansible | TASK [common : [COMMON] Получение MUNGE ключа с мастера] ******************************************************************************************************************************
2025-07-30 09:58:22,263 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:22 +0000 (0:00:01.026)       0:09:09.148 ******** 
2025-07-30 09:58:22,530 p=206881 u=master n=ansible | ok: [sm02 -> sm01]
2025-07-30 09:58:22,538 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание MUNGE ключа на остальных узлах] **********************************************************************************************************************
2025-07-30 09:58:22,539 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:22 +0000 (0:00:00.275)       0:09:09.423 ******** 
2025-07-30 09:58:23,809 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:23,818 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка прав доступа на ключ MUNGE (мастер)] ****************************************************************************************************************
2025-07-30 09:58:23,818 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:23 +0000 (0:00:01.279)       0:09:10.703 ******** 
2025-07-30 09:58:23,839 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:23,846 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение MUNGE] *************************************************************************************************************************************
2025-07-30 09:58:23,847 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:23 +0000 (0:00:00.028)       0:09:10.731 ******** 
2025-07-30 09:58:25,753 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:58:25,762 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка работы MUNGE] ****************************************************************************************************************************************
2025-07-30 09:58:25,762 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:25 +0000 (0:00:01.915)       0:09:12.646 ******** 
2025-07-30 09:58:26,032 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:26,040 p=206881 u=master n=ansible | TASK [common : [COMMON] Результат проверки MUNGE] *************************************************************************************************************************************
2025-07-30 09:58:26,041 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:26 +0000 (0:00:00.278)       0:09:12.925 ******** 
2025-07-30 09:58:26,067 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: MUNGE работает корректно на sm02
2025-07-30 09:58:26,075 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка HWLOC] **********************************************************************************************************************************************
2025-07-30 09:58:26,075 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:26 +0000 (0:00:00.034)       0:09:12.959 ******** 
2025-07-30 09:58:27,052 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:27,060 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка HWLOC] ***********************************************************************************************************************************************
2025-07-30 09:58:27,060 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.985)       0:09:13.945 ******** 
2025-07-30 09:58:27,328 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:27,339 p=206881 u=master n=ansible | TASK [common : [COMMON] Версия HWLOC] *************************************************************************************************************************************************
2025-07-30 09:58:27,339 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.278)       0:09:14.224 ******** 
2025-07-30 09:58:27,363 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: 'Установлена версия HWLOC: lstopo 2.10.0'
2025-07-30 09:58:27,371 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS server на master] *******************************************************************************************************************************
2025-07-30 09:58:27,371 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.031)       0:09:14.255 ******** 
2025-07-30 09:58:27,389 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,396 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание директорий для экспорта NFS] *************************************************************************************************************************
2025-07-30 09:58:27,397 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.025)       0:09:14.281 ******** 
2025-07-30 09:58:27,416 p=206881 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-30 09:58:27,418 p=206881 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-30 09:58:27,419 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,426 p=206881 u=master n=ansible | TASK [common : [COMMON] Очистка старых экспортов] *************************************************************************************************************************************
2025-07-30 09:58:27,426 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.029)       0:09:14.311 ******** 
2025-07-30 09:58:27,446 p=206881 u=master n=ansible | skipping: [sm02] => (item=/home) 
2025-07-30 09:58:27,448 p=206881 u=master n=ansible | skipping: [sm02] => (item=/sw) 
2025-07-30 09:58:27,449 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,457 p=206881 u=master n=ansible | TASK [common : [COMMON] Настройка экспорта NFS (автоопределение IP)] ******************************************************************************************************************
2025-07-30 09:58:27,457 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.030)       0:09:14.341 ******** 
2025-07-30 09:58:27,538 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:58:27,540 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:58:27,543 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/home', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:58:27,545 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.212'}) 
2025-07-30 09:58:27,548 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.204'}) 
2025-07-30 09:58:27,551 p=206881 u=master n=ansible | skipping: [sm02] => (item={'path': '/sw', 'client_ip': '10.20.90.215'}) 
2025-07-30 09:58:27,552 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,560 p=206881 u=master n=ansible | TASK [common : [COMMON] Запуск и включение NFS server] ********************************************************************************************************************************
2025-07-30 09:58:27,560 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.103)       0:09:14.445 ******** 
2025-07-30 09:58:27,578 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,586 p=206881 u=master n=ansible | TASK [common : [COMMON] Принудительная перезагрузка экспортов NFS] ********************************************************************************************************************
2025-07-30 09:58:27,586 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.025)       0:09:14.470 ******** 
2025-07-30 09:58:27,603 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,610 p=206881 u=master n=ansible | TASK [common : [COMMON] Проверка активных экспортов] **********************************************************************************************************************************
2025-07-30 09:58:27,611 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.024)       0:09:14.495 ******** 
2025-07-30 09:58:27,628 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,636 p=206881 u=master n=ansible | TASK [common : [COMMON] Показать активные экспорты] ***********************************************************************************************************************************
2025-07-30 09:58:27,636 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.025)       0:09:14.521 ******** 
2025-07-30 09:58:27,653 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:27,661 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка NFS client] *****************************************************************************************************************************************
2025-07-30 09:58:27,661 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:27 +0000 (0:00:00.024)       0:09:14.545 ******** 
2025-07-30 09:58:28,636 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:28,644 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание точек монтирования NFS] ******************************************************************************************************************************
2025-07-30 09:58:28,644 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:28 +0000 (0:00:00.982)       0:09:15.528 ******** 
2025-07-30 09:58:28,927 p=206881 u=master n=ansible | ok: [sm02] => (item=/sw)
2025-07-30 09:58:28,936 p=206881 u=master n=ansible | TASK [common : [COMMON] Монтирование NFS shares (автоопределение сервера)] ************************************************************************************************************
2025-07-30 09:58:28,936 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:28 +0000 (0:00:00.292)       0:09:15.821 ******** 
2025-07-30 09:58:29,217 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/home', 'src': '/home'})
2025-07-30 09:58:29,474 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/sw', 'src': '/sw'})
2025-07-30 09:58:29,487 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка MariaDB] ********************************************************************************************************************************************
2025-07-30 09:58:29,487 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:29 +0000 (0:00:00.550)       0:09:16.372 ******** 
2025-07-30 09:58:29,506 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:29,513 p=206881 u=master n=ansible | TASK [common : [COMMON] Установка python3-pymysql для Ansible mysql модулей] **********************************************************************************************************
2025-07-30 09:58:29,514 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:29 +0000 (0:00:00.026)       0:09:16.398 ******** 
2025-07-30 09:58:29,531 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:29,538 p=206881 u=master n=ansible | TASK [common : [COMMON] Создание базовых директорий Slurm] ****************************************************************************************************************************
2025-07-30 09:58:29,538 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:29 +0000 (0:00:00.024)       0:09:16.423 ******** 
2025-07-30 09:58:29,821 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/log/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:58:30,073 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:58:30,326 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/ctld', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:58:30,581 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/spool/slurm/d', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:58:30,878 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/etc/slurm', 'owner': 'root', 'group': 'root', 'mode': '0755'})
2025-07-30 09:58:31,131 p=206881 u=master n=ansible | ok: [sm02] => (item={'path': '/var/lib/slurm', 'owner': 'slurm', 'group': 'slurm', 'mode': '0755'})
2025-07-30 09:58:31,141 p=206881 u=master n=ansible | TASK [common : [COMMON] Роль common выполнена успешно] ********************************************************************************************************************************
2025-07-30 09:58:31,142 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:31 +0000 (0:00:01.603)       0:09:18.026 ******** 
2025-07-30 09:58:31,166 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: ✅ Узел sm02 готов для установки Slurm
2025-07-30 09:58:31,179 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Начало настройки Slurm Login узла] ******************************************************************************************************************
2025-07-30 09:58:31,179 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:31 +0000 (0:00:00.037)       0:09:18.064 ******** 
2025-07-30 09:58:31,203 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "\U0001F511 Настройка Slurm Login узла: sm02\n\U0001F517 Master: sm01\n\U0001F465 Пользовательский доступ к кластеру"
2025-07-30 09:58:31,211 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Установка пакетов для пользователей] ****************************************************************************************************************
2025-07-30 09:58:31,211 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:31 +0000 (0:00:00.032)       0:09:18.096 ******** 
2025-07-30 09:58:33,145 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:33,153 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание директории Slurm] **************************************************************************************************************************
2025-07-30 09:58:33,153 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:33 +0000 (0:00:01.942)       0:09:20.038 ******** 
2025-07-30 09:58:33,421 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:33,430 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование Slurm клиентских команд из NFS] *********************************************************************************************************
2025-07-30 09:58:33,430 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:33 +0000 (0:00:00.276)       0:09:20.315 ******** 
2025-07-30 09:58:33,717 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:58:33,725 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результат установки клиентов] ***********************************************************************************************************************
2025-07-30 09:58:33,725 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:33 +0000 (0:00:00.295)       0:09:20.610 ******** 
2025-07-30 09:58:33,751 p=206881 u=master n=ansible | ok: [sm02] => 
  client_install.stdout_lines:
  - Установлено 20 команд
2025-07-30 09:58:33,758 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд] *****************************************************************************************************
2025-07-30 09:58:33,758 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:33 +0000 (0:00:00.032)       0:09:20.643 ******** 
2025-07-30 09:58:34,034 p=206881 u=master n=ansible | ok: [sm02] => (item=sinfo)
2025-07-30 09:58:34,284 p=206881 u=master n=ansible | ok: [sm02] => (item=squeue)
2025-07-30 09:58:34,537 p=206881 u=master n=ansible | ok: [sm02] => (item=scancel)
2025-07-30 09:58:34,791 p=206881 u=master n=ansible | ok: [sm02] => (item=sbatch)
2025-07-30 09:58:35,050 p=206881 u=master n=ansible | ok: [sm02] => (item=salloc)
2025-07-30 09:58:35,307 p=206881 u=master n=ansible | ok: [sm02] => (item=srun)
2025-07-30 09:58:35,565 p=206881 u=master n=ansible | ok: [sm02] => (item=sacct)
2025-07-30 09:58:35,828 p=206881 u=master n=ansible | ok: [sm02] => (item=scontrol)
2025-07-30 09:58:36,088 p=206881 u=master n=ansible | ok: [sm02] => (item=sprio)
2025-07-30 09:58:36,344 p=206881 u=master n=ansible | ok: [sm02] => (item=smap)
2025-07-30 09:58:36,599 p=206881 u=master n=ansible | ok: [sm02] => (item=sdiag)
2025-07-30 09:58:36,859 p=206881 u=master n=ansible | ok: [sm02] => (item=sstat)
2025-07-30 09:58:37,118 p=206881 u=master n=ansible | ok: [sm02] => (item=sreport)
2025-07-30 09:58:37,386 p=206881 u=master n=ansible | ok: [sm02] => (item=sacctmgr)
2025-07-30 09:58:37,639 p=206881 u=master n=ansible | ok: [sm02] => (item=sattach)
2025-07-30 09:58:37,897 p=206881 u=master n=ansible | ok: [sm02] => (item=sbcast)
2025-07-30 09:58:38,146 p=206881 u=master n=ansible | ok: [sm02] => (item=sshare)
2025-07-30 09:58:38,166 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Обновление библиотечного кеша] **********************************************************************************************************************
2025-07-30 09:58:38,167 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:38 +0000 (0:00:04.408)       0:09:25.051 ******** 
2025-07-30 09:58:38,764 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:58:38,773 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Ожидание конфигурационных файлов на NFS] ************************************************************************************************************
2025-07-30 09:58:38,773 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:38 +0000 (0:00:00.606)       0:09:25.658 ******** 
2025-07-30 09:58:39,062 p=206881 u=master n=ansible | ok: [sm02] => (item=slurm.conf)
2025-07-30 09:58:39,309 p=206881 u=master n=ansible | ok: [sm02] => (item=gres.conf)
2025-07-30 09:58:39,555 p=206881 u=master n=ansible | ok: [sm02] => (item=cgroup.conf)
2025-07-30 09:58:39,565 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Копирование конфигурационных файлов из NFS] *********************************************************************************************************
2025-07-30 09:58:39,565 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:39 +0000 (0:00:00.791)       0:09:26.450 ******** 
2025-07-30 09:58:40,163 p=206881 u=master n=ansible | changed: [sm02] => (item=slurm.conf)
2025-07-30 09:58:41,154 p=206881 u=master n=ansible | changed: [sm02] => (item=gres.conf)
2025-07-30 09:58:41,995 p=206881 u=master n=ansible | changed: [sm02] => (item=cgroup.conf)
2025-07-30 09:58:42,008 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание пользовательских директорий] ***************************************************************************************************************
2025-07-30 09:58:42,008 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:42 +0000 (0:00:02.442)       0:09:28.893 ******** 
2025-07-30 09:58:42,285 p=206881 u=master n=ansible | ok: [sm02] => (item=/home/users)
2025-07-30 09:58:42,535 p=206881 u=master n=ansible | ok: [sm02] => (item=/scratch)
2025-07-30 09:58:42,785 p=206881 u=master n=ansible | ok: [sm02] => (item=/projects)
2025-07-30 09:58:42,794 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание профиля Slurm для пользователей] ***********************************************************************************************************
2025-07-30 09:58:42,794 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:42 +0000 (0:00:00.785)       0:09:29.678 ******** 
2025-07-30 09:58:43,828 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:43,836 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Bash completion для Slurm команд] *******************************************************************************************************************
2025-07-30 09:58:43,836 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:43 +0000 (0:00:01.042)       0:09:30.721 ******** 
2025-07-30 09:58:44,884 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:44,893 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Настройка SSH для пользователей] ********************************************************************************************************************
2025-07-30 09:58:44,893 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:44 +0000 (0:00:01.056)       0:09:31.777 ******** 
2025-07-30 09:58:45,168 p=206881 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?MaxSessions', 'line': 'MaxSessions 10'})
2025-07-30 09:58:45,411 p=206881 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?PrintMotd', 'line': 'PrintMotd yes'})
2025-07-30 09:58:45,663 p=206881 u=master n=ansible | ok: [sm02] => (item={'regexp': '^#?Banner', 'line': 'Banner /etc/ssh/banner'})
2025-07-30 09:58:45,672 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Создание SSH banner] ********************************************************************************************************************************
2025-07-30 09:58:45,672 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:45 +0000 (0:00:00.779)       0:09:32.557 ******** 
2025-07-30 09:58:46,960 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:46,970 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Тест Slurm клиентских команд] ***********************************************************************************************************************
2025-07-30 09:58:46,970 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:46 +0000 (0:00:01.297)       0:09:33.855 ******** 
2025-07-30 09:58:47,264 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:47,272 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Результаты тестирования] ****************************************************************************************************************************
2025-07-30 09:58:47,272 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:47 +0000 (0:00:00.301)       0:09:34.156 ******** 
2025-07-30 09:58:47,296 p=206881 u=master n=ansible | ok: [sm02] => 
  slurm_test.stdout_lines:
  - === ТЕСТ SLURM КОМАНД ===
  - 'sinfo version: slurm 25.05.1'
  - 'Cluster ping:'
  - Slurmctld(primary) at sm01 is UP
  - 'Cluster info:'
  - PARTITION AVAIL  TIMELIMIT   NODES(A/I/O/T) NODELIST
  - compute*     up   infinite          0/0/2/2 cn[01-02]
2025-07-30 09:58:47,303 p=206881 u=master n=ansible | TASK [slurm_login : [SLURM-LOGIN] Завершение настройки Login узла] ********************************************************************************************************************
2025-07-30 09:58:47,303 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:47 +0000 (0:00:00.031)       0:09:34.188 ******** 
2025-07-30 09:58:47,362 p=206881 u=master n=ansible | ok: [sm02] => 
  msg: "✅ Slurm Login узел sm02 настроен!\n\n\U0001F465 Пользователи могут:\n- Подключаться по SSH\n- Запускать задачи: sbatch, srun, salloc\n- Просматривать кластер: sinfo, squeue\n- Управлять задачами: scancel, scontrol\n\n\U0001F4C1 Доступные директории:\n/home/users, /scratch, /projects\n\n\U0001F527 Команды Slurm установлены в /usr/bin/\n\U0001F4CB Конфигурация синхронизирована с sm01\n\U0001F3AF Алиасы и автодополнение настроены\n\n\U0001F680 Login узел готов к работе!"
2025-07-30 09:58:47,391 p=206881 u=master n=ansible | PLAY [ЭТАП 6: Отключение AppArmor] ****************************************************************************************************************************************************
2025-07-30 09:58:47,414 p=206881 u=master n=ansible | TASK [grub_apparmor : [GRUB] Проверка наличия apparmor=0] *****************************************************************************************************************************
2025-07-30 09:58:47,414 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:47 +0000 (0:00:00.111)       0:09:34.299 ******** 
2025-07-30 09:58:47,680 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:47,709 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:47,716 p=206881 u=master n=ansible | TASK [grub_apparmor : [GRUB] Добавление apparmor=0 к GRUB параметрам] *****************************************************************************************************************
2025-07-30 09:58:47,717 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:47 +0000 (0:00:00.302)       0:09:34.601 ******** 
2025-07-30 09:58:47,741 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:58:47,755 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:58:47,762 p=206881 u=master n=ansible | TASK [grub_apparmor : [GRUB] Исправление дублирования apparmor=0] *********************************************************************************************************************
2025-07-30 09:58:47,762 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:47 +0000 (0:00:00.045)       0:09:34.647 ******** 
2025-07-30 09:58:48,149 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:48,152 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:48,201 p=206881 u=master n=ansible | PLAY [ЭТАП 7: Установка Enroot] *******************************************************************************************************************************************************
2025-07-30 09:58:48,240 p=206881 u=master n=ansible | TASK [nvidia.enroot : ubuntu tasks] ***************************************************************************************************************************************************
2025-07-30 09:58:48,240 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:48 +0000 (0:00:00.478)       0:09:35.125 ******** 
2025-07-30 09:58:48,353 p=206881 u=master n=ansible | included: /home/master/22Jul/slurm-hpc-cluster/roles/nvidia.enroot/tasks/ubuntu.yml for sm01, sm02, cn01, cn02
2025-07-30 09:58:48,364 p=206881 u=master n=ansible | TASK [nvidia.enroot : enroot dependency packages] *************************************************************************************************************************************
2025-07-30 09:58:48,364 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:48 +0000 (0:00:00.123)       0:09:35.249 ******** 
2025-07-30 09:58:49,405 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:49,432 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:49,474 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:49,511 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:58:49,519 p=206881 u=master n=ansible | TASK [nvidia.enroot : repo key] *******************************************************************************************************************************************************
2025-07-30 09:58:49,519 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:49 +0000 (0:00:01.154)       0:09:36.403 ******** 
2025-07-30 09:58:49,562 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:58:49,578 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:49,581 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:58:49,599 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:58:49,607 p=206881 u=master n=ansible | TASK [nvidia.enroot : repo] ***********************************************************************************************************************************************************
2025-07-30 09:58:49,608 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:49 +0000 (0:00:00.088)       0:09:36.492 ******** 
2025-07-30 09:58:49,642 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:58:49,659 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:58:49,661 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:58:49,678 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:58:49,686 p=206881 u=master n=ansible | TASK [nvidia.enroot : gather package facts for comparison] ****************************************************************************************************************************
2025-07-30 09:58:49,686 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:49 +0000 (0:00:00.078)       0:09:36.570 ******** 
2025-07-30 09:58:52,610 p=206881 u=master n=ansible | ok: [sm02]
2025-07-30 09:58:52,668 p=206881 u=master n=ansible | ok: [cn02]
2025-07-30 09:58:52,706 p=206881 u=master n=ansible | ok: [cn01]
2025-07-30 09:58:52,979 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:58:53,069 p=206881 u=master n=ansible | TASK [nvidia.enroot : remove existing enroot package if we are changing version] ******************************************************************************************************
2025-07-30 09:58:53,069 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:58:53 +0000 (0:00:03.383)       0:09:39.954 ******** 
2025-07-30 09:58:57,948 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:58:58,756 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:59:00,509 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:59:06,954 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:59:06,994 p=206881 u=master n=ansible | TASK [nvidia.enroot : enroot deb packages] ********************************************************************************************************************************************
2025-07-30 09:59:06,994 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:06 +0000 (0:00:13.925)       0:09:53.879 ******** 
2025-07-30 09:59:11,853 p=206881 u=master n=ansible | changed: [cn01] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot_3.2.0-1_amd64.deb)
2025-07-30 09:59:13,563 p=206881 u=master n=ansible | changed: [cn02] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot_3.2.0-1_amd64.deb)
2025-07-30 09:59:14,245 p=206881 u=master n=ansible | changed: [sm02] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot_3.2.0-1_amd64.deb)
2025-07-30 09:59:15,710 p=206881 u=master n=ansible | changed: [cn01] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot+caps_3.2.0-1_amd64.deb)
2025-07-30 09:59:18,037 p=206881 u=master n=ansible | changed: [cn02] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot+caps_3.2.0-1_amd64.deb)
2025-07-30 09:59:18,358 p=206881 u=master n=ansible | changed: [sm02] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot+caps_3.2.0-1_amd64.deb)
2025-07-30 09:59:19,074 p=206881 u=master n=ansible | changed: [sm01] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot_3.2.0-1_amd64.deb)
2025-07-30 09:59:23,602 p=206881 u=master n=ansible | changed: [sm01] => (item=https://github.com/NVIDIA/enroot/releases/download/v3.2.0/enroot+caps_3.2.0-1_amd64.deb)
2025-07-30 09:59:23,644 p=206881 u=master n=ansible | TASK [nvidia.enroot : Install enroot packages from repos] *****************************************************************************************************************************
2025-07-30 09:59:23,645 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:23 +0000 (0:00:16.650)       0:10:10.529 ******** 
2025-07-30 09:59:23,692 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:59:23,733 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:23,775 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:59:23,795 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:59:23,834 p=206881 u=master n=ansible | TASK [nvidia.enroot : rhel tasks] *****************************************************************************************************************************************************
2025-07-30 09:59:23,834 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:23 +0000 (0:00:00.189)       0:10:10.719 ******** 
2025-07-30 09:59:23,939 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:59:23,983 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:24,029 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:59:24,042 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:59:24,081 p=206881 u=master n=ansible | TASK [nvidia.enroot : install bash completions] ***************************************************************************************************************************************
2025-07-30 09:59:24,082 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:24 +0000 (0:00:00.247)       0:10:10.966 ******** 
2025-07-30 09:59:24,384 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:59:24,403 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:59:24,447 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:59:24,507 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:59:24,547 p=206881 u=master n=ansible | TASK [nvidia.enroot : configure enroot.conf] ******************************************************************************************************************************************
2025-07-30 09:59:24,547 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:24 +0000 (0:00:00.465)       0:10:11.432 ******** 
2025-07-30 09:59:24,942 p=206881 u=master n=ansible | changed: [sm02]
2025-07-30 09:59:24,946 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:59:24,954 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:59:25,319 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:59:25,362 p=206881 u=master n=ansible | TASK [nvidia.enroot : configure environ.d/] *******************************************************************************************************************************************
2025-07-30 09:59:25,362 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:25 +0000 (0:00:00.815)       0:10:12.247 ******** 
2025-07-30 09:59:25,475 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:59:25,518 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:25,561 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:59:25,572 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:59:25,613 p=206881 u=master n=ansible | TASK [nvidia.enroot : configure hooks.d/] *********************************************************************************************************************************************
2025-07-30 09:59:25,614 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:25 +0000 (0:00:00.251)       0:10:12.498 ******** 
2025-07-30 09:59:25,664 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:59:25,708 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:25,751 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:59:25,761 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:59:25,800 p=206881 u=master n=ansible | TASK [nvidia.enroot : configure mounts.d/] ********************************************************************************************************************************************
2025-07-30 09:59:25,800 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:25 +0000 (0:00:00.186)       0:10:12.685 ******** 
2025-07-30 09:59:25,848 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:59:25,888 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:25,931 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:59:25,941 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:59:26,591 p=206881 u=master n=ansible | PLAY [ЭТАП 8: Перезапуск сервисов] ****************************************************************************************************************************************************
2025-07-30 09:59:26,875 p=206881 u=master n=ansible | TASK [Перезапуск slurmd] **************************************************************************************************************************************************************
2025-07-30 09:59:26,875 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:26 +0000 (0:00:01.074)       0:10:13.760 ******** 
2025-07-30 09:59:26,922 p=206881 u=master n=ansible | skipping: [sm01]
2025-07-30 09:59:26,963 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:27,778 p=206881 u=master n=ansible | changed: [cn01]
2025-07-30 09:59:27,826 p=206881 u=master n=ansible | changed: [cn02]
2025-07-30 09:59:27,867 p=206881 u=master n=ansible | TASK [Перезапуск slurmctld] ***********************************************************************************************************************************************************
2025-07-30 09:59:27,867 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:27 +0000 (0:00:00.992)       0:10:14.752 ******** 
2025-07-30 09:59:27,966 p=206881 u=master n=ansible | skipping: [sm02]
2025-07-30 09:59:28,010 p=206881 u=master n=ansible | skipping: [cn01]
2025-07-30 09:59:28,024 p=206881 u=master n=ansible | skipping: [cn02]
2025-07-30 09:59:29,882 p=206881 u=master n=ansible | changed: [sm01]
2025-07-30 09:59:29,923 p=206881 u=master n=ansible | TASK [Пауза] **************************************************************************************************************************************************************************
2025-07-30 09:59:29,923 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:29 +0000 (0:00:02.056)       0:10:16.808 ******** 
2025-07-30 09:59:29,946 p=206881 u=master n=ansible | Pausing for 5 seconds
2025-07-30 09:59:29,946 p=206881 u=master n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-07-30 09:59:34,952 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 09:59:35,497 p=206881 u=master n=ansible | PLAY [ЭТАП 9: Тестирование] ***********************************************************************************************************************************************************
2025-07-30 09:59:35,598 p=206881 u=master n=ansible | TASK [Тест кластера] ******************************************************************************************************************************************************************
2025-07-30 09:59:35,598 p=206881 u=master n=ansible | Wednesday 30 July 2025  09:59:35 +0000 (0:00:05.674)       0:10:22.482 ******** 
2025-07-30 10:01:25,152 p=206881 u=master n=ansible | ok: [sm01]
2025-07-30 10:01:25,199 p=206881 u=master n=ansible | TASK [Результат] **********************************************************************************************************************************************************************
2025-07-30 10:01:25,199 p=206881 u=master n=ansible | Wednesday 30 July 2025  10:01:25 +0000 (0:01:49.601)       0:12:12.084 ******** 
2025-07-30 10:01:25,231 p=206881 u=master n=ansible | ok: [sm01] => 
  msg: "=== ТЕСТ КЛАСТЕРА ===\nSlurmctld(primary) at sm01 is UP\nPARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST\ncompute*     up   infinite      2  inval cn[01-02]\nТест задачи...\nКонтейнеры настраиваются...\n\n\U0001F389 КЛАСТЕР УСТАНОВЛЕН!\n\nКоманды для тестирования:\n- sinfo\n- srun hostname\n- srun --container-image=docker://hello-world"
2025-07-30 10:01:25,365 p=206881 u=master n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************
2025-07-30 10:01:25,366 p=206881 u=master n=ansible | cn01                       : ok=108  changed=20   unreachable=0    failed=0    skipped=59   rescued=0    ignored=0   
2025-07-30 10:01:25,366 p=206881 u=master n=ansible | cn02                       : ok=107  changed=20   unreachable=0    failed=0    skipped=59   rescued=0    ignored=0   
2025-07-30 10:01:25,366 p=206881 u=master n=ansible | localhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-07-30 10:01:25,366 p=206881 u=master n=ansible | sm01                       : ok=128  changed=46   unreachable=0    failed=0    skipped=21   rescued=0    ignored=0   
2025-07-30 10:01:25,366 p=206881 u=master n=ansible | sm02                       : ok=101  changed=19   unreachable=0    failed=0    skipped=57   rescued=0    ignored=0   
2025-07-30 10:01:25,366 p=206881 u=master n=ansible | Playbook run took 0 days, 0 hours, 12 minutes, 12 seconds
2025-07-30 10:01:25,367 p=206881 u=master n=ansible | Wednesday 30 July 2025  10:01:25 +0000 (0:00:00.167)       0:12:12.251 ******** 
2025-07-30 10:01:25,367 p=206881 u=master n=ansible | =============================================================================== 
2025-07-30 10:01:25,367 p=206881 u=master n=ansible | slurm_build : [SLURM_BUILD] Компиляция Slurm (это займет время...) ----------------------------------------------------------------------------------------------------------- 299.01s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | Тест кластера ---------------------------------------------------------------------------------------------------------------------------------------------------------------- 109.60s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | slurm_build : [SLURM_BUILD] Конфигурация сборки Slurm с JWT поддержкой -------------------------------------------------------------------------------------------------------- 34.79s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка Slurm на все узлы из архива ------------------------------------------------------------------------------------------------------------- 22.91s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | nvidia.enroot : enroot deb packages ------------------------------------------------------------------------------------------------------------------------------------------- 16.65s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | common : [COMMON] Обновление apt cache ---------------------------------------------------------------------------------------------------------------------------------------- 14.18s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | nvidia.enroot : remove existing enroot package if we are changing version ----------------------------------------------------------------------------------------------------- 13.93s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | slurm_build : [SLURM_BUILD] Установка дополнительных зависимостей для сборки -------------------------------------------------------------------------------------------------- 13.00s
2025-07-30 10:01:25,368 p=206881 u=master n=ansible | slurm_master : [MARIADB] Перезапуск MariaDB для применения настроек ----------------------------------------------------------------------------------------------------------- 12.38s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | common : [COMMON] Обновление apt cache ----------------------------------------------------------------------------------------------------------------------------------------- 7.77s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | common : restart nfs-server ---------------------------------------------------------------------------------------------------------------------------------------------------- 6.54s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | Пауза -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.67s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | slurm_build : [SLURM_BUILD] Извлечение исходников Slurm ------------------------------------------------------------------------------------------------------------------------ 5.50s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | slurm_build : [SLURM_BUILD] Создание символических ссылок для пользовательских команд Slurm ------------------------------------------------------------------------------------ 5.24s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | slurm_compute : [SLURM-COMPUTE] Пауза перед проверкой -------------------------------------------------------------------------------------------------------------------------- 5.04s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | slurm_login : [SLURM-LOGIN] Создание символических ссылок для Slurm команд ----------------------------------------------------------------------------------------------------- 4.41s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | nvidia.enroot : gather package facts for comparison ---------------------------------------------------------------------------------------------------------------------------- 3.38s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | slurm_master : [MARIADB] Создание пользователя и базы Slurm (исправленная версия) ---------------------------------------------------------------------------------------------- 3.32s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | common : [COMMON] Обновление apt cache ----------------------------------------------------------------------------------------------------------------------------------------- 3.14s
2025-07-30 10:01:25,369 p=206881 u=master n=ansible | slurm_master : [SERVICES] Пауза после запуска slurmdbd ------------------------------------------------------------------------------------------------------------------------- 3.06s
2025-07-30 10:12:42,300 p=210048 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ************************************************************************************************************************************************
2025-07-30 10:12:42,309 p=210048 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *****************************************************************************************************************************************************
2025-07-30 10:12:42,339 p=210048 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *************************************************************************************************************************************
2025-07-30 10:12:42,362 p=210048 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] *******************************************************************************************************************************************************
2025-07-30 10:12:42,369 p=210048 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] ******************************************************************************************************************************************************
2025-07-30 10:12:42,388 p=210048 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ********************************************************************************************************************************************************
2025-07-30 10:12:42,402 p=210048 u=master n=ansible | PLAY [ЭТАП 6: Отключение AppArmor] ****************************************************************************************************************************************************
2025-07-30 10:12:42,406 p=210048 u=master n=ansible | PLAY [ЭТАП 7: Установка Enroot] *******************************************************************************************************************************************************
2025-07-30 10:12:42,410 p=210048 u=master n=ansible | PLAY [ЭТАП 8: Перезапуск сервисов] ****************************************************************************************************************************************************
2025-07-30 10:12:42,413 p=210048 u=master n=ansible | PLAY [ЭТАП 9: Тестирование] ***********************************************************************************************************************************************************
2025-07-30 10:12:42,416 p=210048 u=master n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************
2025-07-30 10:12:42,416 p=210048 u=master n=ansible | Playbook run took 0 days, 0 hours, 0 minutes, 0 seconds
2025-07-30 10:12:42,417 p=210048 u=master n=ansible | Wednesday 30 July 2025  10:12:42 +0000 (0:00:00.118)       0:00:00.118 ******** 
2025-07-30 10:12:42,417 p=210048 u=master n=ansible | =============================================================================== 
2025-07-30 10:12:42,417 p=210048 u=master n=ansible |  [ERROR]: No matching task "ЭТАП 3: Настройка master" found. Note: --start-at-task can only follow static includes.

2025-07-30 10:13:08,657 p=210105 u=master n=ansible | cn01 | CHANGED | rc=0 >>
prolog.sh not found
epilog.sh not found
/etc/slurm/epilog.d/:
total 8
drwxr-xr-x 2 root root 4096 Jul 30 13:13 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..

/etc/slurm/prolog.d/:
total 8
drwxr-xr-x 2 root root 4096 Jul 30 13:13 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..

2025-07-30 10:13:08,901 p=210105 u=master n=ansible | cn02 | CHANGED | rc=0 >>
prolog.sh not found
epilog.sh not found
/etc/slurm/epilog.d/:
total 8
drwxr-xr-x 2 root root 4096 Jul 30 13:13 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..

/etc/slurm/prolog.d/:
total 8
drwxr-xr-x 2 root root 4096 Jul 30 13:13 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..

2025-07-30 10:13:17,871 p=210179 u=master n=ansible | cn01 | CHANGED => {
    "changed": true,
    "name": "slurmd",
    "state": "started",
    "status": {
        "ActiveEnterTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "ActiveEnterTimestampMonotonic": "65982672412",
        "ActiveExitTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "ActiveExitTimestampMonotonic": "65982651379",
        "ActiveState": "active",
        "After": "munge.service tmp.mount sysinit.target systemd-tmpfiles-setup.service -.mount basic.target systemd-journald.socket system.slice network-online.target",
        "AllowIsolate": "no",
        "AssertResult": "yes",
        "AssertTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "AssertTimestampMonotonic": "65982659743",
        "Before": "multi-user.target shutdown.target",
        "BlockIOAccounting": "no",
        "BlockIOWeight": "[not set]",
        "CPUAccounting": "yes",
        "CPUAffinityFromNUMA": "no",
        "CPUQuotaPerSecUSec": "infinity",
        "CPUQuotaPeriodUSec": "infinity",
        "CPUSchedulingPolicy": "0",
        "CPUSchedulingPriority": "0",
        "CPUSchedulingResetOnFork": "no",
        "CPUShares": "[not set]",
        "CPUUsageNSec": "147515000",
        "CPUWeight": "[not set]",
        "CacheDirectoryMode": "0755",
        "CanFreeze": "yes",
        "CanIsolate": "no",
        "CanReload": "yes",
        "CanStart": "yes",
        "CanStop": "yes",
        "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore",
        "CleanResult": "success",
        "CollectMode": "inactive",
        "ConditionResult": "yes",
        "ConditionTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "ConditionTimestampMonotonic": "65982659732",
        "ConfigurationDirectoryMode": "0755",
        "Conflicts": "shutdown.target",
        "ControlGroup": "/system.slice/slurmd.service",
        "ControlGroupId": "16803",
        "ControlPID": "0",
        "CoredumpFilter": "0x33",
        "CoredumpReceive": "no",
        "DefaultDependencies": "yes",
        "DefaultMemoryLow": "0",
        "DefaultMemoryMin": "0",
        "DefaultStartupMemoryLow": "0",
        "Delegate": "yes",
        "DelegateControllers": "cpu cpuset io memory pids",
        "Description": "Slurm node daemon",
        "DevicePolicy": "auto",
        "DynamicUser": "no",
        "EffectiveCPUs": "0-3",
        "EffectiveMemoryNodes": "0",
        "ExecMainCode": "0",
        "ExecMainExitTimestampMonotonic": "0",
        "ExecMainPID": "13381",
        "ExecMainStartTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "ExecMainStartTimestampMonotonic": "65982672143",
        "ExecMainStatus": "0",
        "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecStart": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; ignore_errors=no ; start_time=[Wed 2025-07-30 13:02:57 MSK] ; stop_time=[n/a] ; pid=13381 ; code=(null) ; status=0/0 }",
        "ExecStartEx": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; flags= ; start_time=[Wed 2025-07-30 13:02:57 MSK] ; stop_time=[n/a] ; pid=13381 ; code=(null) ; status=0/0 }",
        "ExitType": "main",
        "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "FailureAction": "none",
        "FileDescriptorStoreMax": "0",
        "FileDescriptorStorePreserve": "restart",
        "FinalKillSignal": "9",
        "FragmentPath": "/etc/systemd/system/slurmd.service",
        "FreezerState": "running",
        "GID": "[not set]",
        "GuessMainPID": "yes",
        "IOAccounting": "no",
        "IOReadBytes": "[not set]",
        "IOReadOperations": "[not set]",
        "IOSchedulingClass": "2",
        "IOSchedulingPriority": "4",
        "IOWeight": "[not set]",
        "IOWriteBytes": "[not set]",
        "IOWriteOperations": "[not set]",
        "IPAccounting": "no",
        "IPEgressBytes": "[no data]",
        "IPEgressPackets": "[no data]",
        "IPIngressBytes": "[no data]",
        "IPIngressPackets": "[no data]",
        "Id": "slurmd.service",
        "IgnoreOnIsolate": "no",
        "IgnoreSIGPIPE": "yes",
        "InactiveEnterTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "InactiveEnterTimestampMonotonic": "65982656523",
        "InactiveExitTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "InactiveExitTimestampMonotonic": "65982672412",
        "InvocationID": "c6cd0d309d3b45539a6b9ca49a9f2579",
        "JobRunningTimeoutUSec": "infinity",
        "JobTimeoutAction": "none",
        "JobTimeoutUSec": "infinity",
        "KeyringMode": "private",
        "KillMode": "control-group",
        "KillSignal": "15",
        "LimitAS": "infinity",
        "LimitASSoft": "infinity",
        "LimitCORE": "infinity",
        "LimitCORESoft": "0",
        "LimitCPU": "infinity",
        "LimitCPUSoft": "infinity",
        "LimitDATA": "infinity",
        "LimitDATASoft": "infinity",
        "LimitFSIZE": "infinity",
        "LimitFSIZESoft": "infinity",
        "LimitLOCKS": "infinity",
        "LimitLOCKSSoft": "infinity",
        "LimitMEMLOCK": "8388608",
        "LimitMEMLOCKSoft": "8388608",
        "LimitMSGQUEUE": "819200",
        "LimitMSGQUEUESoft": "819200",
        "LimitNICE": "0",
        "LimitNICESoft": "0",
        "LimitNOFILE": "65536",
        "LimitNOFILESoft": "65536",
        "LimitNPROC": "46581",
        "LimitNPROCSoft": "46581",
        "LimitRSS": "infinity",
        "LimitRSSSoft": "infinity",
        "LimitRTPRIO": "0",
        "LimitRTPRIOSoft": "0",
        "LimitRTTIME": "infinity",
        "LimitRTTIMESoft": "infinity",
        "LimitSIGPENDING": "46581",
        "LimitSIGPENDINGSoft": "46581",
        "LimitSTACK": "infinity",
        "LimitSTACKSoft": "8388608",
        "LoadState": "loaded",
        "LockPersonality": "no",
        "LogLevelMax": "-1",
        "LogRateLimitBurst": "0",
        "LogRateLimitIntervalUSec": "0",
        "LogsDirectoryMode": "0755",
        "MainPID": "13381",
        "ManagedOOMMemoryPressure": "auto",
        "ManagedOOMMemoryPressureLimit": "0",
        "ManagedOOMPreference": "none",
        "ManagedOOMSwap": "auto",
        "MemoryAccounting": "yes",
        "MemoryAvailable": "11718381568",
        "MemoryCurrent": "2764800",
        "MemoryDenyWriteExecute": "no",
        "MemoryHigh": "infinity",
        "MemoryKSM": "no",
        "MemoryLimit": "infinity",
        "MemoryLow": "0",
        "MemoryMax": "infinity",
        "MemoryMin": "0",
        "MemoryPeak": "3747840",
        "MemoryPressureThresholdUSec": "200ms",
        "MemoryPressureWatch": "auto",
        "MemorySwapCurrent": "0",
        "MemorySwapMax": "infinity",
        "MemorySwapPeak": "0",
        "MemoryZSwapCurrent": "0",
        "MemoryZSwapMax": "infinity",
        "MountAPIVFS": "no",
        "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "NFileDescriptorStore": "0",
        "NRestarts": "0",
        "NUMAPolicy": "n/a",
        "Names": "slurmd.service",
        "NeedDaemonReload": "no",
        "Nice": "0",
        "NoNewPrivileges": "no",
        "NonBlocking": "no",
        "NotifyAccess": "none",
        "OOMPolicy": "continue",
        "OOMScoreAdjust": "0",
        "OnFailureJobMode": "replace",
        "OnSuccessJobMode": "fail",
        "Perpetual": "no",
        "PrivateDevices": "no",
        "PrivateIPC": "no",
        "PrivateMounts": "no",
        "PrivateNetwork": "no",
        "PrivateTmp": "yes",
        "PrivateUsers": "no",
        "ProcSubset": "all",
        "ProtectClock": "no",
        "ProtectControlGroups": "no",
        "ProtectHome": "no",
        "ProtectHostname": "no",
        "ProtectKernelLogs": "no",
        "ProtectKernelModules": "no",
        "ProtectKernelTunables": "no",
        "ProtectProc": "default",
        "ProtectSystem": "no",
        "RefuseManualStart": "no",
        "RefuseManualStop": "no",
        "ReloadResult": "success",
        "ReloadSignal": "1",
        "RemainAfterExit": "no",
        "RemoveIPC": "no",
        "Requires": "system.slice sysinit.target -.mount",
        "RequiresMountsFor": "/var/tmp",
        "Restart": "on-failure",
        "RestartKillSignal": "15",
        "RestartMaxDelayUSec": "infinity",
        "RestartMode": "normal",
        "RestartSteps": "0",
        "RestartUSec": "5s",
        "RestartUSecNext": "5s",
        "RestrictNamespaces": "no",
        "RestrictRealtime": "no",
        "RestrictSUIDSGID": "no",
        "Result": "success",
        "RootDirectoryStartOnly": "no",
        "RootEphemeral": "no",
        "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "RuntimeDirectoryMode": "0755",
        "RuntimeDirectoryPreserve": "no",
        "RuntimeMaxUSec": "infinity",
        "RuntimeRandomizedExtraUSec": "0",
        "SameProcessGroup": "no",
        "SecureBits": "0",
        "SendSIGHUP": "no",
        "SendSIGKILL": "yes",
        "SetLoginEnvironment": "no",
        "Slice": "system.slice",
        "StandardError": "inherit",
        "StandardInput": "null",
        "StandardOutput": "journal",
        "StartLimitAction": "none",
        "StartLimitBurst": "5",
        "StartLimitIntervalUSec": "0",
        "StartupBlockIOWeight": "[not set]",
        "StartupCPUShares": "[not set]",
        "StartupCPUWeight": "[not set]",
        "StartupIOWeight": "[not set]",
        "StartupMemoryHigh": "infinity",
        "StartupMemoryLow": "0",
        "StartupMemoryMax": "infinity",
        "StartupMemorySwapMax": "infinity",
        "StartupMemoryZSwapMax": "infinity",
        "StateChangeTimestamp": "Wed 2025-07-30 13:02:57 MSK",
        "StateChangeTimestampMonotonic": "65982672412",
        "StateDirectoryMode": "0755",
        "StatusErrno": "0",
        "StopWhenUnneeded": "no",
        "SubState": "running",
        "SuccessAction": "none",
        "SurviveFinalKillSignal": "no",
        "SyslogFacility": "3",
        "SyslogLevel": "6",
        "SyslogLevelPrefix": "yes",
        "SyslogPriority": "30",
        "SystemCallErrorNumber": "2147483646",
        "TTYReset": "no",
        "TTYVHangup": "no",
        "TTYVTDisallocate": "no",
        "TasksAccounting": "yes",
        "TasksCurrent": "11",
        "TasksMax": "infinity",
        "TimeoutAbortUSec": "1min 30s",
        "TimeoutCleanUSec": "infinity",
        "TimeoutStartFailureMode": "terminate",
        "TimeoutStartUSec": "1min 30s",
        "TimeoutStopFailureMode": "terminate",
        "TimeoutStopUSec": "1min 30s",
        "TimerSlackNSec": "50000",
        "Transient": "no",
        "Type": "simple",
        "UID": "[not set]",
        "UMask": "0022",
        "UnitFilePreset": "enabled",
        "UnitFileState": "enabled",
        "UtmpMode": "init",
        "WantedBy": "multi-user.target",
        "Wants": "tmp.mount network-online.target munge.service",
        "WatchdogSignal": "6",
        "WatchdogTimestampMonotonic": "0",
        "WatchdogUSec": "0"
    }
}
2025-07-30 10:13:17,885 p=210179 u=master n=ansible | cn02 | CHANGED => {
    "changed": true,
    "name": "slurmd",
    "state": "started",
    "status": {
        "ActiveEnterTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "ActiveEnterTimestampMonotonic": "66032406607",
        "ActiveExitTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "ActiveExitTimestampMonotonic": "66032392327",
        "ActiveState": "active",
        "After": "munge.service tmp.mount sysinit.target basic.target -.mount systemd-tmpfiles-setup.service system.slice systemd-journald.socket network-online.target",
        "AllowIsolate": "no",
        "AssertResult": "yes",
        "AssertTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "AssertTimestampMonotonic": "66032397615",
        "Before": "shutdown.target multi-user.target",
        "BlockIOAccounting": "no",
        "BlockIOWeight": "[not set]",
        "CPUAccounting": "yes",
        "CPUAffinityFromNUMA": "no",
        "CPUQuotaPerSecUSec": "infinity",
        "CPUQuotaPeriodUSec": "infinity",
        "CPUSchedulingPolicy": "0",
        "CPUSchedulingPriority": "0",
        "CPUSchedulingResetOnFork": "no",
        "CPUShares": "[not set]",
        "CPUUsageNSec": "177899000",
        "CPUWeight": "[not set]",
        "CacheDirectoryMode": "0755",
        "CanFreeze": "yes",
        "CanIsolate": "no",
        "CanReload": "yes",
        "CanStart": "yes",
        "CanStop": "yes",
        "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore",
        "CleanResult": "success",
        "CollectMode": "inactive",
        "ConditionResult": "yes",
        "ConditionTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "ConditionTimestampMonotonic": "66032397608",
        "ConfigurationDirectoryMode": "0755",
        "Conflicts": "shutdown.target",
        "ControlGroup": "/system.slice/slurmd.service",
        "ControlGroupId": "16862",
        "ControlPID": "0",
        "CoredumpFilter": "0x33",
        "CoredumpReceive": "no",
        "DefaultDependencies": "yes",
        "DefaultMemoryLow": "0",
        "DefaultMemoryMin": "0",
        "DefaultStartupMemoryLow": "0",
        "Delegate": "yes",
        "DelegateControllers": "cpu cpuset io memory pids",
        "Description": "Slurm node daemon",
        "DevicePolicy": "auto",
        "DynamicUser": "no",
        "EffectiveCPUs": "0-3",
        "EffectiveMemoryNodes": "0",
        "ExecMainCode": "0",
        "ExecMainExitTimestampMonotonic": "0",
        "ExecMainPID": "7096",
        "ExecMainStartTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "ExecMainStartTimestampMonotonic": "66032406196",
        "ExecMainStatus": "0",
        "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecStart": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; ignore_errors=no ; start_time=[Wed 2025-07-30 12:59:27 MSK] ; stop_time=[n/a] ; pid=7096 ; code=(null) ; status=0/0 }",
        "ExecStartEx": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; flags= ; start_time=[Wed 2025-07-30 12:59:27 MSK] ; stop_time=[n/a] ; pid=7096 ; code=(null) ; status=0/0 }",
        "ExitType": "main",
        "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "FailureAction": "none",
        "FileDescriptorStoreMax": "0",
        "FileDescriptorStorePreserve": "restart",
        "FinalKillSignal": "9",
        "FragmentPath": "/etc/systemd/system/slurmd.service",
        "FreezerState": "running",
        "GID": "[not set]",
        "GuessMainPID": "yes",
        "IOAccounting": "no",
        "IOReadBytes": "[not set]",
        "IOReadOperations": "[not set]",
        "IOSchedulingClass": "2",
        "IOSchedulingPriority": "4",
        "IOWeight": "[not set]",
        "IOWriteBytes": "[not set]",
        "IOWriteOperations": "[not set]",
        "IPAccounting": "no",
        "IPEgressBytes": "[no data]",
        "IPEgressPackets": "[no data]",
        "IPIngressBytes": "[no data]",
        "IPIngressPackets": "[no data]",
        "Id": "slurmd.service",
        "IgnoreOnIsolate": "no",
        "IgnoreSIGPIPE": "yes",
        "InactiveEnterTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "InactiveEnterTimestampMonotonic": "66032395696",
        "InactiveExitTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "InactiveExitTimestampMonotonic": "66032406607",
        "InvocationID": "e4217d9c8c544ab99ee75e9e1638fec6",
        "JobRunningTimeoutUSec": "infinity",
        "JobTimeoutAction": "none",
        "JobTimeoutUSec": "infinity",
        "KeyringMode": "private",
        "KillMode": "control-group",
        "KillSignal": "15",
        "LimitAS": "infinity",
        "LimitASSoft": "infinity",
        "LimitCORE": "infinity",
        "LimitCORESoft": "0",
        "LimitCPU": "infinity",
        "LimitCPUSoft": "infinity",
        "LimitDATA": "infinity",
        "LimitDATASoft": "infinity",
        "LimitFSIZE": "infinity",
        "LimitFSIZESoft": "infinity",
        "LimitLOCKS": "infinity",
        "LimitLOCKSSoft": "infinity",
        "LimitMEMLOCK": "8388608",
        "LimitMEMLOCKSoft": "8388608",
        "LimitMSGQUEUE": "819200",
        "LimitMSGQUEUESoft": "819200",
        "LimitNICE": "0",
        "LimitNICESoft": "0",
        "LimitNOFILE": "65536",
        "LimitNOFILESoft": "65536",
        "LimitNPROC": "46581",
        "LimitNPROCSoft": "46581",
        "LimitRSS": "infinity",
        "LimitRSSSoft": "infinity",
        "LimitRTPRIO": "0",
        "LimitRTPRIOSoft": "0",
        "LimitRTTIME": "infinity",
        "LimitRTTIMESoft": "infinity",
        "LimitSIGPENDING": "46581",
        "LimitSIGPENDINGSoft": "46581",
        "LimitSTACK": "infinity",
        "LimitSTACKSoft": "8388608",
        "LoadState": "loaded",
        "LockPersonality": "no",
        "LogLevelMax": "-1",
        "LogRateLimitBurst": "0",
        "LogRateLimitIntervalUSec": "0",
        "LogsDirectoryMode": "0755",
        "MainPID": "7096",
        "ManagedOOMMemoryPressure": "auto",
        "ManagedOOMMemoryPressureLimit": "0",
        "ManagedOOMPreference": "none",
        "ManagedOOMSwap": "auto",
        "MemoryAccounting": "yes",
        "MemoryAvailable": "11797331968",
        "MemoryCurrent": "2920448",
        "MemoryDenyWriteExecute": "no",
        "MemoryHigh": "infinity",
        "MemoryKSM": "no",
        "MemoryLimit": "infinity",
        "MemoryLow": "0",
        "MemoryMax": "infinity",
        "MemoryMin": "0",
        "MemoryPeak": "3915776",
        "MemoryPressureThresholdUSec": "200ms",
        "MemoryPressureWatch": "auto",
        "MemorySwapCurrent": "0",
        "MemorySwapMax": "infinity",
        "MemorySwapPeak": "0",
        "MemoryZSwapCurrent": "0",
        "MemoryZSwapMax": "infinity",
        "MountAPIVFS": "no",
        "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "NFileDescriptorStore": "0",
        "NRestarts": "0",
        "NUMAPolicy": "n/a",
        "Names": "slurmd.service",
        "NeedDaemonReload": "no",
        "Nice": "0",
        "NoNewPrivileges": "no",
        "NonBlocking": "no",
        "NotifyAccess": "none",
        "OOMPolicy": "continue",
        "OOMScoreAdjust": "0",
        "OnFailureJobMode": "replace",
        "OnSuccessJobMode": "fail",
        "Perpetual": "no",
        "PrivateDevices": "no",
        "PrivateIPC": "no",
        "PrivateMounts": "no",
        "PrivateNetwork": "no",
        "PrivateTmp": "yes",
        "PrivateUsers": "no",
        "ProcSubset": "all",
        "ProtectClock": "no",
        "ProtectControlGroups": "no",
        "ProtectHome": "no",
        "ProtectHostname": "no",
        "ProtectKernelLogs": "no",
        "ProtectKernelModules": "no",
        "ProtectKernelTunables": "no",
        "ProtectProc": "default",
        "ProtectSystem": "no",
        "RefuseManualStart": "no",
        "RefuseManualStop": "no",
        "ReloadResult": "success",
        "ReloadSignal": "1",
        "RemainAfterExit": "no",
        "RemoveIPC": "no",
        "Requires": "system.slice sysinit.target -.mount",
        "RequiresMountsFor": "/var/tmp",
        "Restart": "on-failure",
        "RestartKillSignal": "15",
        "RestartMaxDelayUSec": "infinity",
        "RestartMode": "normal",
        "RestartSteps": "0",
        "RestartUSec": "5s",
        "RestartUSecNext": "5s",
        "RestrictNamespaces": "no",
        "RestrictRealtime": "no",
        "RestrictSUIDSGID": "no",
        "Result": "success",
        "RootDirectoryStartOnly": "no",
        "RootEphemeral": "no",
        "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "RuntimeDirectoryMode": "0755",
        "RuntimeDirectoryPreserve": "no",
        "RuntimeMaxUSec": "infinity",
        "RuntimeRandomizedExtraUSec": "0",
        "SameProcessGroup": "no",
        "SecureBits": "0",
        "SendSIGHUP": "no",
        "SendSIGKILL": "yes",
        "SetLoginEnvironment": "no",
        "Slice": "system.slice",
        "StandardError": "inherit",
        "StandardInput": "null",
        "StandardOutput": "journal",
        "StartLimitAction": "none",
        "StartLimitBurst": "5",
        "StartLimitIntervalUSec": "0",
        "StartupBlockIOWeight": "[not set]",
        "StartupCPUShares": "[not set]",
        "StartupCPUWeight": "[not set]",
        "StartupIOWeight": "[not set]",
        "StartupMemoryHigh": "infinity",
        "StartupMemoryLow": "0",
        "StartupMemoryMax": "infinity",
        "StartupMemorySwapMax": "infinity",
        "StartupMemoryZSwapMax": "infinity",
        "StateChangeTimestamp": "Wed 2025-07-30 12:59:27 MSK",
        "StateChangeTimestampMonotonic": "66032406607",
        "StateDirectoryMode": "0755",
        "StatusErrno": "0",
        "StopWhenUnneeded": "no",
        "SubState": "running",
        "SuccessAction": "none",
        "SurviveFinalKillSignal": "no",
        "SyslogFacility": "3",
        "SyslogLevel": "6",
        "SyslogLevelPrefix": "yes",
        "SyslogPriority": "30",
        "SystemCallErrorNumber": "2147483646",
        "TTYReset": "no",
        "TTYVHangup": "no",
        "TTYVTDisallocate": "no",
        "TasksAccounting": "yes",
        "TasksCurrent": "11",
        "TasksMax": "infinity",
        "TimeoutAbortUSec": "1min 30s",
        "TimeoutCleanUSec": "infinity",
        "TimeoutStartFailureMode": "terminate",
        "TimeoutStartUSec": "1min 30s",
        "TimeoutStopFailureMode": "terminate",
        "TimeoutStopUSec": "1min 30s",
        "TimerSlackNSec": "50000",
        "Transient": "no",
        "Type": "simple",
        "UID": "[not set]",
        "UMask": "0022",
        "UnitFilePreset": "enabled",
        "UnitFileState": "enabled",
        "UtmpMode": "init",
        "WantedBy": "multi-user.target",
        "Wants": "network-online.target munge.service tmp.mount",
        "WatchdogSignal": "6",
        "WatchdogTimestampMonotonic": "0",
        "WatchdogUSec": "0"
    }
}
2025-07-30 10:17:38,438 p=210294 u=master n=ansible | PLAY [🚀 УСТАНОВКА SLURM HPC КЛАСТЕРА] ************************************************************************************************************************************************
2025-07-30 10:17:38,447 p=210294 u=master n=ansible | PLAY [ЭТАП 1: Базовая подготовка] *****************************************************************************************************************************************************
2025-07-30 10:17:38,475 p=210294 u=master n=ansible | PLAY [ЭТАП 2: Компиляция и распространение Slurm] *************************************************************************************************************************************
2025-07-30 10:17:38,497 p=210294 u=master n=ansible | PLAY [ЭТАП 3: Настройка master] *******************************************************************************************************************************************************
2025-07-30 10:17:38,504 p=210294 u=master n=ansible | PLAY [ЭТАП 4: Настройка compute] ******************************************************************************************************************************************************
2025-07-30 10:17:38,523 p=210294 u=master n=ansible | PLAY [ЭТАП 5: Настройка login] ********************************************************************************************************************************************************
2025-07-30 10:17:38,537 p=210294 u=master n=ansible | PLAY [ЭТАП 6: Отключение AppArmor] ****************************************************************************************************************************************************
2025-07-30 10:17:38,540 p=210294 u=master n=ansible | PLAY [ЭТАП 7: Установка Enroot] *******************************************************************************************************************************************************
2025-07-30 10:17:38,545 p=210294 u=master n=ansible | PLAY [ЭТАП 8: Перезапуск сервисов] ****************************************************************************************************************************************************
2025-07-30 10:17:38,548 p=210294 u=master n=ansible | PLAY [ЭТАП 9: Тестирование] ***********************************************************************************************************************************************************
2025-07-30 10:17:38,551 p=210294 u=master n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************
2025-07-30 10:17:38,551 p=210294 u=master n=ansible | Playbook run took 0 days, 0 hours, 0 minutes, 0 seconds
2025-07-30 10:17:38,551 p=210294 u=master n=ansible | Wednesday 30 July 2025  10:17:38 +0000 (0:00:00.115)       0:00:00.115 ******** 
2025-07-30 10:17:38,551 p=210294 u=master n=ansible | =============================================================================== 
2025-07-30 10:17:38,552 p=210294 u=master n=ansible |  [ERROR]: No matching task "ЭТАП 3: Настройка master" found. Note: --start-at-task can only follow static includes.

2025-07-30 10:20:51,801 p=210441 u=master n=ansible | cn01 | CHANGED | rc=0 >>


2025-07-30 10:20:51,936 p=210441 u=master n=ansible | cn02 | CHANGED | rc=0 >>


2025-07-30 10:20:58,444 p=210508 u=master n=ansible | ERROR! this task 'copy' has extra params, which is only allowed in the following modules: ansible.legacy.include_vars, win_shell, ansible.builtin.win_command, win_command, ansible.legacy.include_role, ansible.windows.win_shell, ansible.legacy.meta, group_by, ansible.builtin.group_by, command, import_role, ansible.builtin.win_shell, meta, ansible.legacy.include_tasks, ansible.builtin.set_fact, import_tasks, ansible.legacy.group_by, ansible.builtin.shell, ansible.legacy.command, ansible.legacy.import_tasks, ansible.legacy.win_command, shell, ansible.builtin.meta, ansible.legacy.raw, ansible.builtin.raw, ansible.legacy.script, include_tasks, ansible.builtin.add_host, ansible.builtin.import_role, ansible.legacy.shell, ansible.builtin.include, raw, ansible.legacy.win_shell, ansible.builtin.include_tasks, ansible.builtin.include_role, add_host, include, include_vars, ansible.builtin.command, ansible.legacy.import_role, ansible.builtin.script, script, ansible.builtin.include_vars, ansible.legacy.add_host, ansible.windows.win_command, ansible.legacy.set_fact, include_role, set_fact, ansible.builtin.import_tasks, ansible.legacy.include
2025-07-30 10:20:58,996 p=210511 u=master n=ansible | ERROR! this task 'copy' has extra params, which is only allowed in the following modules: script, ansible.legacy.win_command, import_role, command, ansible.builtin.shell, ansible.legacy.import_tasks, set_fact, ansible.legacy.include_role, ansible.legacy.win_shell, ansible.legacy.include_tasks, ansible.builtin.set_fact, ansible.legacy.add_host, ansible.builtin.include, win_command, ansible.builtin.meta, ansible.builtin.include_vars, ansible.legacy.include, ansible.builtin.win_shell, ansible.legacy.group_by, ansible.legacy.command, group_by, ansible.builtin.add_host, ansible.builtin.group_by, ansible.builtin.script, ansible.builtin.raw, ansible.builtin.include_role, include_vars, meta, ansible.legacy.raw, win_shell, ansible.legacy.shell, ansible.legacy.import_role, raw, ansible.builtin.command, ansible.builtin.win_command, ansible.builtin.import_role, ansible.legacy.include_vars, ansible.legacy.meta, include, ansible.windows.win_shell, ansible.legacy.script, ansible.builtin.import_tasks, import_tasks, ansible.builtin.include_tasks, ansible.legacy.set_fact, ansible.windows.win_command, include_role, shell, add_host, include_tasks
2025-07-30 10:22:05,345 p=210560 u=master n=ansible | ERROR! this task 'copy' has extra params, which is only allowed in the following modules: ansible.legacy.include_tasks, script, group_by, ansible.legacy.shell, ansible.legacy.import_tasks, ansible.legacy.import_role, ansible.legacy.script, win_command, ansible.builtin.import_tasks, add_host, ansible.builtin.include_role, set_fact, meta, include_vars, import_role, ansible.windows.win_shell, ansible.legacy.add_host, ansible.builtin.meta, ansible.builtin.win_command, ansible.builtin.shell, ansible.legacy.group_by, ansible.builtin.include_tasks, include_role, ansible.legacy.win_shell, ansible.legacy.set_fact, ansible.legacy.win_command, ansible.legacy.include_vars, win_shell, ansible.legacy.meta, import_tasks, shell, include_tasks, ansible.builtin.script, ansible.legacy.include, ansible.builtin.group_by, ansible.builtin.set_fact, ansible.builtin.include, ansible.builtin.command, ansible.builtin.win_shell, command, ansible.windows.win_command, ansible.legacy.command, ansible.builtin.add_host, include, ansible.builtin.import_role, ansible.builtin.raw, ansible.builtin.include_vars, raw, ansible.legacy.raw, ansible.legacy.include_role
2025-07-30 10:22:14,645 p=210606 u=master n=ansible | ERROR! this task 'copy' has extra params, which is only allowed in the following modules: ansible.builtin.raw, ansible.builtin.win_command, ansible.legacy.command, ansible.builtin.include_role, ansible.builtin.set_fact, ansible.builtin.meta, win_command, ansible.legacy.shell, import_role, ansible.legacy.add_host, ansible.legacy.import_tasks, meta, ansible.builtin.import_role, ansible.legacy.script, ansible.builtin.win_shell, ansible.windows.win_command, ansible.legacy.include, set_fact, include_tasks, ansible.builtin.command, ansible.legacy.raw, ansible.builtin.include_tasks, ansible.legacy.group_by, ansible.builtin.include_vars, ansible.legacy.win_command, ansible.legacy.include_tasks, ansible.legacy.include_vars, shell, ansible.builtin.import_tasks, include_vars, ansible.builtin.include, ansible.windows.win_shell, include, ansible.legacy.win_shell, ansible.builtin.group_by, ansible.builtin.shell, add_host, ansible.builtin.add_host, ansible.legacy.import_role, command, ansible.legacy.include_role, group_by, include_role, ansible.builtin.script, raw, win_shell, script, ansible.legacy.meta, import_tasks, ansible.legacy.set_fact
2025-07-30 10:23:19,823 p=210660 u=master n=ansible | sm01 | CHANGED | rc=0 >>
total 32
drwxr-xr-x 2 slurm slurm 4096 Jul 30 13:23 .
drwxr-xr-x 4 root  root  4096 Jul 30 12:56 ..
-rw-r--r-- 1 slurm slurm 1374 Jul 30 12:57 cgroup.conf
-rwxr-xr-x 1 root  root  2652 Jul 30 13:23 epilog.sh
-rw-r--r-- 1 slurm slurm 2297 Jul 30 12:57 gres.conf
-rwxr-xr-x 1 root  root  2294 Jul 30 13:23 prolog.sh
-rw-r--r-- 1 slurm slurm 4415 Jul 30 12:57 slurm.conf

2025-07-30 10:23:51,885 p=210707 u=master n=ansible | cn01 | CHANGED | rc=0 >>
/etc/slurm/epilog.d/:
total 12
drwxr-xr-x 2 root root 4096 Jul 30 13:23 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..
-rwxr-xr-x 1 root root 2652 Jul 30 13:23 epilog.sh

/etc/slurm/prolog.d/:
total 12
drwxr-xr-x 2 root root 4096 Jul 30 13:23 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..
-rwxr-xr-x 1 root root 2294 Jul 30 13:23 prolog.sh

2025-07-30 10:23:52,124 p=210707 u=master n=ansible | cn02 | CHANGED | rc=0 >>
/etc/slurm/epilog.d/:
total 12
drwxr-xr-x 2 root root 4096 Jul 30 13:23 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..
-rwxr-xr-x 1 root root 2652 Jul 30 13:23 epilog.sh

/etc/slurm/prolog.d/:
total 12
drwxr-xr-x 2 root root 4096 Jul 30 13:23 .
drwxr-xr-x 4 root root 4096 Jul 30 13:13 ..
-rwxr-xr-x 1 root root 2294 Jul 30 13:23 prolog.sh

2025-07-30 10:24:03,383 p=210757 u=master n=ansible | cn01 | CHANGED => {
    "changed": true,
    "name": "slurmd",
    "state": "started",
    "status": {
        "ActiveEnterTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ActiveEnterTimestampMonotonic": "66602860323",
        "ActiveExitTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ActiveExitTimestampMonotonic": "66602844898",
        "ActiveState": "active",
        "After": "systemd-tmpfiles-setup.service tmp.mount -.mount sysinit.target system.slice systemd-journald.socket network-online.target basic.target munge.service",
        "AllowIsolate": "no",
        "AssertResult": "yes",
        "AssertTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "AssertTimestampMonotonic": "66602850515",
        "Before": "shutdown.target multi-user.target",
        "BlockIOAccounting": "no",
        "BlockIOWeight": "[not set]",
        "CPUAccounting": "yes",
        "CPUAffinityFromNUMA": "no",
        "CPUQuotaPerSecUSec": "infinity",
        "CPUQuotaPeriodUSec": "infinity",
        "CPUSchedulingPolicy": "0",
        "CPUSchedulingPriority": "0",
        "CPUSchedulingResetOnFork": "no",
        "CPUShares": "[not set]",
        "CPUUsageNSec": "112897000",
        "CPUWeight": "[not set]",
        "CacheDirectoryMode": "0755",
        "CanFreeze": "yes",
        "CanIsolate": "no",
        "CanReload": "yes",
        "CanStart": "yes",
        "CanStop": "yes",
        "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore",
        "CleanResult": "success",
        "CollectMode": "inactive",
        "ConditionResult": "yes",
        "ConditionTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ConditionTimestampMonotonic": "66602850506",
        "ConfigurationDirectoryMode": "0755",
        "Conflicts": "shutdown.target",
        "ControlGroup": "/system.slice/slurmd.service",
        "ControlGroupId": "17032",
        "ControlPID": "0",
        "CoredumpFilter": "0x33",
        "CoredumpReceive": "no",
        "DefaultDependencies": "yes",
        "DefaultMemoryLow": "0",
        "DefaultMemoryMin": "0",
        "DefaultStartupMemoryLow": "0",
        "Delegate": "yes",
        "DelegateControllers": "cpu cpuset io memory pids",
        "Description": "Slurm node daemon",
        "DevicePolicy": "auto",
        "DynamicUser": "no",
        "EffectiveCPUs": "0-3",
        "EffectiveMemoryNodes": "0",
        "ExecMainCode": "0",
        "ExecMainExitTimestampMonotonic": "0",
        "ExecMainPID": "13523",
        "ExecMainStartTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ExecMainStartTimestampMonotonic": "66602860092",
        "ExecMainStatus": "0",
        "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecStart": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecStartEx": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExitType": "main",
        "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "FailureAction": "none",
        "FileDescriptorStoreMax": "0",
        "FileDescriptorStorePreserve": "restart",
        "FinalKillSignal": "9",
        "FragmentPath": "/etc/systemd/system/slurmd.service",
        "FreezerState": "running",
        "GID": "[not set]",
        "GuessMainPID": "yes",
        "IOAccounting": "no",
        "IOReadBytes": "[not set]",
        "IOReadOperations": "[not set]",
        "IOSchedulingClass": "2",
        "IOSchedulingPriority": "4",
        "IOWeight": "[not set]",
        "IOWriteBytes": "[not set]",
        "IOWriteOperations": "[not set]",
        "IPAccounting": "no",
        "IPEgressBytes": "[no data]",
        "IPEgressPackets": "[no data]",
        "IPIngressBytes": "[no data]",
        "IPIngressPackets": "[no data]",
        "Id": "slurmd.service",
        "IgnoreOnIsolate": "no",
        "IgnoreSIGPIPE": "yes",
        "InactiveEnterTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "InactiveEnterTimestampMonotonic": "66602848605",
        "InactiveExitTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "InactiveExitTimestampMonotonic": "66602860323",
        "InvocationID": "399e0cf7d62a4e508315e21144a9338a",
        "JobRunningTimeoutUSec": "infinity",
        "JobTimeoutAction": "none",
        "JobTimeoutUSec": "infinity",
        "KeyringMode": "private",
        "KillMode": "control-group",
        "KillSignal": "15",
        "LimitAS": "infinity",
        "LimitASSoft": "infinity",
        "LimitCORE": "infinity",
        "LimitCORESoft": "0",
        "LimitCPU": "infinity",
        "LimitCPUSoft": "infinity",
        "LimitDATA": "infinity",
        "LimitDATASoft": "infinity",
        "LimitFSIZE": "infinity",
        "LimitFSIZESoft": "infinity",
        "LimitLOCKS": "infinity",
        "LimitLOCKSSoft": "infinity",
        "LimitMEMLOCK": "8388608",
        "LimitMEMLOCKSoft": "8388608",
        "LimitMSGQUEUE": "819200",
        "LimitMSGQUEUESoft": "819200",
        "LimitNICE": "0",
        "LimitNICESoft": "0",
        "LimitNOFILE": "65536",
        "LimitNOFILESoft": "65536",
        "LimitNPROC": "46581",
        "LimitNPROCSoft": "46581",
        "LimitRSS": "infinity",
        "LimitRSSSoft": "infinity",
        "LimitRTPRIO": "0",
        "LimitRTPRIOSoft": "0",
        "LimitRTTIME": "infinity",
        "LimitRTTIMESoft": "infinity",
        "LimitSIGPENDING": "46581",
        "LimitSIGPENDINGSoft": "46581",
        "LimitSTACK": "infinity",
        "LimitSTACKSoft": "8388608",
        "LoadState": "loaded",
        "LockPersonality": "no",
        "LogLevelMax": "-1",
        "LogRateLimitBurst": "0",
        "LogRateLimitIntervalUSec": "0",
        "LogsDirectoryMode": "0755",
        "MainPID": "13523",
        "ManagedOOMMemoryPressure": "auto",
        "ManagedOOMMemoryPressureLimit": "0",
        "ManagedOOMPreference": "none",
        "ManagedOOMSwap": "auto",
        "MemoryAccounting": "yes",
        "MemoryAvailable": "11715584000",
        "MemoryCurrent": "2801664",
        "MemoryDenyWriteExecute": "no",
        "MemoryHigh": "infinity",
        "MemoryKSM": "no",
        "MemoryLimit": "infinity",
        "MemoryLow": "0",
        "MemoryMax": "infinity",
        "MemoryMin": "0",
        "MemoryPeak": "3674112",
        "MemoryPressureThresholdUSec": "200ms",
        "MemoryPressureWatch": "auto",
        "MemorySwapCurrent": "0",
        "MemorySwapMax": "infinity",
        "MemorySwapPeak": "0",
        "MemoryZSwapCurrent": "0",
        "MemoryZSwapMax": "infinity",
        "MountAPIVFS": "no",
        "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "NFileDescriptorStore": "0",
        "NRestarts": "0",
        "NUMAPolicy": "n/a",
        "Names": "slurmd.service",
        "NeedDaemonReload": "no",
        "Nice": "0",
        "NoNewPrivileges": "no",
        "NonBlocking": "no",
        "NotifyAccess": "none",
        "OOMPolicy": "continue",
        "OOMScoreAdjust": "0",
        "OnFailureJobMode": "replace",
        "OnSuccessJobMode": "fail",
        "Perpetual": "no",
        "PrivateDevices": "no",
        "PrivateIPC": "no",
        "PrivateMounts": "no",
        "PrivateNetwork": "no",
        "PrivateTmp": "yes",
        "PrivateUsers": "no",
        "ProcSubset": "all",
        "ProtectClock": "no",
        "ProtectControlGroups": "no",
        "ProtectHome": "no",
        "ProtectHostname": "no",
        "ProtectKernelLogs": "no",
        "ProtectKernelModules": "no",
        "ProtectKernelTunables": "no",
        "ProtectProc": "default",
        "ProtectSystem": "no",
        "RefuseManualStart": "no",
        "RefuseManualStop": "no",
        "ReloadResult": "success",
        "ReloadSignal": "1",
        "RemainAfterExit": "no",
        "RemoveIPC": "no",
        "Requires": "system.slice sysinit.target -.mount",
        "RequiresMountsFor": "/var/tmp",
        "Restart": "on-failure",
        "RestartKillSignal": "15",
        "RestartMaxDelayUSec": "infinity",
        "RestartMode": "normal",
        "RestartSteps": "0",
        "RestartUSec": "5s",
        "RestartUSecNext": "5s",
        "RestrictNamespaces": "no",
        "RestrictRealtime": "no",
        "RestrictSUIDSGID": "no",
        "Result": "success",
        "RootDirectoryStartOnly": "no",
        "RootEphemeral": "no",
        "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "RuntimeDirectoryMode": "0755",
        "RuntimeDirectoryPreserve": "no",
        "RuntimeMaxUSec": "infinity",
        "RuntimeRandomizedExtraUSec": "0",
        "SameProcessGroup": "no",
        "SecureBits": "0",
        "SendSIGHUP": "no",
        "SendSIGKILL": "yes",
        "SetLoginEnvironment": "no",
        "Slice": "system.slice",
        "StandardError": "inherit",
        "StandardInput": "null",
        "StandardOutput": "journal",
        "StartLimitAction": "none",
        "StartLimitBurst": "5",
        "StartLimitIntervalUSec": "0",
        "StartupBlockIOWeight": "[not set]",
        "StartupCPUShares": "[not set]",
        "StartupCPUWeight": "[not set]",
        "StartupIOWeight": "[not set]",
        "StartupMemoryHigh": "infinity",
        "StartupMemoryLow": "0",
        "StartupMemoryMax": "infinity",
        "StartupMemorySwapMax": "infinity",
        "StartupMemoryZSwapMax": "infinity",
        "StateChangeTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "StateChangeTimestampMonotonic": "66602860323",
        "StateDirectoryMode": "0755",
        "StatusErrno": "0",
        "StopWhenUnneeded": "no",
        "SubState": "running",
        "SuccessAction": "none",
        "SurviveFinalKillSignal": "no",
        "SyslogFacility": "3",
        "SyslogLevel": "6",
        "SyslogLevelPrefix": "yes",
        "SyslogPriority": "30",
        "SystemCallErrorNumber": "2147483646",
        "TTYReset": "no",
        "TTYVHangup": "no",
        "TTYVTDisallocate": "no",
        "TasksAccounting": "yes",
        "TasksCurrent": "11",
        "TasksMax": "infinity",
        "TimeoutAbortUSec": "1min 30s",
        "TimeoutCleanUSec": "infinity",
        "TimeoutStartFailureMode": "terminate",
        "TimeoutStartUSec": "1min 30s",
        "TimeoutStopFailureMode": "terminate",
        "TimeoutStopUSec": "1min 30s",
        "TimerSlackNSec": "50000",
        "Transient": "no",
        "Type": "simple",
        "UID": "[not set]",
        "UMask": "0022",
        "UnitFilePreset": "enabled",
        "UnitFileState": "enabled",
        "UtmpMode": "init",
        "WantedBy": "multi-user.target",
        "Wants": "munge.service network-online.target tmp.mount",
        "WatchdogSignal": "6",
        "WatchdogTimestampMonotonic": "0",
        "WatchdogUSec": "0"
    }
}
2025-07-30 10:24:03,433 p=210757 u=master n=ansible | cn02 | CHANGED => {
    "changed": true,
    "name": "slurmd",
    "state": "started",
    "status": {
        "ActiveEnterTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ActiveEnterTimestampMonotonic": "66862462359",
        "ActiveExitTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ActiveExitTimestampMonotonic": "66862444115",
        "ActiveState": "active",
        "After": "network-online.target basic.target system.slice sysinit.target -.mount munge.service systemd-tmpfiles-setup.service systemd-journald.socket tmp.mount",
        "AllowIsolate": "no",
        "AssertResult": "yes",
        "AssertTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "AssertTimestampMonotonic": "66862451848",
        "Before": "shutdown.target multi-user.target",
        "BlockIOAccounting": "no",
        "BlockIOWeight": "[not set]",
        "CPUAccounting": "yes",
        "CPUAffinityFromNUMA": "no",
        "CPUQuotaPerSecUSec": "infinity",
        "CPUQuotaPeriodUSec": "infinity",
        "CPUSchedulingPolicy": "0",
        "CPUSchedulingPriority": "0",
        "CPUSchedulingResetOnFork": "no",
        "CPUShares": "[not set]",
        "CPUUsageNSec": "79891000",
        "CPUWeight": "[not set]",
        "CacheDirectoryMode": "0755",
        "CanFreeze": "yes",
        "CanIsolate": "no",
        "CanReload": "yes",
        "CanStart": "yes",
        "CanStop": "yes",
        "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore",
        "CleanResult": "success",
        "CollectMode": "inactive",
        "ConditionResult": "yes",
        "ConditionTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ConditionTimestampMonotonic": "66862451830",
        "ConfigurationDirectoryMode": "0755",
        "Conflicts": "shutdown.target",
        "ControlGroup": "/system.slice/slurmd.service",
        "ControlGroupId": "17462",
        "ControlPID": "0",
        "CoredumpFilter": "0x33",
        "CoredumpReceive": "no",
        "DefaultDependencies": "yes",
        "DefaultMemoryLow": "0",
        "DefaultMemoryMin": "0",
        "DefaultStartupMemoryLow": "0",
        "Delegate": "yes",
        "DelegateControllers": "cpu cpuset io memory pids",
        "Description": "Slurm node daemon",
        "DevicePolicy": "auto",
        "DynamicUser": "no",
        "EffectiveCPUs": "0-3",
        "EffectiveMemoryNodes": "0",
        "ExecMainCode": "0",
        "ExecMainExitTimestampMonotonic": "0",
        "ExecMainPID": "7246",
        "ExecMainStartTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "ExecMainStartTimestampMonotonic": "66862462104",
        "ExecMainStatus": "0",
        "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecStart": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExecStartEx": "{ path=/usr/sbin/slurmd ; argv[]=/usr/sbin/slurmd -D ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
        "ExitType": "main",
        "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "FailureAction": "none",
        "FileDescriptorStoreMax": "0",
        "FileDescriptorStorePreserve": "restart",
        "FinalKillSignal": "9",
        "FragmentPath": "/etc/systemd/system/slurmd.service",
        "FreezerState": "running",
        "GID": "[not set]",
        "GuessMainPID": "yes",
        "IOAccounting": "no",
        "IOReadBytes": "[not set]",
        "IOReadOperations": "[not set]",
        "IOSchedulingClass": "2",
        "IOSchedulingPriority": "4",
        "IOWeight": "[not set]",
        "IOWriteBytes": "[not set]",
        "IOWriteOperations": "[not set]",
        "IPAccounting": "no",
        "IPEgressBytes": "[no data]",
        "IPEgressPackets": "[no data]",
        "IPIngressBytes": "[no data]",
        "IPIngressPackets": "[no data]",
        "Id": "slurmd.service",
        "IgnoreOnIsolate": "no",
        "IgnoreSIGPIPE": "yes",
        "InactiveEnterTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "InactiveEnterTimestampMonotonic": "66862449593",
        "InactiveExitTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "InactiveExitTimestampMonotonic": "66862462359",
        "InvocationID": "d1f95f3fa8174def8571b33127d3dd5f",
        "JobRunningTimeoutUSec": "infinity",
        "JobTimeoutAction": "none",
        "JobTimeoutUSec": "infinity",
        "KeyringMode": "private",
        "KillMode": "control-group",
        "KillSignal": "15",
        "LimitAS": "infinity",
        "LimitASSoft": "infinity",
        "LimitCORE": "infinity",
        "LimitCORESoft": "0",
        "LimitCPU": "infinity",
        "LimitCPUSoft": "infinity",
        "LimitDATA": "infinity",
        "LimitDATASoft": "infinity",
        "LimitFSIZE": "infinity",
        "LimitFSIZESoft": "infinity",
        "LimitLOCKS": "infinity",
        "LimitLOCKSSoft": "infinity",
        "LimitMEMLOCK": "8388608",
        "LimitMEMLOCKSoft": "8388608",
        "LimitMSGQUEUE": "819200",
        "LimitMSGQUEUESoft": "819200",
        "LimitNICE": "0",
        "LimitNICESoft": "0",
        "LimitNOFILE": "65536",
        "LimitNOFILESoft": "65536",
        "LimitNPROC": "46581",
        "LimitNPROCSoft": "46581",
        "LimitRSS": "infinity",
        "LimitRSSSoft": "infinity",
        "LimitRTPRIO": "0",
        "LimitRTPRIOSoft": "0",
        "LimitRTTIME": "infinity",
        "LimitRTTIMESoft": "infinity",
        "LimitSIGPENDING": "46581",
        "LimitSIGPENDINGSoft": "46581",
        "LimitSTACK": "infinity",
        "LimitSTACKSoft": "8388608",
        "LoadState": "loaded",
        "LockPersonality": "no",
        "LogLevelMax": "-1",
        "LogRateLimitBurst": "0",
        "LogRateLimitIntervalUSec": "0",
        "LogsDirectoryMode": "0755",
        "MainPID": "7246",
        "ManagedOOMMemoryPressure": "auto",
        "ManagedOOMMemoryPressureLimit": "0",
        "ManagedOOMPreference": "none",
        "ManagedOOMSwap": "auto",
        "MemoryAccounting": "yes",
        "MemoryAvailable": "11761553408",
        "MemoryCurrent": "2215936",
        "MemoryDenyWriteExecute": "no",
        "MemoryHigh": "infinity",
        "MemoryKSM": "no",
        "MemoryLimit": "infinity",
        "MemoryLow": "0",
        "MemoryMax": "infinity",
        "MemoryMin": "0",
        "MemoryPeak": "3248128",
        "MemoryPressureThresholdUSec": "200ms",
        "MemoryPressureWatch": "auto",
        "MemorySwapCurrent": "0",
        "MemorySwapMax": "infinity",
        "MemorySwapPeak": "0",
        "MemoryZSwapCurrent": "0",
        "MemoryZSwapMax": "infinity",
        "MountAPIVFS": "no",
        "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "NFileDescriptorStore": "0",
        "NRestarts": "0",
        "NUMAPolicy": "n/a",
        "Names": "slurmd.service",
        "NeedDaemonReload": "no",
        "Nice": "0",
        "NoNewPrivileges": "no",
        "NonBlocking": "no",
        "NotifyAccess": "none",
        "OOMPolicy": "continue",
        "OOMScoreAdjust": "0",
        "OnFailureJobMode": "replace",
        "OnSuccessJobMode": "fail",
        "Perpetual": "no",
        "PrivateDevices": "no",
        "PrivateIPC": "no",
        "PrivateMounts": "no",
        "PrivateNetwork": "no",
        "PrivateTmp": "yes",
        "PrivateUsers": "no",
        "ProcSubset": "all",
        "ProtectClock": "no",
        "ProtectControlGroups": "no",
        "ProtectHome": "no",
        "ProtectHostname": "no",
        "ProtectKernelLogs": "no",
        "ProtectKernelModules": "no",
        "ProtectKernelTunables": "no",
        "ProtectProc": "default",
        "ProtectSystem": "no",
        "RefuseManualStart": "no",
        "RefuseManualStop": "no",
        "ReloadResult": "success",
        "ReloadSignal": "1",
        "RemainAfterExit": "no",
        "RemoveIPC": "no",
        "Requires": "sysinit.target system.slice -.mount",
        "RequiresMountsFor": "/var/tmp",
        "Restart": "on-failure",
        "RestartKillSignal": "15",
        "RestartMaxDelayUSec": "infinity",
        "RestartMode": "normal",
        "RestartSteps": "0",
        "RestartUSec": "5s",
        "RestartUSecNext": "5s",
        "RestrictNamespaces": "no",
        "RestrictRealtime": "no",
        "RestrictSUIDSGID": "no",
        "Result": "success",
        "RootDirectoryStartOnly": "no",
        "RootEphemeral": "no",
        "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent",
        "RuntimeDirectoryMode": "0755",
        "RuntimeDirectoryPreserve": "no",
        "RuntimeMaxUSec": "infinity",
        "RuntimeRandomizedExtraUSec": "0",
        "SameProcessGroup": "no",
        "SecureBits": "0",
        "SendSIGHUP": "no",
        "SendSIGKILL": "yes",
        "SetLoginEnvironment": "no",
        "Slice": "system.slice",
        "StandardError": "inherit",
        "StandardInput": "null",
        "StandardOutput": "journal",
        "StartLimitAction": "none",
        "StartLimitBurst": "5",
        "StartLimitIntervalUSec": "0",
        "StartupBlockIOWeight": "[not set]",
        "StartupCPUShares": "[not set]",
        "StartupCPUWeight": "[not set]",
        "StartupIOWeight": "[not set]",
        "StartupMemoryHigh": "infinity",
        "StartupMemoryLow": "0",
        "StartupMemoryMax": "infinity",
        "StartupMemorySwapMax": "infinity",
        "StartupMemoryZSwapMax": "infinity",
        "StateChangeTimestamp": "Wed 2025-07-30 13:13:17 MSK",
        "StateChangeTimestampMonotonic": "66862462359",
        "StateDirectoryMode": "0755",
        "StatusErrno": "0",
        "StopWhenUnneeded": "no",
        "SubState": "running",
        "SuccessAction": "none",
        "SurviveFinalKillSignal": "no",
        "SyslogFacility": "3",
        "SyslogLevel": "6",
        "SyslogLevelPrefix": "yes",
        "SyslogPriority": "30",
        "SystemCallErrorNumber": "2147483646",
        "TTYReset": "no",
        "TTYVHangup": "no",
        "TTYVTDisallocate": "no",
        "TasksAccounting": "yes",
        "TasksCurrent": "11",
        "TasksMax": "infinity",
        "TimeoutAbortUSec": "1min 30s",
        "TimeoutCleanUSec": "infinity",
        "TimeoutStartFailureMode": "terminate",
        "TimeoutStartUSec": "1min 30s",
        "TimeoutStopFailureMode": "terminate",
        "TimeoutStopUSec": "1min 30s",
        "TimerSlackNSec": "50000",
        "Transient": "no",
        "Type": "simple",
        "UID": "[not set]",
        "UMask": "0022",
        "UnitFilePreset": "enabled",
        "UnitFileState": "enabled",
        "UtmpMode": "init",
        "WantedBy": "multi-user.target",
        "Wants": "network-online.target munge.service tmp.mount",
        "WatchdogSignal": "6",
        "WatchdogTimestampMonotonic": "0",
        "WatchdogUSec": "0"
    }
}
2025-07-30 10:26:01,290 p=210828 u=master n=ansible | cn01 | CHANGED | rc=0 >>
total 44
drwxr-xr-x 2 root root 4096 Jul 30 13:26 .
drwxr-xr-x 6 root root 4096 Jul 30 12:59 ..
-rwxr-xr-x 1 root root  900 May 17  2024 10-aptfix.sh
-rwxr-xr-x 1 root root 1235 Dec  2  2020 10-cgroups.sh
-rwxr-xr-x 1 root root 2465 Dec  2  2020 10-devices.sh
-rwxr-xr-x 1 root root 1193 Dec  2  2020 10-home.sh
-rwxr-xr-x 1 root root 1025 May 17  2024 10-localtime.sh.disabled
-rwxr-xr-x 1 root root 3597 Dec  2  2020 10-shadow.sh
-rwxr-xr-x 1 root root 3207 Dec  2  2020 98-nvidia.sh
-rwxr-xr-x 1 root root 6425 Dec  2  2020 99-mellanox.sh

2025-07-30 10:26:01,454 p=210828 u=master n=ansible | cn02 | CHANGED | rc=0 >>
total 44
drwxr-xr-x 2 root root 4096 Jul 30 13:26 .
drwxr-xr-x 6 root root 4096 Jul 30 12:59 ..
-rwxr-xr-x 1 root root  900 May 17  2024 10-aptfix.sh
-rwxr-xr-x 1 root root 1235 Dec  2  2020 10-cgroups.sh
-rwxr-xr-x 1 root root 2465 Dec  2  2020 10-devices.sh
-rwxr-xr-x 1 root root 1193 Dec  2  2020 10-home.sh
-rwxr-xr-x 1 root root 1025 May 17  2024 10-localtime.sh.disabled
-rwxr-xr-x 1 root root 3597 Dec  2  2020 10-shadow.sh
-rwxr-xr-x 1 root root 3207 Dec  2  2020 98-nvidia.sh
-rwxr-xr-x 1 root root 6425 Dec  2  2020 99-mellanox.sh

